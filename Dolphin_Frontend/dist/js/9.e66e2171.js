"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[9],{9009:(e,a,t)=>{t.r(a),t.d(a,{default:()=>v});var s=t(641),o=t(3751),r=t(33);const l={class:"page"},i={class:"lead-capture-outer"},n={class:"lead-capture-card"},d={class:"lead-capture-actions"};function u(e,a,t,u,c,m){const f=(0,s.g2)("Toast"),h=(0,s.g2)("FormLabel"),p=(0,s.g2)("FormInput"),_=(0,s.g2)("FormRow"),g=(0,s.g2)("FormDropdown"),k=(0,s.g2)("MainLayout");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(f),(0,s.bF)(k,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",l,[(0,s.Lk)("div",i,[(0,s.Lk)("div",n,[a[30]||(a[30]=(0,s.Lk)("h3",{class:"lead-capture-card-title"},"Enter Lead Details",-1)),(0,s.Lk)("form",{class:"lead-capture-form",onSubmit:a[13]||(a[13]=(0,o.D$)((...e)=>m.handleSaveLead&&m.handleSaveLead(...e),["prevent"]))},[(0,s.bF)(_,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[14]||(a[14]=[(0,s.eW)("First Name",-1)])]),_:1}),(0,s.bF)(p,{modelValue:c.form.firstName,"onUpdate:modelValue":a[0]||(a[0]=e=>c.form.firstName=e),icon:"fas fa-user",placeholder:"Type here",required:""},null,8,["modelValue"]),c.errors.firstName?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.firstName[0]),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[15]||(a[15]=[(0,s.eW)("Last Name",-1)])]),_:1}),(0,s.bF)(p,{modelValue:c.form.lastName,"onUpdate:modelValue":a[1]||(a[1]=e=>c.form.lastName=e),icon:"fas fa-user",placeholder:"Type here",required:""},null,8,["modelValue"]),c.errors.lastName?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.lastName[0]),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[16]||(a[16]=[(0,s.eW)("Email",-1)])]),_:1}),(0,s.bF)(p,{modelValue:c.form.email,"onUpdate:modelValue":a[2]||(a[2]=e=>c.form.email=e),icon:"fas fa-envelope",type:"email",placeholder:"abc@gmail.com",required:""},null,8,["modelValue"]),c.errors.email?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.email[0]),1)]),_:1})):(0,s.Q3)("",!0)])]),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[17]||(a[17]=[(0,s.eW)("Phone",-1)])]),_:1}),(0,s.bF)(p,{modelValue:c.form.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>c.form.phone=e),icon:"fas fa-phone",placeholder:"Type here",required:""},null,8,["modelValue"]),c.errors.phone?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.phone[0]),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[18]||(a[18]=[(0,s.eW)("How did you find us?",-1)])]),_:1}),(0,s.bF)(g,{modelValue:c.form.findUs,"onUpdate:modelValue":a[4]||(a[4]=e=>c.form.findUs=e),icon:"fas fa-search",options:[{value:null,text:"Select",disabled:!0},...c.findUsOptions.map(e=>({value:e,text:e}))],required:""},null,8,["modelValue","options"]),c.errors.find_us?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.find_us[0]),1)]),_:1})):(0,s.Q3)("",!0)]),a[19]||(a[19]=(0,s.Lk)("div",null,null,-1))]),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[20]||(a[20]=[(0,s.eW)("Organization Name",-1)])]),_:1}),(0,s.bF)(p,{modelValue:c.form.organization_name,"onUpdate:modelValue":a[5]||(a[5]=e=>c.form.organization_name=e),icon:"fas fa-cog",placeholder:"Organization Name",required:""},null,8,["modelValue"]),c.errors.organization_name?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.organization_name[0]),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[21]||(a[21]=[(0,s.eW)("Organization Size",-1)])]),_:1}),(0,s.bF)(g,{modelValue:c.form.organization_size,"onUpdate:modelValue":a[6]||(a[6]=e=>c.form.organization_size=e),icon:"fas fa-users",options:[{value:null,text:"Select",disabled:!0},...c.orgSizeOptions.map(e=>({value:e,text:e}))],required:""},null,8,["modelValue","options"]),c.errors.organization_size?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.organization_size[0]),1)]),_:1})):(0,s.Q3)("",!0)]),a[22]||(a[22]=(0,s.Lk)("div",null,null,-1))]),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[23]||(a[23]=[(0,s.eW)("Address Line",-1)])]),_:1}),(0,s.bF)(p,{modelValue:c.form.address,"onUpdate:modelValue":a[7]||(a[7]=e=>c.form.address=e),icon:"fas fa-map-marker-alt",placeholder:"153, Maggie Loop Pottsville",required:""},null,8,["modelValue"]),c.errors.address?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.address[0]),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[24]||(a[24]=[(0,s.eW)("Country",-1)])]),_:1}),(0,s.bF)(g,{modelValue:c.form.country_id,"onUpdate:modelValue":a[8]||(a[8]=e=>c.form.country_id=e),icon:"fas fa-globe",onChange:m.onCountryChange,options:[{value:null,text:"Select",disabled:!0},...c.countries.map(e=>({value:e.id,text:e.name}))],required:""},null,8,["modelValue","onChange","options"]),c.errors.country_id?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.country_id[0]),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[25]||(a[25]=[(0,s.eW)("State",-1)])]),_:1}),(0,s.bF)(g,{modelValue:c.form.state_id,"onUpdate:modelValue":a[9]||(a[9]=e=>c.form.state_id=e),icon:"fas fa-map-marker-alt",onChange:m.onStateChange,options:[{value:null,text:"Select",disabled:!0},...c.states.map(e=>({value:e.id,text:e.name}))],required:""},null,8,["modelValue","onChange","options"]),c.errors.state_id?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.state_id[0]),1)]),_:1})):(0,s.Q3)("",!0)])]),_:1}),(0,s.bF)(_,null,{default:(0,s.k6)(()=>[(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[26]||(a[26]=[(0,s.eW)("City",-1)])]),_:1}),(0,s.bF)(g,{modelValue:c.form.city_id,"onUpdate:modelValue":a[10]||(a[10]=e=>c.form.city_id=e),icon:"fas fa-map-marker-alt",options:[{value:null,text:"Select",disabled:!0},...c.cities.map(e=>({value:e.id,text:e.name}))],required:""},null,8,["modelValue","options"]),c.errors.city_id?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.city_id[0]),1)]),_:1})):(0,s.Q3)("",!0)]),(0,s.Lk)("div",null,[(0,s.bF)(h,null,{default:(0,s.k6)(()=>[...a[27]||(a[27]=[(0,s.eW)("Zip Code",-1)])]),_:1}),(0,s.bF)(p,{modelValue:c.form.zip,"onUpdate:modelValue":a[11]||(a[11]=e=>c.form.zip=e),icon:"fas fa-map-marker-alt",placeholder:"Enter PIN code",required:""},null,8,["modelValue"]),c.errors.zip?((0,s.uX)(),(0,s.Wv)(h,{key:0,class:"error-message"},{default:(0,s.k6)(()=>[(0,s.eW)((0,r.v_)(c.errors.zip[0]),1)]),_:1})):(0,s.Q3)("",!0)]),a[28]||(a[28]=(0,s.Lk)("div",null,null,-1))]),_:1}),(0,s.Lk)("div",d,[(0,s.Lk)("button",{type:"button",class:"org-edit-cancel",onClick:a[12]||(a[12]=a=>e.$router.push("/leads"))}," Cancel "),a[29]||(a[29]=(0,s.Lk)("button",{type:"submit",class:"org-edit-update"}," Save Lead ",-1))])],32)])])])]),_:1})],64)}var c=t(4631),m=t(2281),f=t(3413),h=t(3080),p=t(4335),_=t(3270);const g={name:"LeadCapture",components:{MainLayout:c.A,FormRow:m.fh,FormLabel:m.lR,FormInput:m.ZQ,FormDropdown:m.ad,FormBox:m.CQ,Toast:f.A},setup(){const e=(0,h.d)();return{toast:e}},data(){return{showPassword:!1,findUsOptions:_.ch,orgSizeOptions:_.w6,form:{firstName:"",lastName:"",email:"",phone:"",password:"",findUs:"",organization_name:"",organization_size:"",address:"",country_id:null,state_id:null,city_id:null,zip:""},countries:[],states:[],cities:[],loading:!1,successMessage:"",errorMessage:"",errors:{}}},watch:{"form.country_id"(e){console.log("[LeadCapture] [FRONTEND] country_id changed:",e,"type:",typeof e)}},methods:{togglePassword(){this.showPassword=!this.showPassword},async fetchCountries(){const e="http://127.0.0.1:8000";console.log("[LeadCapture] [FRONTEND] Fetching countries...");const a=await p.A.get(`${e}/api/countries`);this.countries=a.data,console.log("[LeadCapture] [FRONTEND] Countries fetched:",this.countries)},async fetchStates(){if(!this.form.country_id)return this.states=[],void console.log("[LeadCapture] [FRONTEND] No country selected, states cleared.");const e="http://127.0.0.1:8000";console.log(`[LeadCapture] [FRONTEND] Fetching states for country_id: ${this.form.country_id}`);const a=await p.A.get(`${e}/api/states?country_id=${this.form.country_id}`);this.states=a.data,console.log("[LeadCapture] [FRONTEND] States fetched:",this.states)},async fetchCities(){if(!this.form.state_id)return this.cities=[],void console.log("[LeadCapture] [FRONTEND] No state selected, cities cleared.");const e="http://127.0.0.1:8000";console.log(`[LeadCapture] [FRONTEND] Fetching cities for state_id: ${this.form.state_id}`);const a=await p.A.get(`${e}/api/cities?state_id=${this.form.state_id}`);this.cities=a.data,console.log("[LeadCapture] [FRONTEND] Cities fetched:",this.cities)},onCountryChange(){let e=this.form.country_id;if(null!==e&&""!==e&&"number"!==typeof e){const a=Number(e);isNaN(a)||(this.form.country_id=a,e=a)}console.log("[LeadCapture] [FRONTEND] Country changed:",e,"type:",typeof e),e&&"number"===typeof e?(this.form.state_id=null,this.form.city_id=null,this.states=[],this.cities=[],this.fetchStates()):(this.form.state_id=null,this.form.city_id=null,this.states=[],this.cities=[],console.log("[LeadCapture] [FRONTEND] No country selected, states cleared."))},onStateChange(){let e=this.form.state_id;if(null!==e&&""!==e&&"number"!==typeof e){const a=Number(e);isNaN(a)||(this.form.state_id=a,e=a)}console.log("[LeadCapture] [FRONTEND] State changed:",e,"type:",typeof e),e&&"number"===typeof e?(this.form.city_id=null,this.cities=[],this.fetchCities()):(this.form.city_id=null,this.cities=[],console.log("[LeadCapture] [FRONTEND] No state selected, cities cleared."))},async handleSaveLead(){this.loading=!0,this.successMessage="",this.errorMessage="";try{const e=t(3193)["default"],a=e.get("authToken");if(!a)return this.errorMessage="Authentication token not found. Please log in.",void(this.loading=!1);const s="http://127.0.0.1:8000",o=await p.A.post(`${s}/api/leads`,{first_name:this.form.firstName,last_name:this.form.lastName,email:this.form.email,phone:this.form.phone,password:this.form.password,find_us:this.form.findUs,organization_name:this.form.organization_name,organization_size:this.form.organization_size,address:this.form.address,country_id:this.form.country_id,state_id:this.form.state_id,city_id:this.form.city_id,zip:this.form.zip},{headers:{Authorization:`Bearer ${a}`}});this.successMessage=o.data.message||"Lead saved successfully!",this.resetForm(),this.$router.push("/leads")}catch(e){if(console.error("Error saving lead:",e),e.response?.data){const{message:a,errors:t}=e.response.data;this.errorMessage=a||"Failed to save lead.",this.errors=t||{}}else this.errorMessage="An unexpected error occurred.";this.$toast.add({severity:"error",summary:"Validation Error",detail:this.errorMessage,life:5e3})}finally{this.loading=!1}},resetForm(){this.form={firstName:"",lastName:"",email:"",phone:"",password:"",findUs:"",organization_name:"",organization_size:"",address:"",country_id:"",state_id:"",city_id:"",zip:""},this.states=[],this.cities=[]}},mounted(){this.fetchCountries()}};var k=t(6262);const y=(0,k.A)(g,[["render",u],["__scopeId","data-v-ba9ff632"]]),v=y}}]);
//# sourceMappingURL=9.e66e2171.js.map