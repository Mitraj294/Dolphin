{"version":3,"file":"js/223.257b3b08.js","mappings":"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","sources":["webpack://dolphin/./src/components/Common/BillingDetails.vue","webpack://dolphin/./src/components/Common/BillingDetails.vue?56aa"],"sourcesContent":["<template>\n  <MainLayout>\n    <div class=\"page\">\n      <div class=\"table-outer\">\n        <div class=\"table-card\">\n          <div class=\"billing-title\">\n            Billing Details (Current Subscription)\n          </div>\n          <div class=\"billing-plan-box\">\n            <div>\n              <div class=\"plan-name\">\n                <span\n                  v-if=\"\n                    currentPlan &&\n                    (Number(currentPlan.price) === 2500 ||\n                      Number(currentPlan.amount) === 2500)\n                  \"\n                  >Standard</span\n                >\n                <span\n                  v-else-if=\"\n                    currentPlan &&\n                    (Number(currentPlan.price) === 250 ||\n                      Number(currentPlan.amount) === 250)\n                  \"\n                  >Basic</span\n                >\n                <span v-else>{{ currentPlan?.name || '' }}</span>\n              </div>\n              <div class=\"plan-price\">\n                <span\n                  v-if=\"\n                    currentPlan &&\n                    (Number(currentPlan.price) === 2500 ||\n                      Number(currentPlan.amount) === 2500)\n                  \"\n                  >$2500/Annual</span\n                >\n                <span\n                  v-else-if=\"\n                    currentPlan &&\n                    (Number(currentPlan.price) === 250 ||\n                      Number(currentPlan.amount) === 250)\n                  \"\n                  >$250/Month</span\n                >\n                <span v-else>\n                  {{\n                    currentPlan?.price\n                      ? `$${currentPlan.price}`\n                      : currentPlan?.amount\n                      ? `$${currentPlan.amount}`\n                      : ''\n                  }}\n                </span>\n              </div>\n            </div>\n            <div class=\"plan-meta\">\n              <div>\n                Subscription Start :\n                <b>{{\n                  currentPlan?.start ? formatDate(currentPlan.start) : ''\n                }}</b>\n              </div>\n              <div>\n                Subscription End :\n                <b>{{ currentPlan?.end ? formatDate(currentPlan.end) : '' }}</b>\n              </div>\n              <div class=\"plan-next\">\n                (Next bill on\n                {{\n                  currentPlan?.nextBill ? formatDate(currentPlan.nextBill) : ''\n                }})\n              </div>\n            </div>\n          </div>\n          <div class=\"billing-title\">Billing History</div>\n          <div class=\"table-container\">\n            <table class=\"table\">\n              <TableHeader\n                :columns=\"[\n                  { label: 'Payment Method', key: 'paymentMethod' },\n                  { label: 'Payment Date', key: 'paymentDate' },\n                  { label: 'Subscription End', key: 'subscriptionEnd' },\n                  { label: 'Amount', key: 'amount' },\n                  { label: 'Download', key: 'invoice' },\n                  { label: 'Description', key: 'description' },\n                ]\"\n              />\n              <tbody>\n                <tr\n                  v-for=\"(item, idx) in billingHistory\"\n                  :key=\"idx\"\n                >\n                  <td>{{ item.paymentMethod }}</td>\n\n                  <td>\n                    {{ item.paymentDate ? formatDate(item.paymentDate) : '' }}\n                  </td>\n                  <td>\n                    {{\n                      item.subscriptionEnd\n                        ? formatDate(item.subscriptionEnd)\n                        : ''\n                    }}\n                  </td>\n                  <td>{{ item.amount ? `$${item.amount}` : '' }}</td>\n                  <td>\n                    <a\n                      v-if=\"item.pdfUrl\"\n                      :href=\"item.pdfUrl\"\n                      class=\"receipt-link\"\n                      target=\"_blank\"\n                      rel=\"noopener\"\n                      style=\"margin-left: 8px\"\n                    >\n                      <svg\n                        width=\"16\"\n                        height=\"16\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        style=\"vertical-align: middle; margin-right: 4px\"\n                      >\n                        <rect\n                          x=\"3\"\n                          y=\"3\"\n                          width=\"18\"\n                          height=\"18\"\n                          rx=\"2\"\n                          stroke=\"#0074c2\"\n                          stroke-width=\"2\"\n                        />\n                        <path\n                          d=\"M7 7h10M7 11h10M7 15h6\"\n                          stroke=\"#0074c2\"\n                          stroke-width=\"2\"\n                        />\n                      </svg>\n                      View Receipt\n                    </a>\n                  </td>\n                  <td>{{ item.description }}</td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </MainLayout>\n</template>\n\n<script>\nimport MainLayout from '@/components/layout/MainLayout.vue';\nimport TableHeader from '@/components/Common/Common_UI/TableHeader.vue';\nimport axios from 'axios';\nimport storage from '@/services/storage';\n\nconst API_BASE_URL = process.env.VUE_APP_API_BASE_URL || '';\n\nexport default {\n  name: 'BillingDetails',\n  components: { MainLayout, TableHeader },\n  data() {\n    return {\n      currentPlan: null,\n      billingHistory: [],\n    };\n  },\n  methods: {\n    async fetchBillingDetails() {\n      try {\n        const authToken = storage.get('authToken');\n        const headers = {};\n        if (authToken) headers['Authorization'] = `Bearer ${authToken}`;\n        // If orgId is supplied via query, request org-specific billing endpoints\n        const orgId = this.$route.query.orgId || null;\n        const planUrl = orgId\n          ? `${API_BASE_URL}/api/billing/current?org_id=${orgId}`\n          : `${API_BASE_URL}/api/billing/current`;\n        // Fetch current plan\n        const planRes = await axios.get(planUrl, { headers });\n        this.currentPlan = planRes.data || null;\n        // Fetch billing history\n        const historyUrl = orgId\n          ? `${API_BASE_URL}/api/billing/history?org_id=${orgId}`\n          : `${API_BASE_URL}/api/billing/history`;\n        const historyRes = await axios.get(historyUrl, { headers });\n        this.billingHistory = Array.isArray(historyRes.data)\n          ? historyRes.data\n          : [];\n      } catch (e) {\n        this.currentPlan = null;\n        this.billingHistory = [];\n      }\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const d = new Date(dateStr);\n      if (isNaN(d)) return '';\n      return d.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n      });\n    },\n  },\n  mounted() {\n    this.fetchBillingDetails();\n  },\n};\n</script>\n\n<style scoped>\n.billing-title {\n  font-size: 24px;\n  font-weight: 600;\n  margin: 24px;\n  text-align: left;\n}\n.billing-plan-box {\n  background: #f6f6f6;\n  border-radius: 12px;\n  padding: 24px 32px;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  margin-bottom: 0;\n  box-sizing: border-box;\n  margin: 24px 16px 0 16px;\n}\n.plan-name {\n  font-size: 22px;\n  font-weight: 500;\n  margin-bottom: 8px;\n  text-align: left;\n}\n.plan-price {\n  font-size: 32px;\n  font-weight: 700;\n  margin-bottom: 0;\n}\n.plan-meta {\n  text-align: right;\n  color: #888;\n  font-size: 17px;\n  font-weight: 400;\n}\n.plan-meta b {\n  color: #222;\n  font-weight: 500;\n}\n.plan-next {\n  font-size: 15px;\n  color: #bdbdbd;\n  margin-top: 4px;\n}\n\n.receipt-link {\n  color: #0074c2;\n  text-decoration: underline;\n  font-size: 17px;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n\n/* Responsive styles to match other pages */\n@media (max-width: 1400px) {\n  .billing-plan-box {\n    padding: 18px 8px;\n  }\n}\n@media (max-width: 900px) {\n  .billing-plan-box {\n    padding: 16px 8px;\n    flex-direction: column;\n    gap: 54px;\n    align-items: center;\n    justify-content: center;\n    text-align: center;\n  }\n}\n</style>\n","import { render } from \"./BillingDetails.vue?vue&type=template&id=7163472a&scoped=true\"\nimport script from \"./BillingDetails.vue?vue&type=script&lang=js\"\nexport * from \"./BillingDetails.vue?vue&type=script&lang=js\"\n\nimport \"./BillingDetails.vue?vue&type=style&index=0&id=7163472a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7163472a\"]])\n\nexport default __exports__"],"names":["class","width","height","fill","viewBox","style","_createBlock","_component_MainLayout","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","$data","currentPlan","Number","price","amount","_createElementBlock","_hoisted_8","_toDisplayString","name","_hoisted_7","_hoisted_6","_hoisted_9","_hoisted_12","_hoisted_11","_hoisted_10","_hoisted_13","start","$options","formatDate","end","_hoisted_14","nextBill","_hoisted_15","_hoisted_16","_createVNode","_component_TableHeader","columns","_Fragment","_renderList","billingHistory","item","idx","key","paymentMethod","paymentDate","subscriptionEnd","pdfUrl","href","target","rel","_hoisted_18","_cache","x","y","rx","stroke","d","description","API_BASE_URL","process","components","MainLayout","TableHeader","data","methods","fetchBillingDetails","authToken","storage","get","headers","orgId","this","$route","query","planUrl","planRes","axios","historyUrl","historyRes","Array","isArray","e","dateStr","Date","isNaN","toLocaleDateString","year","month","day","mounted","__exports__","render"],"sourceRoot":""}