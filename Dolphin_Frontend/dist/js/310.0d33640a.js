"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[310],{1310:(e,a,r)=>{r.r(a),r.d(a,{default:()=>b});var o=r(641),l=r(3751),s=r(33);const n={class:"page"},t={class:"lead-capture-outer"},i={class:"lead-capture-card"},d={key:0},u={class:"lead-capture-actions"},m=["disabled"];function c(e,a,r,c,f,p){const h=(0,o.g2)("Toast"),g=(0,o.g2)("FormLabel"),_=(0,o.g2)("FormInput"),k=(0,o.g2)("FormRow"),v=(0,o.g2)("FormDropdown"),y=(0,o.g2)("MainLayout");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(h),(0,o.bF)(y,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",n,[(0,o.Lk)("div",t,[(0,o.Lk)("div",i,[a[19]||(a[19]=(0,o.Lk)("h3",{class:"lead-capture-card-title"},"Add User",-1)),(0,o.Lk)("form",{class:"lead-capture-form",onSubmit:a[9]||(a[9]=(0,l.D$)((...e)=>p.handleAddUser&&p.handleAddUser(...e),["prevent"]))},[(0,o.bF)(k,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[10]||(a[10]=[(0,o.eW)("First Name",-1)])]),_:1}),(0,o.bF)(_,{modelValue:f.form.firstName,"onUpdate:modelValue":a[0]||(a[0]=e=>f.form.firstName=e),icon:"fas fa-user",placeholder:"Type here",required:""},null,8,["modelValue"]),f.errors.first_name?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(f.errors.first_name[0]),1)]),_:1})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[11]||(a[11]=[(0,o.eW)("Last Name",-1)])]),_:1}),(0,o.bF)(_,{modelValue:f.form.lastName,"onUpdate:modelValue":a[1]||(a[1]=e=>f.form.lastName=e),icon:"fas fa-user",placeholder:"Type here",required:""},null,8,["modelValue"]),f.errors.last_name?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(f.errors.last_name[0]),1)]),_:1})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[12]||(a[12]=[(0,o.eW)("Email",-1)])]),_:1}),(0,o.bF)(_,{modelValue:f.form.email,"onUpdate:modelValue":a[2]||(a[2]=e=>f.form.email=e),icon:"fas fa-envelope",type:"email",placeholder:"abc@gmail.com",required:""},null,8,["modelValue"]),(0,o.Lk)("div",null,[f.errors.email?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(Array.isArray(f.errors.email)?f.errors.email[0]:f.errors.email),1)]),_:1})):(0,o.Q3)("",!0)])])]),_:1}),(0,o.bF)(k,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[13]||(a[13]=[(0,o.eW)("Phone",-1)])]),_:1}),(0,o.bF)(_,{modelValue:f.form.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>f.form.phone=e),icon:"fas fa-phone",placeholder:"Type here",required:""},null,8,["modelValue"]),f.errors.phone?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(f.errors.phone[0]),1)]),_:1})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[14]||(a[14]=[(0,o.eW)("Country",-1)])]),_:1}),(0,o.bF)(v,{modelValue:f.form.country_id,"onUpdate:modelValue":a[4]||(a[4]=e=>f.form.country_id=e),icon:"fas fa-globe",onChange:p.onCountryChange,options:[{value:null,text:"Select",disabled:!0},...f.countries.map(e=>({value:e.id,text:e.name}))],required:""},null,8,["modelValue","onChange","options"]),f.errors.country_id?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(f.errors.country_id[0]),1)]),_:1})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[15]||(a[15]=[(0,o.eW)("Select User Role",-1)])]),_:1}),(0,o.bF)(v,{modelValue:f.form.role,"onUpdate:modelValue":a[5]||(a[5]=e=>f.form.role=e),icon:"fas fa-user-tag",options:[{value:null,text:"Select Role",disabled:!0},...f.roleOptions],required:""},null,8,["modelValue","options"]),f.errors.role?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(f.errors.role[0]),1)]),_:1})):(0,o.Q3)("",!0)])]),_:1}),"organizationadmin"===f.form.role?((0,o.uX)(),(0,o.CE)("div",d,[(0,o.bF)(k,null,{default:(0,o.k6)(()=>[(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[16]||(a[16]=[(0,o.eW)("Organization Name",-1)])]),_:1}),(0,o.bF)(_,{modelValue:f.form.organization_name,"onUpdate:modelValue":a[6]||(a[6]=e=>f.form.organization_name=e),icon:"fas fa-cog",placeholder:"Organization Name",required:""},null,8,["modelValue"]),f.errors.organization_name?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(f.errors.organization_name[0]),1)]),_:1})):(0,o.Q3)("",!0)]),(0,o.Lk)("div",null,[(0,o.bF)(g,null,{default:(0,o.k6)(()=>[...a[17]||(a[17]=[(0,o.eW)("Organization Size",-1)])]),_:1}),(0,o.bF)(v,{modelValue:f.form.organization_size,"onUpdate:modelValue":a[7]||(a[7]=e=>f.form.organization_size=e),icon:"fas fa-users",options:[{value:"",text:"Select ",disabled:!0},{value:"250+ Employees (Large)",text:"250+ Employees (Large)"},{value:"100-249 Employees (Medium)",text:"100-249 Employees (Medium)"},{value:"1-99 Employees (Small)",text:"1-99 Employees (Small)"}]},null,8,["modelValue"]),f.errors.organization_size?((0,o.uX)(),(0,o.Wv)(g,{key:0,class:"error-message1"},{default:(0,o.k6)(()=>[(0,o.eW)((0,s.v_)(f.errors.organization_size[0]),1)]),_:1})):(0,o.Q3)("",!0)]),a[18]||(a[18]=(0,o.Lk)("div",null,null,-1))]),_:1})])):(0,o.Q3)("",!0),(0,o.Lk)("div",u,[(0,o.Lk)("button",{type:"button",class:"org-edit-cancel",onClick:a[8]||(a[8]=a=>e.$router.push("/user-permission"))}," Cancel "),(0,o.Lk)("button",{type:"submit",class:"org-edit-update",disabled:f.loading},(0,s.v_)(f.loading?"Adding...":"Add User"),9,m)])],32)])])])]),_:1})],64)}var f=r(4631),p=r(2281),h=r(3413),g=r(3080),_=r(4335);const k={name:"AddUser",components:{MainLayout:f.A,FormRow:p.fh,FormLabel:p.lR,FormInput:p.ZQ,FormDropdown:p.ad,FormBox:p.CQ,Toast:h.A},setup(){const e=(0,g.d)();return{toast:e}},data(){return{loading:!1,form:{firstName:"",lastName:"",email:"",phone:"",country_id:null,role:null,organization_name:"",organization_size:""},roleOptions:[{value:"organizationadmin",text:"Organization Admin"},{value:"dolphinadmin",text:"Dolphin Admin"},{value:"salesperson",text:"Sales Person"},{value:"user",text:"User"}],countries:[],successMessage:"",errorMessage:"",errors:{}}},mounted(){this.fetchCountries()},methods:{async fetchCountries(){try{const e="http://127.0.0.1:8000",a=await _.A.get(`${e}/api/countries`);this.countries=a.data||[]}catch(e){console.warn("Failed to fetch countries",e)}},onCountryChange(e){},async handleAddUser(){if(!this.loading){this.loading=!0,this.errors={};try{const e=r(3193)["default"],a=e.get("authToken"),o="http://127.0.0.1:8000",l={first_name:this.form.firstName,last_name:this.form.lastName,email:this.form.email,phone:this.form.phone,country_id:this.form.country_id,role:this.form.role,organization_name:this.form.organization_name,organization_size:this.form.organization_size},s=await _.A.post(`${o}/api/users`,l,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});this.toast.add({severity:"success",summary:"User Added",detail:`New user has been created successfully. Password: ${s.data.password}`,life:8e3}),this.form={firstName:"",lastName:"",email:"",phone:"",role:null,organization_name:"",organization_size:""},this.$router.push("/user-permission")}catch(e){console.error("Error adding user:",e);let a="Failed to add user.";e.response&&e.response.data?(e.response.data.message&&(a=e.response.data.message),e.response.data.errors?this.errors=e.response.data.errors:this.errors={}):a="ERR_NETWORK"===e.code?"Network error - check if backend server is running and accessible":e.message,this.toast.add({severity:"error",summary:"Error",detail:a,life:5e3})}finally{this.loading=!1}}}}};var v=r(6262);const y=(0,v.A)(k,[["render",c],["__scopeId","data-v-3dff6539"]]),b=y}}]);
//# sourceMappingURL=310.0d33640a.js.map