"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[514],{2514:(a,s,n)=>{n.r(s),n.d(s,{default:()=>_});var t=n(641),e=n(33),l=n(3751);const i={class:"page"},r={class:"subscription-plans-outer"},o={class:"subscription-plans-card"},c={class:"subscription-plans-container"},p={class:"subscription-plans-options"},u=["disabled"],d={key:0},k={key:1},h=["disabled"],L={key:0},m={key:1},y={key:0,class:"purchase-modal-overlay"},v={class:"purchase-modal"},b={class:"purchase-modal-content"},g={class:"purchase-modal-right"},f={class:"plan-info-header"},P={class:"plan-info-toggle"},C={class:"switch"};function w(a,s,n,w,S,x){const B=(0,t.g2)("MainLayout");return(0,t.uX)(),(0,t.Wv)(B,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",i,[(0,t.Lk)("div",r,[(0,t.Lk)("div",o,[s[12]||(s[12]=(0,t.Lk)("div",{class:"subscription-plans-header"},null,-1)),s[13]||(s[13]=(0,t.Lk)("div",{class:"subscription-plans-header-spacer"},null,-1)),(0,t.Lk)("div",c,[s[9]||(s[9]=(0,t.Lk)("div",{class:"subscription-plans-title"},"Subscription Plans",-1)),s[10]||(s[10]=(0,t.Lk)("div",{class:"subscription-plans-desc"}," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s. ",-1)),(0,t.Lk)("div",p,[(0,t.Lk)("div",{class:(0,e.C4)(["plan-card",{"plan-card--current":250===S.userPlan}])},[s[4]||(s[4]=(0,t.Lk)("div",{class:"plan-card-header"},[(0,t.Lk)("span",{class:"plan-card-name"},"Basic")],-1)),s[5]||(s[5]=(0,t.Lk)("div",{class:"plan-card-price"},[(0,t.eW)(" $250 "),(0,t.Lk)("span",{class:"plan-card-period"},"/month")],-1)),(0,t.Lk)("button",{class:(0,e.C4)(["plan-card-btn",{"plan-card-btn--current":250===S.userPlan}]),disabled:S.isLoading,onClick:s[0]||(s[0]=a=>x.basicBtnAction())},[S.isLoading&&250!==S.userPlan?((0,t.uX)(),(0,t.CE)("span",d,"Redirecting...")):((0,t.uX)(),(0,t.CE)("span",k,(0,e.v_)(x.basicBtnText),1))],10,u)],2),(0,t.Lk)("div",{class:(0,e.C4)(["plan-card",{"plan-card--current":2500===S.userPlan}])},[s[6]||(s[6]=(0,t.Lk)("span",{class:"plan-card-badge"},"Save 2 Months",-1)),s[7]||(s[7]=(0,t.Lk)("div",{class:"plan-card-header"},[(0,t.Lk)("span",{class:"plan-card-name"},"Standard")],-1)),s[8]||(s[8]=(0,t.Lk)("div",{class:"plan-card-price"},[(0,t.eW)(" $2500 "),(0,t.Lk)("span",{class:"plan-card-period"},"/annual")],-1)),(0,t.Lk)("button",{class:(0,e.C4)(["plan-card-btn",{"plan-card-btn--current":2500===S.userPlan}]),disabled:S.isLoading,onClick:s[1]||(s[1]=a=>x.standardBtnAction())},[S.isLoading&&2500!==S.userPlan?((0,t.uX)(),(0,t.CE)("span",L,"Redirecting...")):((0,t.uX)(),(0,t.CE)("span",m,(0,e.v_)(x.standardBtnText),1))],10,h)],2)]),s[11]||(s[11]=(0,t.Lk)("div",{class:"subscription-plans-footer"}," Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",-1))])])]),S.showPurchaseModal?((0,t.uX)(),(0,t.CE)("div",y,[(0,t.Lk)("div",v,[(0,t.Lk)("button",{class:"purchase-modal-close",onClick:s[2]||(s[2]=a=>S.showPurchaseModal=!1)}," × "),(0,t.Lk)("div",b,[s[26]||(s[26]=(0,t.Lk)("div",{class:"purchase-modal-left"},[(0,t.Lk)("div",{class:"purchase-modal-title"},"Get Essential"),(0,t.Lk)("div",{class:"purchase-modal-section-label"}," Billing Information "),(0,t.Lk)("div",{class:"purchase-modal-form"},[(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("span",{class:"input-icon material-icons"},"mail"),(0,t.Lk)("input",{type:"email",placeholder:"abcd@gmail.com"})]),(0,t.Lk)("div",{class:"input-row"},[(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("span",{class:"input-icon material-icons"},"person"),(0,t.Lk)("input",{type:"text",placeholder:"First Name"})]),(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("span",{class:"input-icon material-icons"},"person"),(0,t.Lk)("input",{type:"text",placeholder:"Last Name"})])]),(0,t.Lk)("div",{class:"input-row"},[(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("select",null,[(0,t.Lk)("option",null,"Country")])]),(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("select",null,[(0,t.Lk)("option",null,"State")])])]),(0,t.Lk)("div",{class:"input-row"},[(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("input",{type:"text",placeholder:"City"})]),(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("input",{type:"text",placeholder:"Zip code"})])]),(0,t.Lk)("div",{class:"purchase-modal-section-label"},"Payment Method"),(0,t.Lk)("div",{class:"payment-method-row"},[(0,t.Lk)("label",{class:"payment-method-btn"},[(0,t.Lk)("input",{type:"radio",name:"payment",checked:""}),(0,t.Lk)("span",{class:"icon material-icons"},"credit_card"),(0,t.eW)(" Card ")]),(0,t.Lk)("label",{class:"payment-method-btn"},[(0,t.Lk)("input",{type:"radio",name:"payment"}),(0,t.Lk)("span",{class:"icon material-icons"},"account_balance_wallet"),(0,t.eW)(" Paypal ")])]),(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("input",{type:"text",placeholder:"Name on Card"})]),(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("input",{type:"text",placeholder:"0000 0000 0000 0000",maxlength:"19"})]),(0,t.Lk)("div",{class:"input-row"},[(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("input",{type:"text",placeholder:"MM/YY",maxlength:"5"})]),(0,t.Lk)("div",{class:"input-group"},[(0,t.Lk)("input",{type:"text",placeholder:"CVV",maxlength:"4"}),(0,t.Lk)("span",{class:"input-icon material-icons"},"help_outline")])])])],-1)),(0,t.Lk)("div",g,[(0,t.Lk)("div",f,[s[17]||(s[17]=(0,t.Lk)("span",null,"Plan Info",-1)),(0,t.Lk)("span",P,[s[15]||(s[15]=(0,t.eW)(" Monthly ",-1)),(0,t.Lk)("label",C,[(0,t.bo)((0,t.Lk)("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=a=>S.isAnnually=a)},null,512),[[l.lH,S.isAnnually]]),s[14]||(s[14]=(0,t.Lk)("span",{class:"switch-slider"},null,-1))]),s[16]||(s[16]=(0,t.eW)(" Annually ",-1))])]),s[18]||(s[18]=(0,t.Lk)("div",{class:"plan-info-benefits"},[(0,t.Lk)("div",{class:"plan-info-benefits-title"}," With Essential you get "),(0,t.Lk)("ul",null,[(0,t.Lk)("li",null,[(0,t.Lk)("span",{class:"checkmark"},"✓"),(0,t.eW)(" Benefit no. 1")]),(0,t.Lk)("li",null,[(0,t.Lk)("span",{class:"checkmark"},"✓"),(0,t.eW)(" Benefit no. 2")]),(0,t.Lk)("li",null,[(0,t.Lk)("span",{class:"checkmark"},"✓"),(0,t.eW)(" Benefit no. 3")])])],-1)),s[19]||(s[19]=(0,t.Lk)("hr",{class:"plan-info-divider"},null,-1)),s[20]||(s[20]=(0,t.Lk)("input",{class:"promo-input",type:"text",placeholder:"Apply Promo Code"},null,-1)),s[21]||(s[21]=(0,t.Lk)("div",{class:"plan-info-summary"},[(0,t.Lk)("div",{class:"summary-row"},[(0,t.Lk)("span",null,"Subtotal"),(0,t.Lk)("span",null,"$2500.00/year")]),(0,t.Lk)("div",{class:"summary-row"},[(0,t.Lk)("span",null,"Yearly plan discount"),(0,t.Lk)("span",null,"-$20.00")]),(0,t.Lk)("div",{class:"summary-row"},[(0,t.Lk)("span",null,"Promo code discount"),(0,t.Lk)("span",null,"-$26.00")])],-1)),s[22]||(s[22]=(0,t.Lk)("hr",{class:"plan-info-divider"},null,-1)),s[23]||(s[23]=(0,t.Lk)("div",{class:"summary-row summary-row-total"},[(0,t.Lk)("span",null,"Billed Now"),(0,t.Lk)("span",{class:"billed-now"},"-$2454.00")],-1)),s[24]||(s[24]=(0,t.Lk)("button",{class:"btn btn-primary"},"Confirm and Pay",-1)),s[25]||(s[25]=(0,t.Lk)("div",{class:"plan-info-note"},[(0,t.eW)(" Your subscription will renew automatically every year as Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard "),(0,t.Lk)("a",{href:"#"},"Terms and Conditions"),(0,t.eW)(". ")],-1))])])])])):(0,t.Q3)("",!0)])]),_:1})}var S=n(4631),x=n(4335),B=n(3193);const A={name:"SubscriptionPlans",components:{MainLayout:S.A},data(){return{showPurchaseModal:!1,planPeriod:"annually",isAnnually:!0,isLoading:!1,stripePriceIds:{monthly:"price_1RqAOwPnfSZSgS1X7vLNRdmX",annually:"price_1RqAPlPnfSZSgS1X2zY3qP4K"},userPlan:null}},computed:{basicBtnText(){return 250===this.userPlan?"Current Plan":2500===this.userPlan?"Change Plan":"Get Started"},basicBtnAction(){return 250===this.userPlan?this.goToBillingDetails:(this.userPlan,this.startStripeCheckout.bind(this,"monthly"))},standardBtnText(){return 2500===this.userPlan?"Current Plan":250===this.userPlan?"Upgrade Plan":"Get Started"},standardBtnAction(){return 2500===this.userPlan?this.goToBillingDetails:(this.userPlan,this.startStripeCheckout.bind(this,"annually"))}},watch:{isAnnually(a){this.planPeriod=a?"annually":"monthly"}},methods:{async fetchUserPlan(){try{const a=B["default"].get("authToken"),s="http://127.0.0.1:8000",t=await x.A.get(`${s}/api/subscription`,{headers:{Authorization:`Bearer ${a}`}});this.userPlan=t.data.plan_amount||null;const{fetchCurrentUser:e}=await Promise.resolve().then(n.bind(n,9205)),l=await e(),i=B["default"].get("role");l&&l.role?console.log("[Subscription] New role from backend:",l.role):l.role!==i?(B["default"].set("role",l.role),window.location.reload()):console.warn("[Subscription] Could not fetch user or user.role")}catch(a){this.userPlan=null,console.error("[Subscription] Error fetching user plan or updating role:",a)}},async startStripeCheckout(a){this.isLoading=!0;try{const s=this.stripePriceIds[a]||this.stripePriceIds.annually,n=B["default"].get("authToken"),t="http://127.0.0.1:8000",e=await x.A.post(`${t}/api/stripe/checkout-session`,{price_id:s},{headers:{Authorization:`Bearer ${n}`}});e.data&&e.data.url?window.location.href=e.data.url:this.$toast&&"function"===typeof this.$toast.add?this.$toast.add({severity:"error",summary:"Checkout Error",detail:"Could not start Stripe Checkout.",life:4e3}):console.warn("Toast not available: Could not start Stripe Checkout.")}catch(s){this.$toast&&"function"===typeof this.$toast.add?this.$toast.add({severity:"error",summary:"Checkout Error",detail:"Stripe Checkout failed.",life:4e3}):console.error("Toast not available: Stripe Checkout failed."),console.error("[Subscription] Stripe checkout error:",s)}finally{this.isLoading=!1}},goToBillingDetails(){this.$router.push({name:"BillingDetails"})}},mounted(){this.fetchUserPlan()}};var $=n(6262);const W=(0,$.A)(A,[["render",w],["__scopeId","data-v-7cb683fe"]]),_=W}}]);
//# sourceMappingURL=514.f11e78bd.js.map