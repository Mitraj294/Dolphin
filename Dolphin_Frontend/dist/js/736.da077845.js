"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[736],{6736:(a,s,n)=>{n.r(s),n.d(s,{default:()=>I});var l=n(641),e=n(33),t=n(3751);const i={class:"page"},r={class:"subscription-plans-outer"},o={class:"subscription-plans-card"},c={class:"subscription-plans-container"},p={class:"subscription-plans-options"},u=["disabled"],d={key:0},k={key:1},h=["disabled"],L={key:0},m={key:1},y={key:0,class:"purchase-modal-overlay"},v={class:"purchase-modal"},g={class:"purchase-modal-content"},b={class:"purchase-modal-right"},f={class:"plan-info-header"},P={class:"plan-info-toggle"},w={class:"switch"};function C(a,s,n,C,S,x){const B=(0,l.g2)("MainLayout");return(0,l.uX)(),(0,l.Wv)(B,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",i,[(0,l.Lk)("div",r,[(0,l.Lk)("div",o,[s[12]||(s[12]=(0,l.Lk)("div",{class:"subscription-plans-header"},null,-1)),s[13]||(s[13]=(0,l.Lk)("div",{class:"subscription-plans-header-spacer"},null,-1)),(0,l.Lk)("div",c,[s[9]||(s[9]=(0,l.Lk)("div",{class:"subscription-plans-title"},"Subscription Plans",-1)),s[10]||(s[10]=(0,l.Lk)("div",{class:"subscription-plans-desc"}," Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s. ",-1)),(0,l.Lk)("div",p,[(0,l.Lk)("div",{class:(0,e.C4)(["plan-card",{"plan-card--current":250===S.userPlan}])},[s[4]||(s[4]=(0,l.Lk)("div",{class:"plan-card-header"},[(0,l.Lk)("span",{class:"plan-card-name"},"Basic")],-1)),s[5]||(s[5]=(0,l.Lk)("div",{class:"plan-card-price"},[(0,l.eW)(" $250 "),(0,l.Lk)("span",{class:"plan-card-period"},"/month")],-1)),(0,l.Lk)("button",{class:(0,e.C4)(["plan-card-btn",{"plan-card-btn--current":250===S.userPlan}]),disabled:S.isLoading,onClick:s[0]||(s[0]=a=>x.basicBtnAction())},[S.isLoading&&250!==S.userPlan?((0,l.uX)(),(0,l.CE)("span",d,"Redirecting...")):((0,l.uX)(),(0,l.CE)("span",k,(0,e.v_)(x.basicBtnText),1))],10,u)],2),(0,l.Lk)("div",{class:(0,e.C4)(["plan-card",{"plan-card--current":2500===S.userPlan}])},[s[6]||(s[6]=(0,l.Lk)("span",{class:"plan-card-badge"},"Save 2 Months",-1)),s[7]||(s[7]=(0,l.Lk)("div",{class:"plan-card-header"},[(0,l.Lk)("span",{class:"plan-card-name"},"Standard")],-1)),s[8]||(s[8]=(0,l.Lk)("div",{class:"plan-card-price"},[(0,l.eW)(" $2500 "),(0,l.Lk)("span",{class:"plan-card-period"},"/annual")],-1)),(0,l.Lk)("button",{class:(0,e.C4)(["plan-card-btn",{"plan-card-btn--current":2500===S.userPlan}]),disabled:S.isLoading,onClick:s[1]||(s[1]=a=>x.standardBtnAction())},[S.isLoading&&2500!==S.userPlan?((0,l.uX)(),(0,l.CE)("span",L,"Redirecting...")):((0,l.uX)(),(0,l.CE)("span",m,(0,e.v_)(x.standardBtnText),1))],10,h)],2)]),s[11]||(s[11]=(0,l.Lk)("div",{class:"subscription-plans-footer"}," Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",-1))])])]),S.showPurchaseModal?((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",v,[(0,l.Lk)("button",{class:"purchase-modal-close",onClick:s[2]||(s[2]=a=>S.showPurchaseModal=!1)}," × "),(0,l.Lk)("div",g,[s[26]||(s[26]=(0,l.Lk)("div",{class:"purchase-modal-left"},[(0,l.Lk)("div",{class:"purchase-modal-title"},"Get Essential"),(0,l.Lk)("div",{class:"purchase-modal-section-label"}," Billing Information "),(0,l.Lk)("div",{class:"purchase-modal-form"},[(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("span",{class:"input-icon material-icons"},"mail"),(0,l.Lk)("input",{type:"email",placeholder:"abcd@gmail.com"})]),(0,l.Lk)("div",{class:"input-row"},[(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("span",{class:"input-icon material-icons"},"person"),(0,l.Lk)("input",{type:"text",placeholder:"First Name"})]),(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("span",{class:"input-icon material-icons"},"person"),(0,l.Lk)("input",{type:"text",placeholder:"Last Name"})])]),(0,l.Lk)("div",{class:"input-row"},[(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("select",null,[(0,l.Lk)("option",null,"Country")])]),(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("select",null,[(0,l.Lk)("option",null,"State")])])]),(0,l.Lk)("div",{class:"input-row"},[(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("input",{type:"text",placeholder:"City"})]),(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("input",{type:"text",placeholder:"Zip code"})])]),(0,l.Lk)("div",{class:"purchase-modal-section-label"},"Payment Method"),(0,l.Lk)("div",{class:"payment-method-row"},[(0,l.Lk)("label",{class:"payment-method-btn"},[(0,l.Lk)("input",{type:"radio",name:"payment",checked:""}),(0,l.Lk)("span",{class:"icon material-icons"},"credit_card"),(0,l.eW)(" Card ")]),(0,l.Lk)("label",{class:"payment-method-btn"},[(0,l.Lk)("input",{type:"radio",name:"payment"}),(0,l.Lk)("span",{class:"icon material-icons"},"account_balance_wallet"),(0,l.eW)(" Paypal ")])]),(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("input",{type:"text",placeholder:"Name on Card"})]),(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("input",{type:"text",placeholder:"0000 0000 0000 0000",maxlength:"19"})]),(0,l.Lk)("div",{class:"input-row"},[(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("input",{type:"text",placeholder:"MM/YY",maxlength:"5"})]),(0,l.Lk)("div",{class:"input-group"},[(0,l.Lk)("input",{type:"text",placeholder:"CVV",maxlength:"4"}),(0,l.Lk)("span",{class:"input-icon material-icons"},"help_outline")])])])],-1)),(0,l.Lk)("div",b,[(0,l.Lk)("div",f,[s[17]||(s[17]=(0,l.Lk)("span",null,"Plan Info",-1)),(0,l.Lk)("span",P,[s[15]||(s[15]=(0,l.eW)(" Monthly ",-1)),(0,l.Lk)("label",w,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=a=>S.isAnnually=a)},null,512),[[t.lH,S.isAnnually]]),s[14]||(s[14]=(0,l.Lk)("span",{class:"switch-slider"},null,-1))]),s[16]||(s[16]=(0,l.eW)(" Annually ",-1))])]),s[18]||(s[18]=(0,l.Lk)("div",{class:"plan-info-benefits"},[(0,l.Lk)("div",{class:"plan-info-benefits-title"}," With Essential you get "),(0,l.Lk)("ul",null,[(0,l.Lk)("li",null,[(0,l.Lk)("span",{class:"checkmark"},"✓"),(0,l.eW)(" Benefit no. 1")]),(0,l.Lk)("li",null,[(0,l.Lk)("span",{class:"checkmark"},"✓"),(0,l.eW)(" Benefit no. 2")]),(0,l.Lk)("li",null,[(0,l.Lk)("span",{class:"checkmark"},"✓"),(0,l.eW)(" Benefit no. 3")])])],-1)),s[19]||(s[19]=(0,l.Lk)("hr",{class:"plan-info-divider"},null,-1)),s[20]||(s[20]=(0,l.Lk)("input",{class:"promo-input",type:"text",placeholder:"Apply Promo Code"},null,-1)),s[21]||(s[21]=(0,l.Lk)("div",{class:"plan-info-summary"},[(0,l.Lk)("div",{class:"summary-row"},[(0,l.Lk)("span",null,"Subtotal"),(0,l.Lk)("span",null,"$2500.00/year")]),(0,l.Lk)("div",{class:"summary-row"},[(0,l.Lk)("span",null,"Yearly plan discount"),(0,l.Lk)("span",null,"-$20.00")]),(0,l.Lk)("div",{class:"summary-row"},[(0,l.Lk)("span",null,"Promo code discount"),(0,l.Lk)("span",null,"-$26.00")])],-1)),s[22]||(s[22]=(0,l.Lk)("hr",{class:"plan-info-divider"},null,-1)),s[23]||(s[23]=(0,l.Lk)("div",{class:"summary-row summary-row-total"},[(0,l.Lk)("span",null,"Billed Now"),(0,l.Lk)("span",{class:"billed-now"},"-$2454.00")],-1)),s[24]||(s[24]=(0,l.Lk)("button",{class:"btn btn-primary"},"Confirm and Pay",-1)),s[25]||(s[25]=(0,l.Lk)("div",{class:"plan-info-note"},[(0,l.eW)(" Your subscription will renew automatically every year as Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard "),(0,l.Lk)("a",{href:"#"},"Terms and Conditions"),(0,l.eW)(". ")],-1))])])])])):(0,l.Q3)("",!0)])]),_:1})}var S=n(2724),x=n(4335),B=n(3193);const A={name:"SubscriptionPlans",components:{MainLayout:S.A},data(){return{showPurchaseModal:!1,planPeriod:"annually",isAnnually:!0,isLoading:!1,stripePriceIds:{monthly:"price_1RqAOwPnfSZSgS1X7vLNRdmX",annually:"price_1RqAPlPnfSZSgS1X2zY3qP4K"},userPlan:null}},computed:{basicBtnText(){return 250===this.userPlan?"Current Plan":2500===this.userPlan?"Change Plan":"Get Started"},basicBtnAction(){return 250===this.userPlan?this.goToBillingDetails:(this.userPlan,this.startStripeCheckout.bind(this,"monthly"))},standardBtnText(){return 2500===this.userPlan?"Current Plan":250===this.userPlan?"Upgrade Plan":"Get Started"},standardBtnAction(){return 2500===this.userPlan?this.goToBillingDetails:(this.userPlan,this.startStripeCheckout.bind(this,"annually"))}},watch:{isAnnually(a){this.planPeriod=a?"annually":"monthly"}},methods:{async fetchUserPlan(){try{const a=B["default"].get("authToken"),s="http://127.0.0.1:8000",l=await x.A.get(`${s}/api/user/subscription`,{headers:{Authorization:`Bearer ${a}`}});this.userPlan=l.data.plan_amount||null;const{fetchCurrentUser:e}=await Promise.resolve().then(n.bind(n,9205)),t=await e(),i=B["default"].get("role");console.log("[Subscription] Old role:",i),t&&t.role?(console.log("[Subscription] New role from backend:",t.role),t.role!==i?(B["default"].set("role",t.role),console.log("[Subscription] Role updated in storage. Reloading page..."),window.location.reload()):console.log("[Subscription] Role unchanged, no reload needed.")):console.warn("[Subscription] Could not fetch user or user.role")}catch(a){this.userPlan=null,console.error("[Subscription] Error fetching user plan or updating role:",a)}},async startStripeCheckout(a){this.isLoading=!0;try{const s=this.stripePriceIds[a]||this.stripePriceIds.annually,n=B["default"].get("authToken"),l="http://127.0.0.1:8000",e=await x.A.post(`${l}/api/stripe/checkout-session`,{price_id:s},{headers:{Authorization:`Bearer ${n}`}});e.data&&e.data.url?window.location.href=e.data.url:alert("Could not start Stripe Checkout.")}catch(s){alert("Stripe Checkout failed.")}finally{this.isLoading=!1}},goToBillingDetails(){this.$router.push({name:"BillingDetails"})}},mounted(){this.fetchUserPlan()}};var W=n(6262);const _=(0,W.A)(A,[["render",C],["__scopeId","data-v-017d75f2"]]),I=_}}]);
//# sourceMappingURL=736.da077845.js.map