"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[893],{6690:(t,a,i)=>{i.r(a),i.d(a,{default:()=>X});var e=i(641),l=i(33);const r=i.p+"img/EditWhite.ef5bfbc1.svg",s=i.p+"img/Chart.caf3eedb.svg",o=i.p+"img/Billing Status view details.a0402902.svg",n={class:"page"},d={class:"org-detail-outer"},c={class:"org-detail-main-card"},g={class:"org-detail-main-card-header"},u={class:"org-detail-main-cols"},h={class:"org-detail-main-cols-group org-detail-main-cols-group--row"},m={class:"org-detail-col org-detail-col-left"},p={class:"org-detail-list-card org-detail-list-card--box"},k={class:"org-detail-list-row"},L={class:"org-detail-list-row"},v={class:"org-detail-list-row"},D={class:"org-detail-list-row"},b={class:"org-detail-list-row"},f={class:"org-detail-list-row"},y={class:"org-detail-col org-detail-col-right"},w={class:"org-detail-list-card org-detail-list-card--box"},_={class:"org-detail-list-row"},N={class:"org-detail-list-row"},x={class:"org-detail-list-row"},$={class:"org-detail-list-row"},A={class:"org-detail-list-row"},C={class:"org-detail-list-row"},P={class:"org-detail-main-cols-group org-detail-main-cols-group--row"},z={class:"org-detail-box org-detail-box--half org-detail-box-flex"},S={class:"org-detail-box-info"},E={class:"org-detail-box-value"},T={style:{"text-align":"left",display:"flex","justify-content":"flex-start"}},I={style:{"font-weight":"500","font-size":"16px"}},M={class:"org-detail-box-action"};function O(t,a,i,O,F,B){const U=(0,e.g2)("MainLayout");return(0,e.uX)(),(0,e.Wv)(U,{navbarTitle:F.orgDetail.org_name||"Organization Details",sidebarActive:"organization"},{default:(0,e.k6)(()=>[(0,e.Lk)("div",n,[(0,e.Lk)("div",d,[(0,e.Lk)("div",c,[(0,e.Lk)("div",g,[(0,e.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=a=>t.$router.push(`/organizations/${F.orgDetail.id}/edit`))},[...a[2]||(a[2]=[(0,e.Lk)("img",{src:r,alt:"Edit",class:"org-edit-icon"},null,-1),(0,e.eW)(" Edit Details ",-1)])])]),(0,e.Lk)("div",u,[(0,e.Lk)("div",h,[(0,e.Lk)("div",m,[a[9]||(a[9]=(0,e.Lk)("h3",{class:"org-detail-section-title"},"Organization Detail",-1)),(0,e.Lk)("div",p,[(0,e.Lk)("div",k,[a[3]||(a[3]=(0,e.Lk)("span",null,"Organization Name",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.org_name),1)]),(0,e.Lk)("div",L,[a[4]||(a[4]=(0,e.Lk)("span",null,"Organization Size",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.org_size),1)]),(0,e.Lk)("div",v,[a[5]||(a[5]=(0,e.Lk)("span",null,"Contract Start",-1)),(0,e.Lk)("b",null,(0,l.v_)(B.formatDate(F.orgDetail.contract_start)),1)]),(0,e.Lk)("div",D,[a[6]||(a[6]=(0,e.Lk)("span",null,"Contract End",-1)),(0,e.Lk)("b",null,(0,l.v_)(B.formatDate(F.orgDetail.contract_end)),1)]),(0,e.Lk)("div",b,[a[7]||(a[7]=(0,e.Lk)("span",null,"Source",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.find_us),1)]),(0,e.Lk)("div",f,[a[8]||(a[8]=(0,e.Lk)("span",null,"Address",-1)),(0,e.Lk)("b",null,[B.addressDisplay.length?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.eW)((0,l.v_)(B.addressDisplay.join(", ")),1)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.eW)("N/A")],64))])])])]),(0,e.Lk)("div",y,[a[16]||(a[16]=(0,e.Lk)("h3",{class:"org-detail-section-title"},"Admin Detail",-1)),(0,e.Lk)("div",w,[(0,e.Lk)("div",_,[a[10]||(a[10]=(0,e.Lk)("span",null,"Main Contact",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.main_contact),1)]),(0,e.Lk)("div",N,[a[11]||(a[11]=(0,e.Lk)("span",null,"Admin Email",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.admin_email),1)]),(0,e.Lk)("div",x,[a[12]||(a[12]=(0,e.Lk)("span",null,"Admin Phone",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.admin_phone||F.orgDetail.user?.phone||""),1)]),(0,e.Lk)("div",$,[a[13]||(a[13]=(0,e.Lk)("span",null,"Sales Person",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.sales_person),1)]),(0,e.Lk)("div",A,[a[14]||(a[14]=(0,e.Lk)("span",null,"Last Contacted",-1)),(0,e.Lk)("b",null,(0,l.v_)(B.formatDateTime(F.orgDetail.last_contacted)),1)]),(0,e.Lk)("div",C,[a[15]||(a[15]=(0,e.Lk)("span",null,"Certified Staff",-1)),(0,e.Lk)("b",null,(0,l.v_)(F.orgDetail.certified_staff),1)])])])]),(0,e.Lk)("div",P,[a[19]||(a[19]=(0,e.Lk)("div",{class:"org-detail-box org-detail-box--half org-detail-box-flex"},[(0,e.Lk)("div",{class:"org-detail-box-info"},[(0,e.Lk)("div",{class:"org-detail-box-label"},"Org Chart Type"),(0,e.Lk)("div",{class:"org-detail-box-value"}," Functional/Role - Based ")]),(0,e.Lk)("div",{class:"org-detail-box-action"},[(0,e.Lk)("button",{class:"org-view-btn custom-view-btn"},[(0,e.Lk)("img",{src:s,alt:"View Chart",class:"org-view-btn-icon"}),(0,e.eW)(" View Chart ")])])],-1)),(0,e.Lk)("div",z,[(0,e.Lk)("div",S,[a[17]||(a[17]=(0,e.Lk)("div",{class:"org-detail-box-label"},"Billing Status",-1)),(0,e.Lk)("div",E,[F.currentPlan?((0,e.uX)(),(0,e.CE)(e.FK,{key:0},[(0,e.Lk)("div",T,(0,l.v_)(F.currentPlan.plan_name||F.currentPlan.plan||"Plan"),1),(0,e.Lk)("div",I," $"+(0,l.v_)(B.formatAmount(F.currentPlan.amount))+"/"+(0,l.v_)(F.currentPlan.period||(F.currentPlan.amount>=1e3?"Year":"Month")),1)],64)):((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.eW)("None")],64))])]),(0,e.Lk)("div",M,[F.orgDetail&&F.orgDetail.id?((0,e.uX)(),(0,e.CE)("button",{key:0,class:"org-view-btn custom-view-btn",onClick:a[1]||(a[1]=a=>t.$router.push({name:"BillingDetails",query:{orgId:F.orgDetail.id}}))},[...a[18]||(a[18]=[(0,e.Lk)("img",{src:o,alt:"View Details",class:"org-view-btn-icon"},null,-1),(0,e.eW)(" View Details ",-1)])])):(0,e.Q3)("",!0)])])]),a[20]||(a[20]=(0,e.Lk)("div",{class:"org-detail-main-cols-group org-detail-main-cols-group--row"},[(0,e.Lk)("div",{class:"org-detail-box org-detail-box--half org-detail-box-algo org-detail-box-flex"},[(0,e.Lk)("div",{class:"org-detail-box-info"},[(0,e.Lk)("div",{class:"org-detail-box-label"},"Current Algorithm")]),(0,e.Lk)("div",{class:"org-detail-box-action org-detail-box-action-algo"},[(0,e.Lk)("select",{class:"org-algo-select"},[(0,e.Lk)("option",null,"Dolphin 1.0")]),(0,e.Lk)("button",{class:"org-algo-btn custom-view-btn"},"Assigned")])]),(0,e.Lk)("div",{class:"org-detail-box org-detail-box--half org-detail-box-empty"})],-1))])])])])]),_:1},8,["navbarTitle"])}var F=i(2724),B=i(4335),U=i(3193);const W={name:"OrganizationDetail",components:{MainLayout:F.A},data(){return{orgDetail:{},countryName:"",stateName:"",cityName:"",currentPlan:null}},computed:{addressDisplay(){const t=[],a=this.orgDetail.user&&this.orgDetail.user.userDetails?this.orgDetail.user.userDetails:this.orgDetail,i=a.address||this.orgDetail.address||"";i&&t.push(i);const e=this.orgDetail.city_name||this.cityName||a.city||this.orgDetail.city||"",l=this.orgDetail.state_name||this.stateName||a.state||this.orgDetail.state||"",r=a.zip||this.orgDetail.zip||"",s=this.orgDetail.country||this.countryName||a.country||this.orgDetail.country||"";return e&&t.push(e),l&&t.push(l),r&&t.push(r),s&&t.push(s),t.filter(t=>t&&String(t).trim().length>0)}},async mounted(){await this.fetchOrganization(),await this.lookupLocationNames(),await this.fetchOrgBillingPreview()},methods:{async fetchOrganization(){try{const a=U["default"].get("authToken"),i=a?{Authorization:`Bearer ${a}`}:{},e=this.$route.params.id||null;if(e)try{const t=await B.A.get(`http://127.0.0.1:8000/api/organizations/${e}`,{headers:i});if(t&&t.data)return void(this.orgDetail=t.data)}catch(t){}const l=this.$route.params.orgName;let r=null;try{if(r=await B.A.get("http://127.0.0.1:8000/api/organizations",{headers:i}),r.data&&Array.isArray(r.data)){const t=l?r.data.find(t=>t.org_name===l):r.data[0];if(t)return void(this.orgDetail=t)}}catch(t){}this.orgDetail=r&&r.data&&r.data.length?r.data[0]:{}}catch(t){this.orgDetail={}}},async fetchOrgBillingPreview(){try{const t="http://127.0.0.1:8000",a=U["default"].get("authToken"),i=a?{Authorization:`Bearer ${a}`}:{},e=this.orgDetail&&this.orgDetail.id?this.orgDetail.id:this.$route.params.id||null;if(!e)return;const l=await B.A.get(`${t}/api/billing/current?org_id=${e}`,{headers:i});this.currentPlan=l&&l.data?l.data:null}catch(t){this.currentPlan=null}},async lookupLocationNames(){const t="http://127.0.0.1:8000",a=this.orgDetail.user&&this.orgDetail.user.userDetails?this.orgDetail.user.userDetails:this.orgDetail,i=a.country_id||this.orgDetail.country_id||null,e=a.state_id||this.orgDetail.state_id||null,l=a.city_id||this.orgDetail.city_id||null;if(i)try{const a=await B.A.get(`${t}/api/countries/${i}`);this.countryName=a.data?.name||""}catch(r){this.countryName=""}if(e)try{const a=await B.A.get(`${t}/api/states/${e}`);this.stateName=a.data?.name||""}catch(r){this.stateName=""}if(l)try{const a=await B.A.get(`${t}/api/cities/${l}`);this.cityName=a.data?.name||""}catch(r){this.cityName=""}this.cityName||(this.cityName=a.city||this.orgDetail.city||""),this.stateName||(this.stateName=a.state||this.orgDetail.state||""),this.countryName||(this.countryName=a.country||this.orgDetail.country||"")},planLabel(t){if(!t)return"None";const a=t.plan_name||t.plan||"Plan",i=t.amount||t.plan_amount||null,e=t.period||"";return i?`${a} ($${this.formatAmount(i)}/${e||(parseFloat(i)>=1e3?"Year":"Month")})`:`${a}`},formatAmount(t){if(null===t||void 0===t||""===t)return"";const a="number"===typeof t?t:parseFloat(t);return isNaN(a)?t:a.toFixed(2)},formatDate(t){if(!t)return null;const a=String(t).match(/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2}))?)?$/);let i;if(a){const t=parseInt(a[1],10),e=parseInt(a[2],10)-1,l=parseInt(a[3],10),r=a[4]?parseInt(a[4],10):0,s=a[5]?parseInt(a[5],10):0,o=a[6]?parseInt(a[6],10):0;i=new Date(Date.UTC(t,e,l,r,s,o))}else i=new Date(t);if(isNaN(i.getTime()))return null;const e=String(i.getDate()).padStart(2,"0"),l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],r=l[i.getMonth()],s=i.getFullYear();return`${e} ${r},${s}`},formatDateTime(t){if(!t)return null;const a=String(t).match(/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2}))?)?$/);let i;if(a){const t=parseInt(a[1],10),e=parseInt(a[2],10)-1,l=parseInt(a[3],10),r=a[4]?parseInt(a[4],10):0,s=a[5]?parseInt(a[5],10):0,o=a[6]?parseInt(a[6],10):0;i=new Date(Date.UTC(t,e,l,r,s,o))}else i=new Date(t);if(isNaN(i.getTime()))return null;const e=String(i.getDate()).padStart(2,"0"),l=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],r=l[i.getMonth()],s=i.getFullYear();let o=i.getHours();const n=String(i.getMinutes()).padStart(2,"0"),d=o>=12?"PM":"AM";o%=12,o=o||12;const c=`${o}:${n} ${d}`;return`${e} ${r},${s} ${c}`}}};var J=i(6262);const V=(0,J.A)(W,[["render",O],["__scopeId","data-v-1a917dd7"]]),X=V}}]);
//# sourceMappingURL=893.7fb4d1e7.js.map