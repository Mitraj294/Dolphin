"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[223],{4223:(n,t,e)=>{e.r(t),e.d(t,{default:()=>A});var l=e(641),a=e(33);const r={class:"page"},i={class:"table-outer"},u={class:"table-card"},s={class:"billing-plan-box"},c={class:"plan-name"},o={key:0},d={key:1},p={key:2},k={class:"plan-price"},b={key:0},m={key:1},h={key:2},y={class:"plan-meta"},g={class:"plan-next"},v={class:"table-container"},L={class:"table"},P=["href"],f={width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",style:{"vertical-align":"middle","margin-right":"4px"}};function D(n,t,e,D,$,_){const E=(0,l.g2)("TableHeader"),C=(0,l.g2)("MainLayout");return(0,l.uX)(),(0,l.Wv)(C,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",r,[(0,l.Lk)("div",i,[(0,l.Lk)("div",u,[t[4]||(t[4]=(0,l.Lk)("div",{class:"billing-title"}," Billing Details (Current Subscription) ",-1)),(0,l.Lk)("div",s,[(0,l.Lk)("div",null,[(0,l.Lk)("div",c,[!$.currentPlan||2500!==Number($.currentPlan.price)&&2500!==Number($.currentPlan.amount)?!$.currentPlan||250!==Number($.currentPlan.price)&&250!==Number($.currentPlan.amount)?((0,l.uX)(),(0,l.CE)("span",p,(0,a.v_)($.currentPlan?.name||""),1)):((0,l.uX)(),(0,l.CE)("span",d,"Basic")):((0,l.uX)(),(0,l.CE)("span",o,"Standard"))]),(0,l.Lk)("div",k,[!$.currentPlan||2500!==Number($.currentPlan.price)&&2500!==Number($.currentPlan.amount)?!$.currentPlan||250!==Number($.currentPlan.price)&&250!==Number($.currentPlan.amount)?((0,l.uX)(),(0,l.CE)("span",h,(0,a.v_)($.currentPlan?.price?`$${$.currentPlan.price}`:$.currentPlan?.amount?`$${$.currentPlan.amount}`:""),1)):((0,l.uX)(),(0,l.CE)("span",m,"$250/Month")):((0,l.uX)(),(0,l.CE)("span",b,"$2500/Annual"))])]),(0,l.Lk)("div",y,[(0,l.Lk)("div",null,[t[0]||(t[0]=(0,l.eW)(" Subscription Start : ",-1)),(0,l.Lk)("b",null,(0,a.v_)($.currentPlan?.start?_.formatDate($.currentPlan.start):""),1)]),(0,l.Lk)("div",null,[t[1]||(t[1]=(0,l.eW)(" Subscription End : ",-1)),(0,l.Lk)("b",null,(0,a.v_)($.currentPlan?.end?_.formatDate($.currentPlan.end):""),1)]),(0,l.Lk)("div",g," (Next bill on "+(0,a.v_)($.currentPlan?.nextBill?_.formatDate($.currentPlan.nextBill):"")+") ",1)])]),t[5]||(t[5]=(0,l.Lk)("div",{class:"billing-title"},"Billing History",-1)),(0,l.Lk)("div",v,[(0,l.Lk)("table",L,[(0,l.bF)(E,{columns:[{label:"Payment Method",key:"paymentMethod"},{label:"Payment Date",key:"paymentDate"},{label:"Subscription End",key:"subscriptionEnd"},{label:"Amount",key:"amount"},{label:"Download",key:"invoice"},{label:"Description",key:"description"}]}),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)($.billingHistory,(n,e)=>((0,l.uX)(),(0,l.CE)("tr",{key:e},[(0,l.Lk)("td",null,(0,a.v_)(n.paymentMethod),1),(0,l.Lk)("td",null,(0,a.v_)(n.paymentDate?_.formatDate(n.paymentDate):""),1),(0,l.Lk)("td",null,(0,a.v_)(n.subscriptionEnd?_.formatDate(n.subscriptionEnd):""),1),(0,l.Lk)("td",null,(0,a.v_)(n.amount?`$${n.amount}`:""),1),(0,l.Lk)("td",null,[n.pdfUrl?((0,l.uX)(),(0,l.CE)("a",{key:0,href:n.pdfUrl,class:"receipt-link",target:"_blank",rel:"noopener",style:{"margin-left":"8px"}},[((0,l.uX)(),(0,l.CE)("svg",f,[...t[2]||(t[2]=[(0,l.Lk)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"#0074c2","stroke-width":"2"},null,-1),(0,l.Lk)("path",{d:"M7 7h10M7 11h10M7 15h6",stroke:"#0074c2","stroke-width":"2"},null,-1)])])),t[3]||(t[3]=(0,l.eW)(" View Receipt ",-1))],8,P)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",null,(0,a.v_)(n.description),1)]))),128))])])])])])])]),_:1})}var $=e(2724),_=e(8406),E=e(4335),C=e(3193);const w="http://127.0.0.1:8000",N={name:"BillingDetails",components:{MainLayout:$.A,TableHeader:_.A},data(){return{currentPlan:null,billingHistory:[]}},methods:{async fetchBillingDetails(){try{const n=C["default"].get("authToken"),t={};n&&(t["Authorization"]=`Bearer ${n}`);const e=this.$route.query.orgId||null,l=e?`${w}/api/billing/current?org_id=${e}`:`${w}/api/billing/current`,a=await E.A.get(l,{headers:t});this.currentPlan=a.data||null;const r=e?`${w}/api/billing/history?org_id=${e}`:`${w}/api/billing/history`,i=await E.A.get(r,{headers:t});this.billingHistory=Array.isArray(i.data)?i.data:[]}catch(n){this.currentPlan=null,this.billingHistory=[]}},formatDate(n){if(!n)return"";const t=new Date(n);return isNaN(t)?"":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},mounted(){this.fetchBillingDetails()}};var X=e(6262);const x=(0,X.A)(N,[["render",D],["__scopeId","data-v-7163472a"]]),A=x}}]);
//# sourceMappingURL=223.257b3b08.js.map