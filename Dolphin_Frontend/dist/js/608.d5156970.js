"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[608],{3608:(t,a,e)=>{e.r(a),e.d(a,{default:()=>F});var i=e(641),s=e(33);const l={class:"lead-detail-outer"},r={class:"lead-detail-main-card"},o={class:"lead-detail-main-card-header"},n={class:"lead-detail-main-cols"},d={class:"lead-detail-main-cols-group lead-detail-main-cols-group--row"},c={class:"lead-detail-col lead-detail-col-left"},u={class:"lead-detail-list-card lead-detail-list-card--box"},h={class:"lead-detail-list-row"},g={class:"lead-detail-list-row"},y={class:"lead-detail-list-row"},L={class:"lead-detail-list-row"},p={class:"lead-detail-list-row"},D={class:"lead-detail-col lead-detail-col-right"},k={class:"lead-detail-list-card lead-detail-list-card--box"},m={class:"lead-detail-list-row"},_={class:"lead-detail-list-row"},z={class:"lead-detail-list-row"},v={class:"lead-detail-list-row"},$={class:"lead-detail-list-row"},f={class:"lead-detail-list-row"},N={class:"lead-detail-list-row"},C={class:"lead-detail-list-row"},w={class:"lead-detail-list-row"},b={class:"lead-detail-list-row"};function q(t,a,e,q,A,U){const E=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(E,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",l,[(0,i.Lk)("div",r,[(0,i.Lk)("div",o,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:a[0]||(a[0]=(...t)=>U.goToEditLead&&U.goToEditLead(...t))}," Edit Details ")]),(0,i.Lk)("div",n,[(0,i.Lk)("div",d,[(0,i.Lk)("div",c,[a[7]||(a[7]=(0,i.Lk)("h3",{class:"lead-detail-section-title"},"Lead Detail",-1)),(0,i.Lk)("div",u,[(0,i.Lk)("div",h,[a[1]||(a[1]=(0,i.Lk)("span",null,"Main Contact",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.leadData.contact),1)]),(0,i.Lk)("div",g,[a[2]||(a[2]=(0,i.Lk)("span",null,"Admin Email",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.leadData.email),1)]),(0,i.Lk)("div",y,[a[3]||(a[3]=(0,i.Lk)("span",null,"Admin Phone",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.leadData.phone),1)]),a[6]||(a[6]=(0,i.Lk)("div",{class:"lead-detail-list-row"},[(0,i.Lk)("span",null,"Sales Person"),(0,i.Lk)("b")],-1)),(0,i.Lk)("div",L,[a[4]||(a[4]=(0,i.Lk)("span",null,"Source",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.leadData.source),1)]),(0,i.Lk)("div",p,[a[5]||(a[5]=(0,i.Lk)("span",null,"Status",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.leadData.status),1)])])]),(0,i.Lk)("div",D,[a[18]||(a[18]=(0,i.Lk)("h3",{class:"lead-detail-section-title"},"Organization Detail",-1)),(0,i.Lk)("div",k,[A.organizationChecked&&A.isOrganizationCreated?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.Lk)("div",m,[a[8]||(a[8]=(0,i.Lk)("span",null,"Organization Name",-1)),(0,i.Lk)("b",null,(0,s.v_)(A.orgData.name||A.orgData.org_name||U.leadData.organization),1)]),(0,i.Lk)("div",_,[a[9]||(a[9]=(0,i.Lk)("span",null,"Organization Size",-1)),(0,i.Lk)("b",null,(0,s.v_)(A.orgData.size||A.orgData.org_size||U.leadData.size),1)]),(0,i.Lk)("div",z,[a[10]||(a[10]=(0,i.Lk)("span",null,"Contract Start",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.formatContractDate(A.orgData?.contract_start||A.orgData?.contract_start_date||U.leadData.contract_start)||"N/A"),1)]),(0,i.Lk)("div",v,[a[11]||(a[11]=(0,i.Lk)("span",null,"Contract End",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.formatContractDate(A.orgData?.contract_end||A.orgData?.contract_end_date||U.leadData.contract_end)||"N/A"),1)]),(0,i.Lk)("div",$,[a[12]||(a[12]=(0,i.Lk)("span",null,"Address",-1)),(0,i.Lk)("b",null,[A.orgData&&(A.orgData.address||A.orgData.city||A.orgData.state||A.orgData.zip||A.orgData.country)||U.addressDisplay.length?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,s.v_)(A.orgData&&(A.orgData.address||A.orgData.city||A.orgData.state||A.orgData.zip||A.orgData.country)?[A.orgData.address,A.orgData.city,A.orgData.state,A.orgData.zip,A.orgData.country].filter(Boolean).join(", "):U.addressDisplay.join(", ")),1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)("N/A")],64))])])],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.Lk)("div",f,[a[13]||(a[13]=(0,i.Lk)("span",null,"Organization Name",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.leadData.organization),1)]),(0,i.Lk)("div",N,[a[14]||(a[14]=(0,i.Lk)("span",null,"Organization Size",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.leadData.size),1)]),(0,i.Lk)("div",C,[a[15]||(a[15]=(0,i.Lk)("span",null,"Contract Start",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.formatContractDate(U.leadData.contract_start)||"N/A"),1)]),(0,i.Lk)("div",w,[a[16]||(a[16]=(0,i.Lk)("span",null,"Contract End",-1)),(0,i.Lk)("b",null,(0,s.v_)(U.formatContractDate(U.leadData.contract_end)||"N/A"),1)]),(0,i.Lk)("div",b,[a[17]||(a[17]=(0,i.Lk)("span",null,"Address",-1)),(0,i.Lk)("b",null,[U.addressDisplay.length?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,s.v_)(U.addressDisplay.join(", ")),1)],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)("N/A")],64))])])],64))])])])])])])]),_:1})}var A=e(2724),U=e(4335);const E={name:"LeadDetail",components:{MainLayout:A.A},props:{lead:{type:Object,default:()=>({contact:"",email:"",phone:"",source:"",status:"",organization:"",size:"",address:"",city:"",state:"",zip:"",country:"",country_id:null,state_id:null,city_id:null})}},data(){return{localLead:{...this.lead},countryName:"",stateName:"",cityName:"",orgData:null,orgUser:null,orgUserDetails:null,isOrganizationCreated:!1,organizationChecked:!1}},computed:{leadData(){return this.localLead},addressDisplay(){const t=[];return this.leadData.address&&t.push(this.leadData.address),this.cityName&&t.push(this.cityName),this.stateName&&t.push(this.stateName),this.leadData.zip&&t.push(this.leadData.zip),this.countryName&&t.push(this.countryName),t.filter(t=>t&&String(t).trim().length>0)},primaryUserDisplay(){if(this.orgUser&&(this.orgUser.name||this.orgUser.full_name))return this.orgUser.name||this.orgUser.full_name;if(this.orgUserDetails&&(this.orgUserDetails.first_name||this.orgUserDetails.last_name)){const t=this.orgUserDetails.first_name||"",a=this.orgUserDetails.last_name||"",e=(t+" "+a).trim();if(e)return e}return this.leadData&&this.leadData.contact?this.leadData.contact:"N/A"}},methods:{goToEditLead(){const t=this.$route.params.id||this.$route.query.id||this.leadData.id||"";t&&this.$router.push({name:"EditLead",params:{id:t}})},formatContractDate(t){if(!t)return null;const a=new Date(t);if(isNaN(a.getTime()))return null;const e=String(a.getDate()).padStart(2,"0"),i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],s=i[a.getMonth()],l=a.getFullYear();return`${e} ${s} ,${l}`},async lookupLocationNames(){const t="http://127.0.0.1:8000";if(this.leadData.country_id)try{const a=await U.A.get(`${t}/api/countries/${this.leadData.country_id}`);this.countryName=a.data?.name||""}catch(a){this.countryName=""}else this.countryName=this.leadData.country||"";if(this.leadData.state_id)try{const a=await U.A.get(`${t}/api/states/${this.leadData.state_id}`);this.stateName=a.data?.name||""}catch(a){this.stateName=""}else this.stateName=this.leadData.state||"";if(this.leadData.city_id)try{const a=await U.A.get(`${t}/api/cities/${this.leadData.city_id}`);this.cityName=a.data?.name||""}catch(a){this.cityName=""}else this.cityName=this.leadData.city||""},async fetchOrganizationIfExists(){this.organizationChecked=!1,this.orgData=null,this.orgUser=null,this.orgUserDetails=null,this.isOrganizationCreated=!1;const t=this.localLead.organization_id||this.localLead.org_id||this.localLead.organizationId||null,a=this.localLead.user_id||this.localLead.userId||this.localLead.owner_id||null;if(!t)return this.isOrganizationCreated=!1,void(this.organizationChecked=!0);try{const s="http://127.0.0.1:8000",l=e(3193)["default"],r=l.get("authToken"),o=r?{Authorization:`Bearer ${r}`}:{},n=await U.A.get(`${s}/api/organizations/${t}`,{headers:o});if(this.orgData=n.data||null,this.isOrganizationCreated=!!this.orgData,a){try{const t=await U.A.get(`${s}/api/users/${a}`,{headers:o});this.orgUser=t.data||null}catch(i){this.orgUser=null}try{const t=await U.A.get(`${s}/api/user-details/${a}`,{headers:o});this.orgUserDetails=t.data||null}catch(i){this.orgUserDetails=null}}}catch(i){this.orgData=null,this.isOrganizationCreated=!1}finally{this.organizationChecked=!0}}},async created(){const t=this.$route.params.id||this.$route.query.id||this.lead.id;if(t)try{const i="http://127.0.0.1:8000",s=e(3193)["default"],l=s.get("authToken"),r=await U.A.get(`${i}/api/leads/${t}`,{headers:{Authorization:`Bearer ${l}`}}),o=r.data||null;if(o){const e=o.lead?o.lead:o;this.localLead={contact:(e.first_name||"")+(e.last_name?" "+e.last_name:""),email:e.email||"",phone:e.phone||"",source:e.find_us||"",status:e.status||"",organization:e.org_name||"",size:e.org_size||"",address:void 0!==e.address?e.address:"",city:void 0!==e.city?e.city:"",state:void 0!==e.state?e.state:"",zip:void 0!==e.zip?e.zip:"",country:void 0!==e.country?e.country:"",country_id:e.country_id||null,state_id:e.state_id||null,city_id:e.city_id||null,id:e.id||null,first_name:e.first_name||"",last_name:e.last_name||""},o.organization&&(this.orgData=o.organization,this.orgUser=o.orgUser||null,this.orgUserDetails=o.orgUserDetails||null,this.isOrganizationCreated=!0,this.organizationChecked=!0),["address","city","state","zip","country"].forEach(t=>{void 0===this.localLead[t]&&(this.localLead[t]="")}),await this.lookupLocationNames(),this.isOrganizationCreated||await this.fetchOrganizationIfExists();try{this.$route&&this.$route.query&&Object.keys(this.$route.query).length&&this.$router.replace({name:"LeadDetail",params:{id:t}})}catch(a){}return}}catch(a){}this.$route&&this.$route.query&&Object.keys(this.$route.query).length&&(this.localLead={contact:this.$route.query.contact||"",email:this.$route.query.email||"",phone:this.$route.query.phone||"",source:this.$route.query.source||"",status:this.$route.query.status||"",organization:this.$route.query.organization||"",size:this.$route.query.size||"",address:void 0!==this.$route.query.address?this.$route.query.address:"",city:void 0!==this.$route.query.city?this.$route.query.city:"",state:void 0!==this.$route.query.state?this.$route.query.state:"",zip:void 0!==this.$route.query.zip?this.$route.query.zip:"",country:void 0!==this.$route.query.country?this.$route.query.country:"",country_id:this.$route.query.country_id||null,state_id:this.$route.query.state_id||null,city_id:this.$route.query.city_id||null},["address","city","state","zip","country"].forEach(t=>{void 0===this.localLead[t]&&(this.localLead[t]="")}),await this.lookupLocationNames(),await this.fetchOrganizationIfExists())},watch:{"$route.query":{handler(t){t&&Object.keys(t).length&&(this.localLead={contact:t.contact||"",email:t.email||"",phone:t.phone||"",source:t.source||"",status:t.status||"",organization:t.organization||"",size:t.size||"",address:void 0!==t.address?t.address:"",city:void 0!==t.city?t.city:"",state:void 0!==t.state?t.state:"",zip:void 0!==t.zip?t.zip:"",country:void 0!==t.country?t.country:"",country_id:t.country_id||null,state_id:t.state_id||null,city_id:t.city_id||null},["address","city","state","zip","country"].forEach(t=>{void 0===this.localLead[t]&&(this.localLead[t]="")}),this.lookupLocationNames(),this.fetchOrganizationIfExists())},deep:!0},lead:{handler(t){this.localLead={...t},this.lookupLocationNames(),this.fetchOrganizationIfExists()},deep:!0}}};var O=e(6262);const S=(0,O.A)(E,[["render",q],["__scopeId","data-v-dd908566"]]),F=S}}]);
//# sourceMappingURL=608.d5156970.js.map