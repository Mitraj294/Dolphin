"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[369],{1728:(e,r,a)=>{e.exports=a.p+"img/Add.1f261cbb.svg"},4742:(e,r,a)=>{a.r(r),a.d(r,{default:()=>ke});var t=a(641);const s={class:"page"},o={class:"table-outer"},l={class:"table-card"};function i(e,r,a,i,n,d){const m=(0,t.g2)("OrgActionButtons"),p=(0,t.g2)("MemberTable"),u=(0,t.g2)("Pagination"),c=(0,t.g2)("GroupDetails"),h=(0,t.g2)("MainLayout");return(0,t.uX)(),(0,t.Wv)(h,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",s,[(0,t.Lk)("div",o,[(0,t.Lk)("div",l,[(0,t.bF)(m,{onShowAddGroup:r[0]||(r[0]=r=>e.showAddGroupModal=!0),onShowAddMember:r[1]||(r[1]=r=>e.showAddMemberModal=!0)}),(0,t.bF)(p,{groups:d.paginatedGroups,onViewGroup:d.viewGroup},null,8,["groups","onViewGroup"])]),(0,t.bF)(u,{pageSize:n.pageSize,pageSizes:n.pageSizes,showPageDropdown:n.showPageDropdown,currentPage:n.currentPage,totalPages:d.totalPages,onTogglePageDropdown:d.togglePageDropdown,onSelectPageSize:d.selectPageSize,onGoToPage:d.goToPage},null,8,["pageSize","pageSizes","showPageDropdown","currentPage","totalPages","onTogglePageDropdown","onSelectPageSize","onGoToPage"]),(0,t.bF)(c,{visible:n.showGroupModal,groupId:n.selectedGroup?n.selectedGroup.id:null,onClose:d.closeGroupModal,onViewMember:r[2]||(r[2]=e=>{this.$emit("view-member",e)})},null,8,["visible","groupId","onClose"])])])]),_:1})}var n=a(4631),d=a(33),m=a(9586);const p={class:""},u={class:""},c={class:"table-container"},h={class:"table"},g=["onClick"],b={key:0};function w(e,r,a,s,o,l){const i=(0,t.g2)("TableHeader");return(0,t.uX)(),(0,t.CE)("div",p,[(0,t.Lk)("div",u,[r[2]||(r[2]=(0,t.Lk)("div",{class:"table-header-bar"},null,-1)),(0,t.Lk)("div",c,[(0,t.Lk)("table",h,[(0,t.bF)(i,{columns:[{label:"Group Name",key:"name",minWidth:"200px"},{label:"Actions",key:"action",minWidth:"200px"}]}),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(a.groups,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,d.v_)(e.name),1),(0,t.Lk)("td",null,[(0,t.Lk)("button",{class:"btn-view",onClick:r=>l.viewGroup(e)},[...r[0]||(r[0]=[(0,t.Lk)("img",{src:m,alt:"View",class:"btn-view-icon"},null,-1),(0,t.Lk)("span",{class:"view-label"},"View",-1)])],8,g)])]))),128)),0===a.groups.length?((0,t.uX)(),(0,t.CE)("tr",b,[...r[1]||(r[1]=[(0,t.Lk)("td",{colspan:"2",class:"no-data"}," No groups found. ",-1)])])):(0,t.Q3)("",!0)])])])])])}var f=a(5629);const v={name:"MemberTable",components:{TableHeader:f.A},props:{groups:{type:Array,default:()=>[]}},methods:{viewGroup(e){this.$emit("view-group",e)}}};var y=a(6262);const k=(0,y.A)(v,[["render",w]]),M=k;var A=a(3751),L=a(1728);const G={class:"table-header-bar"},_={class:"my-org-action-buttons"},x={class:"modal-card",style:{"max-width":"900px"}},F={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},S={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},z={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},P={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},C={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},W={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},$={class:"modal-form-actions"},N={class:"modal-card",style:{"max-width":"900px"}},D={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},E={class:"modal-form-row-div",style:{flex:"1","min-width":"0"}},V={class:"modal-form-actions"};function I(e,r,a,s,o,l){const i=(0,t.g2)("FormLabel"),n=(0,t.g2)("FormInput"),m=(0,t.g2)("FormRow"),p=(0,t.g2)("MultiSelectDropdown");return(0,t.uX)(),(0,t.CE)("div",G,[(0,t.Lk)("div",_,[(0,t.Lk)("button",{class:"my-org-secondary",onClick:r[0]||(r[0]=r=>e.$router.push({name:"MemberListing"}))}," Members Listing "),(0,t.Lk)("button",{class:"my-org-primary",onClick:r[1]||(r[1]=(...e)=>l.openAddGroupModal&&l.openAddGroupModal(...e))},[...r[19]||(r[19]=[(0,t.Lk)("img",{src:L,alt:"Add",style:{width:"18px",height:"18px","margin-right":"6px","vertical-align":"middle"}},null,-1),(0,t.eW)(" Add New Group ",-1)])]),(0,t.Lk)("button",{class:"my-org-primary",onClick:r[2]||(r[2]=(...e)=>l.openAddMemberModal&&l.openAddMemberModal(...e))},[...r[20]||(r[20]=[(0,t.Lk)("img",{src:L,alt:"Add",style:{width:"18px",height:"18px","margin-right":"6px","vertical-align":"middle"}},null,-1),(0,t.eW)(" Add New Member ",-1)])])]),o.showAddMemberModal?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"modal-overlay",onClick:r[12]||(r[12]=(0,A.D$)(e=>o.showAddMemberModal=!1,["self"]))},[(0,t.Lk)("div",x,[(0,t.Lk)("button",{class:"modal-close-btn",onClick:r[3]||(r[3]=e=>o.showAddMemberModal=!1)}," × "),r[28]||(r[28]=(0,t.Lk)("div",{class:"modal-title"},"Add New Member",-1)),r[29]||(r[29]=(0,t.Lk)("div",{class:"modal-desc",style:{"font-size":"1.2rem !important","margin-bottom":"32px !important"}}," Add a new member to your organization. ",-1)),(0,t.Lk)("form",{class:"modal-form",onSubmit:r[11]||(r[11]=(0,A.D$)((...e)=>l.saveMember&&l.saveMember(...e),["prevent"]))},[(0,t.bF)(m,{class:"modal-form-row",style:{"margin-bottom":"0 !important",display:"flex",gap:"18px","align-items":"flex-start","flex-direction":"row"}},{default:(0,t.k6)(()=>[(0,t.Lk)("div",F,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[21]||(r[21]=[(0,t.eW)("First Name",-1)])]),_:1}),(0,t.bF)(n,{modelValue:o.newMember.firstName,"onUpdate:modelValue":r[4]||(r[4]=e=>o.newMember.firstName=e),icon:"fas fa-user",type:"text",placeholder:"Enter first name",required:""},null,8,["modelValue"]),o.errors.first_name?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"error-message1"},{default:(0,t.k6)(()=>[(0,t.eW)((0,d.v_)(o.errors.first_name[0]),1)]),_:1})):(0,t.Q3)("",!0)]),(0,t.Lk)("div",S,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[22]||(r[22]=[(0,t.eW)("Last Name",-1)])]),_:1}),(0,t.bF)(n,{modelValue:o.newMember.lastName,"onUpdate:modelValue":r[5]||(r[5]=e=>o.newMember.lastName=e),icon:"fas fa-user",type:"text",placeholder:"Enter last name",required:""},null,8,["modelValue"]),o.errors.last_name?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"error-message1"},{default:(0,t.k6)(()=>[(0,t.eW)((0,d.v_)(o.errors.last_name[0]),1)]),_:1})):(0,t.Q3)("",!0)])]),_:1}),(0,t.bF)(m,{class:"modal-form-row",style:{"margin-bottom":"0 !important",display:"flex",gap:"18px","align-items":"flex-start","flex-direction":"row"}},{default:(0,t.k6)(()=>[(0,t.Lk)("div",z,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[23]||(r[23]=[(0,t.eW)("Email",-1)])]),_:1}),(0,t.bF)(n,{modelValue:o.newMember.email,"onUpdate:modelValue":r[6]||(r[6]=e=>o.newMember.email=e),icon:"fas fa-envelope",type:"email",placeholder:"Enter email address",required:""},null,8,["modelValue"]),o.errors.email?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"error-message1"},{default:(0,t.k6)(()=>[(0,t.eW)((0,d.v_)(o.errors.email[0]),1)]),_:1})):(0,t.Q3)("",!0)]),(0,t.Lk)("div",P,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[24]||(r[24]=[(0,t.eW)("Phone",-1)])]),_:1}),(0,t.bF)(n,{modelValue:o.newMember.phone,"onUpdate:modelValue":r[7]||(r[7]=e=>o.newMember.phone=e),icon:"fas fa-phone",type:"text",placeholder:"Enter phone number",required:""},null,8,["modelValue"]),o.errors.phone?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"error-message1"},{default:(0,t.k6)(()=>[(0,t.eW)((0,d.v_)(o.errors.phone[0]),1)]),_:1})):(0,t.Q3)("",!0)])]),_:1}),(0,t.bF)(m,{class:"modal-form-row",style:{"margin-bottom":"0 !important",display:"flex",gap:"18px","align-items":"flex-start","flex-direction":"row"}},{default:(0,t.k6)(()=>[(0,t.Lk)("div",C,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[25]||(r[25]=[(0,t.eW)("Role",-1)])]),_:1}),(0,t.bF)(p,{options:o.roles,selectedItems:Array.isArray(o.newMember.roles)?o.newMember.roles:[],"onUpdate:selectedItems":r[8]||(r[8]=e=>o.newMember.roles=e),placeholder:"Select role",enableSelectAll:!0},null,8,["options","selectedItems"]),o.errors.member_role?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"error-message1"},{default:(0,t.k6)(()=>[(0,t.eW)((0,d.v_)(o.errors.member_role[0]),1)]),_:1})):(0,t.Q3)("",!0)]),(0,t.Lk)("div",W,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[26]||(r[26]=[(0,t.eW)("Groups",-1)])]),_:1}),(0,t.bF)(p,{options:o.groups,selectedItems:Array.isArray(o.newMember.groups)?o.newMember.groups:[],"onUpdate:selectedItems":r[9]||(r[9]=e=>o.newMember.groups=e),placeholder:"Select groups",enableSelectAll:!0},null,8,["options","selectedItems"])])]),_:1}),(0,t.Lk)("div",$,[r[27]||(r[27]=(0,t.Lk)("button",{type:"submit",class:"btn btn-primary"},[(0,t.Lk)("i",{class:"fas fa-save"}),(0,t.eW)(" Save ")],-1)),(0,t.Lk)("button",{type:"button",class:"org-edit-cancel",onClick:r[10]||(r[10]=e=>o.showAddMemberModal=!1)}," Cancel ")])],32)])])):(0,t.Q3)("",!0),o.showAddGroupModal?((0,t.uX)(),(0,t.CE)("div",{key:1,class:"modal-overlay",onClick:r[18]||(r[18]=(0,A.D$)(e=>o.showAddGroupModal=!1,["self"]))},[(0,t.Lk)("div",N,[(0,t.Lk)("button",{class:"modal-close-btn",onClick:r[13]||(r[13]=e=>o.showAddGroupModal=!1)}," × "),r[33]||(r[33]=(0,t.Lk)("div",{class:"modal-title"},"Add New Group",-1)),r[34]||(r[34]=(0,t.Lk)("div",{class:"modal-desc",style:{"font-size":"1.2rem !important","margin-bottom":"32px !important"}}," Create a new group for your organization. ",-1)),(0,t.Lk)("form",{class:"modal-form",onSubmit:r[17]||(r[17]=(0,A.D$)((...e)=>l.saveGroup&&l.saveGroup(...e),["prevent"]))},[(0,t.bF)(m,{class:"modal-form-row",style:{"margin-bottom":"0 !important",display:"flex",gap:"18px","align-items":"flex-start","flex-direction":"row"}},{default:(0,t.k6)(()=>[(0,t.Lk)("div",D,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[30]||(r[30]=[(0,t.eW)("Group Name",-1)])]),_:1}),(0,t.bF)(n,{modelValue:o.newGroup.name,"onUpdate:modelValue":r[14]||(r[14]=e=>o.newGroup.name=e),icon:"fas fa-users",type:"text",placeholder:"Enter group name",required:""},null,8,["modelValue"]),o.errors.name?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"error-message1"},{default:(0,t.k6)(()=>[(0,t.eW)((0,d.v_)(o.errors.name[0]),1)]),_:1})):(0,t.Q3)("",!0)]),(0,t.Lk)("div",E,[(0,t.bF)(i,{style:{"font-size":"1rem !important",margin:"0 0 6px 0 !important"}},{default:(0,t.k6)(()=>[...r[31]||(r[31]=[(0,t.eW)("Members",-1)])]),_:1}),(0,t.bF)(p,{options:o.availableMembers,selectedItems:Array.isArray(o.newGroup.members)?o.newGroup.members:[],"onUpdate:selectedItems":r[15]||(r[15]=e=>o.newGroup.members=e),placeholder:"Select members",enableSelectAll:!0},null,8,["options","selectedItems"]),o.errors.member_ids?((0,t.uX)(),(0,t.Wv)(i,{key:0,class:"error-message1"},{default:(0,t.k6)(()=>[(0,t.eW)((0,d.v_)(o.errors.member_ids[0]),1)]),_:1})):(0,t.Q3)("",!0)])]),_:1}),(0,t.Lk)("div",V,[r[32]||(r[32]=(0,t.Lk)("button",{type:"submit",class:"btn btn-primary"},[(0,t.Lk)("i",{class:"fas fa-save"}),(0,t.eW)(" Save ")],-1)),(0,t.Lk)("button",{type:"button",class:"org-edit-cancel",onClick:r[16]||(r[16]=e=>o.showAddGroupModal=!1)}," Cancel ")])],32)])])):(0,t.Q3)("",!0)])}var T=a(5298),X=a(2124),B=a(4117),Q=a(7420),U=a(4335),q=a(3193),R=a(3413),H=a(3080);const O={name:"OrgActionButtons",components:{FormInput:T.A,FormLabel:X.A,MultiSelectDropdown:B.A,FormRow:Q.A,Toast:R.A},data(){return{showAddMemberModal:!1,showAddGroupModal:!1,newMember:{firstName:"",lastName:"",email:"",phone:"",roles:[],groups:[]},newGroup:{name:"",members:[]},roles:[],groups:[],availableMembers:[],toast:null,errors:{}}},async mounted(){this.toast=(0,H.d)(),await this.loadRoles()},methods:{async loadRoles(){try{const e=q["default"].get("authToken"),r="http://127.0.0.1:8000",a=await U.A.get(`${r}/api/member-roles`,{headers:{Authorization:`Bearer ${e}`}});Array.isArray(a.data)&&(this.roles=a.data.map(e=>({id:e.id,name:e.name})))}catch(e){console.error("Failed to fetch roles:",e),this.roles=[]}},async openAddMemberModal(){try{const e=q["default"].get("authToken"),r="http://127.0.0.1:8000",a=await U.A.get(`${r}/api/groups`,{headers:{Authorization:`Bearer ${e}`}});this.groups=Array.isArray(a.data)?a.data:[]}catch(e){console.error("Failed to fetch groups:",e),this.groups=[]}this.errors={},this.showAddMemberModal=!0},openAddGroupModal(){this.availableMembers=[];const e=q["default"].get("authToken"),r="http://127.0.0.1:8000";U.A.get(`${r}/api/members`,{headers:{Authorization:`Bearer ${e}`}}).then(e=>{const r=e.data.data||e.data;Array.isArray(r)?this.availableMembers=r.map(e=>({...e,id:e.id||e.value||e,name:`${e.first_name||e.firstName||""} ${e.last_name||e.lastName||""}`.trim()})):this.availableMembers=[]}).catch(()=>{this.availableMembers=[]}).finally(()=>{this.errors={},this.showAddGroupModal=!0})},async saveMember(){try{if(!Array.isArray(this.newMember.roles)||0===this.newMember.roles.length)return void this.toast.add({severity:"warn",summary:"Warning",detail:"Please select a role for the member.",life:4e3});const e={first_name:this.newMember.firstName,last_name:this.newMember.lastName,email:this.newMember.email,phone:this.newMember.phone,member_role:Array.isArray(this.newMember.roles)?this.newMember.roles.map(e=>e.id||e.value||e):[],group_ids:Array.isArray(this.newMember.groups)?this.newMember.groups.map(e=>e.id||e.value||e):[]},r=q["default"].get("authToken"),a={};r&&(a["Authorization"]=`Bearer ${r}`),await U.A.post("http://127.0.0.1:8000/api/members",e,{headers:a}),this.errors={},this.showAddMemberModal=!1,this.groups=[],this.newMember={firstName:"",lastName:"",email:"",phone:"",roles:[],groups:[]},this.toast.add({severity:"success",summary:"Success",detail:"Member added successfully!",life:3e3}),this.$emit("member-added")}catch(e){if(e.response&&422===e.response.status&&e.response.data&&e.response.data.errors)return this.errors=e.response.data.errors,void this.toast.add({severity:"error",summary:"Validation Error",detail:"Please fix the errors below and try again.",life:3e3});let r="Failed to add member.";e.response&&e.response.data&&e.response.data.message?r=e.response.data.message:e.response&&e.response.data&&"string"===typeof e.response.data?r=e.response.data:console.error(e),this.toast.add({severity:"error",summary:"Error",detail:r,life:4e3}),this.showAddMemberModal=!1,this.groups=[],this.newMember={firstName:"",lastName:"",email:"",phone:"",roles:[],groups:[]}}},async saveGroup(){try{const e={name:this.newGroup.name,member_ids:Array.isArray(this.newGroup.members)?this.newGroup.members.map(e=>e.id||e.value||e):[]},r=q["default"].get("authToken"),a={};r&&(a["Authorization"]=`Bearer ${r}`),await U.A.post("http://127.0.0.1:8000/api/groups",e,{headers:a}),this.errors={},this.showAddGroupModal=!1,this.availableMembers=[],this.newGroup={name:"",members:[]},this.toast.add({severity:"success",summary:"Success",detail:"Group added successfully!",life:3e3}),this.$emit("group-added")}catch(e){if(e.response&&422===e.response.status&&e.response.data&&e.response.data.errors)return this.errors=e.response.data.errors,void this.toast.add({severity:"error",summary:"Validation Error",detail:"Please fix the errors below and try again.",life:3e3});let r="Failed to add group.";e.response&&e.response.data&&e.response.data.message?r=e.response.data.message:e.response&&e.response.data&&"string"===typeof e.response.data?r=e.response.data:console.error("Failed to add group:",e),this.toast.add({severity:"error",summary:"Error",detail:r,life:4e3}),this.showAddGroupModal=!1,this.availableMembers=[],this.newGroup={name:"",members:[]}}}}},J=(0,y.A)(O,[["render",I],["__scopeId","data-v-1c6691ba"]]),j=J;var K=a(733);const Y={class:"modal-card",style:{"max-width":"900px",width:"90%"}},Z={class:"group-details"},ee={class:"group-header-row"},re={class:"group-info",style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},ae={class:"group-value"},te={class:"meta-item",style:{"text-align":"right"}},se={class:"meta-value"},oe={class:"group-meta"},le={class:"meta-item"},ie={class:"meta-value"},ne={class:"group-section"},de={key:0,class:"no-data"},me={key:1,class:"detail-row"},pe={class:"detail-table",style:{width:"100% !important","max-width":"800px !important",margin:"0 !important"}},ue={class:"recipient-table-wrap"},ce={class:"recipient-table compact"},he=["onClick"];function ge(e,r,a,s,o,l){const i=(0,t.g2)("TableHeader");return a.visible?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"modal-overlay",onClick:r[1]||(r[1]=(0,A.D$)(r=>e.$emit("close"),["self"]))},[(0,t.Lk)("div",Y,[(0,t.Lk)("button",{class:"modal-close-btn",onClick:r[0]||(r[0]=r=>e.$emit("close"))}," × "),r[6]||(r[6]=(0,t.Lk)("div",{class:"modal-title"},"Group Details",-1)),r[7]||(r[7]=(0,t.Lk)("div",{class:"modal-desc"},"Details for the selected group.",-1)),(0,t.Lk)("div",Z,[(0,t.Lk)("div",ee,[(0,t.Lk)("div",re,[(0,t.Lk)("div",ae,(0,d.v_)(o.group?o.group.name:"—"),1),(0,t.Lk)("div",te,[r[2]||(r[2]=(0,t.Lk)("div",{class:"meta-label"},"Created",-1)),(0,t.Lk)("div",se,(0,d.v_)(o.group?l.formatDate(o.group.created_at):"—"),1)])]),(0,t.Lk)("div",oe,[(0,t.Lk)("div",le,[r[3]||(r[3]=(0,t.Lk)("div",{class:"meta-label"},"Members",-1)),(0,t.Lk)("div",ie,(0,d.v_)(o.members.length),1)])])]),(0,t.Lk)("div",ne,[r[5]||(r[5]=(0,t.Lk)("h4",{class:"section-title"},"Members",-1)),0===o.members.length?((0,t.uX)(),(0,t.CE)("div",de," No members found for this group. ")):((0,t.uX)(),(0,t.CE)("div",me,[(0,t.Lk)("div",pe,[(0,t.Lk)("div",ue,[(0,t.Lk)("table",ce,[(0,t.bF)(i,{columns:[{label:"Name",key:"name",minWidth:"200px"},{label:"Email",key:"email",minWidth:"200px"},{label:"Role",key:"role",minWidth:"200px"},{label:"Actions",key:"actions",minWidth:"200px"}]}),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(o.members,(a,s)=>((0,t.uX)(),(0,t.CE)("tr",{key:a.id},[(0,t.Lk)("td",null,(0,d.v_)(a.first_name||a.last_name?((a.first_name||"")+" "+(a.last_name||"")).trim():a.email||"Unknown"),1),(0,t.Lk)("td",null,(0,d.v_)(a.email||""),1),(0,t.Lk)("td",null,(0,d.v_)(Array.isArray(a.member_roles)&&a.member_roles.length?a.member_roles.map(e=>e.name||e).join(", "):""),1),(0,t.Lk)("td",null,[(0,t.Lk)("button",{class:"btn-view",onClick:r=>e.$router.push({path:"/my-organization/members",query:{member_id:a.id}})},[...r[4]||(r[4]=[(0,t.Lk)("img",{src:m,alt:"View",class:"btn-view-icon"},null,-1),(0,t.eW)(" View ",-1)])],8,he)])]))),128))])])])])]))])])])])):(0,t.Q3)("",!0)}const be={name:"GroupDetails",components:{TableHeader:f.A},props:{visible:{type:Boolean,required:!0},groupId:{type:[Number,String],required:!1,default:null}},data(){return{group:null,members:[]}},watch:{visible(e){e&&this.fetchGroup()},groupId(){this.visible&&this.fetchGroup()}},methods:{async fetchGroup(){if(!this.groupId)return this.group=null,void(this.members=[]);try{const e=q["default"].get("authToken"),r={};e&&(r["Authorization"]=`Bearer ${e}`);const a="http://127.0.0.1:8000",t=await U.A.get(`${a}/api/groups/${this.groupId}`,{headers:r}),s=t&&t.data?t.data:null;this.group=s&&s.group?s.group:s,this.members=s&&s.members?s.members:[]}catch(e){console.error("Error fetching group details:",e),this.group=null,this.members=[]}},formatDate(e){if(!e)return"—";try{const r=new Date(e);if(isNaN(r.getTime()))return e;const a=r.getDate(),t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],s=t[r.getMonth()],o=r.getFullYear();let l=r.getHours();const i=String(r.getMinutes()).padStart(2,"0"),n=l>=12?"PM":"AM";return l%=12,0===l&&(l=12),`${a} ${s},${o} ${l}:${i} ${n}`}catch(r){return console.warn("Error formatting date:",r),e}}}},we=(0,y.A)(be,[["render",ge],["__scopeId","data-v-235f5d14"]]),fe=we,ve={name:"MyOrganization",components:{MainLayout:n.A,MemberTable:M,OrgActionButtons:j,Pagination:K.A,GroupDetails:fe},data(){return{groups:[],members:[],showGroupModal:!1,selectedGroup:null,pageSize:10,pageSizes:[10,25,100],currentPage:1,showPageDropdown:!1}},computed:{totalPages(){return Math.ceil(this.groups.length/this.pageSize)||1},paginatedGroups(){const e=(this.currentPage-1)*this.pageSize;return this.groups.slice(e,e+this.pageSize)},membersForSelectedGroup(){if(!this.selectedGroup)return[];const e=this.selectedGroup.id;return this.members.filter(r=>r.group_id===e||r.groupId===e||r.group===e)}},methods:{async loadGroups(){const e=q["default"].get("authToken"),r={};e&&(r["Authorization"]=`Bearer ${e}`);try{const e=await U.A.get("http://127.0.0.1:8000/api/groups",{headers:r});this.groups=e.data}catch(a){console.error(a),this.groups=[]}},async loadMembers(){const e=q["default"].get("authToken"),r={};e&&(r["Authorization"]=`Bearer ${e}`);try{const e=await U.A.get("http://127.0.0.1:8000/api/members",{headers:r});this.members=e.data}catch(a){console.error("Failed to load members:",a),this.members=[]}},togglePageDropdown(){this.showPageDropdown=!this.showPageDropdown},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},viewGroup(e){this.selectedGroup=e||null,this.showGroupModal=!!e},closeGroupModal(){this.showGroupModal=!1,this.selectedGroup=null}},mounted(){this.loadGroups(),this.loadMembers()}},ye=(0,y.A)(ve,[["render",i],["__scopeId","data-v-1b86ff6f"]]),ke=ye},9586:(e,r,a)=>{e.exports=a.p+"img/Notes.d9b82ed3.svg"}}]);
//# sourceMappingURL=369.826530af.js.map