{"version":3,"file":"js/30.b4907280.js","mappings":"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","sources":["webpack://dolphin/./src/components/layout/Pagination.vue","webpack://dolphin/./src/components/layout/Pagination.vue?3f26","webpack://dolphin/./src/components/Common/GetNotifications.vue","webpack://dolphin/./src/components/Common/GetNotifications.vue?eeb7"],"sourcesContent":["<template>\n  <footer class=\"footer-box\">\n    <div class=\"footer-controls split-footer-controls\">\n      <div class=\"notifications-page-size-dropdown\">\n        <button\n          class=\"notifications-page-size-btn\"\n          @click=\"$emit('togglePageDropdown')\"\n          ref=\"pageSizeBtn\"\n        >\n          {{ pageSize }}/page\n          <img\n            src=\"@/assets/images/VectorDown.svg\"\n            class=\"notifications-page-size-arrow\"\n            alt=\"Dropdown\"\n          />\n        </button>\n        <div\n          v-if=\"showPageDropdown\"\n          class=\"notifications-page-size-menu\"\n          ref=\"pageSizeMenu\"\n        >\n          <div\n            v-for=\"size in pageSizes\"\n            :key=\"size\"\n            class=\"notifications-page-size-option\"\n            :class=\"{ selected: pageSize === size }\"\n            @click=\"$emit('selectPageSize', size)\"\n          >\n            {{ size }}/page\n          </div>\n        </div>\n      </div>\n      <div class=\"notifications-pagination\">\n        <button\n          class=\"notifications-pagination-btn prev\"\n          :disabled=\"currentPage === 1\"\n          @click=\"$emit('goToPage', currentPage - 1)\"\n        >\n          <img\n            src=\"@/assets/images/VectorLeft.svg\"\n            alt=\"Previous\"\n            class=\"pagination-btn-icon\"\n          />\n          <span class=\"pagination-btn-text prev-text\">Previous</span>\n        </button>\n        <template v-for=\"pageItem in computedPaginationPages\">\n          <button\n            v-if=\"pageItem !== '...'\"\n            :key=\"pageItem + '-page'\"\n            :class=\"[\n              'notifications-pagination-page',\n              { selected: pageItem === currentPage },\n            ]\"\n            @click=\"$emit('goToPage', pageItem)\"\n          >\n            {{ pageItem }}\n          </button>\n          <span\n            v-else\n            :key=\"'ellipsis-' + Math.random()\"\n            class=\"notifications-pagination-page\"\n            >...</span\n          >\n        </template>\n        <button\n          class=\"notifications-pagination-btn next\"\n          :disabled=\"currentPage === totalPages\"\n          @click=\"$emit('goToPage', currentPage + 1)\"\n        >\n          <span class=\"pagination-btn-text next-text\">Next</span>\n          <img\n            src=\"@/assets/images/VectorRight.svg\"\n            alt=\"Next\"\n            class=\"pagination-btn-icon\"\n          />\n        </button>\n      </div>\n    </div>\n  </footer>\n</template>\n\n<script>\nimport '@/assets/global.css';\nexport default {\n  name: 'Pagination',\n  props: {\n    withPagination: {\n      type: Boolean,\n      default: false,\n    },\n    pageSize: Number,\n    pageSizes: Array,\n    showPageDropdown: Boolean,\n    currentPage: Number,\n    totalPages: {\n      type: Number,\n      default: 10,\n    },\n    paginationPages: Array,\n  },\n  computed: {\n    computedPaginationPages() {\n      const total = this.totalPages || 10;\n      const current = this.currentPage || 1;\n      if (total <= 7) {\n        return Array.from({ length: total }, (_, i) => i + 1);\n      }\n      if (current <= 3) {\n        return [1, 2, 3, 4, '...', total - 1, total];\n      }\n      if (current === 4) {\n        return [1, 3, 4, 5, '...', total - 1, total];\n      }\n      if (current === 5) {\n        return [1, 4, 5, 6, '...', total - 1, total];\n      }\n      if (current === 6) {\n        return [1, 5, 6, 7, '...', total - 1, total];\n      }\n      if (current === 7) {\n        return [1, 2, '...', 6, 7, 8, total, total - 1].filter(\n          (v, i, arr) => arr.indexOf(v) === i\n        );\n      }\n      if (current === total - 2) {\n        return [1, 2, '...', total - 3, total - 2, total - 1, total];\n      }\n      if (current === total - 1) {\n        return [1, 2, '...', total - 2, total - 1, total];\n      }\n      if (current === total) {\n        return [1, 2, '...', total - 2, total - 1, total];\n      }\n      return [\n        1,\n        2,\n        '...',\n        current - 1,\n        current,\n        current + 1,\n        '...',\n        total - 1,\n        total,\n      ].filter((v, i, arr) => arr.indexOf(v) === i);\n    },\n  },\n  mounted() {\n    document.addEventListener('mousedown', this.handleClickOutside);\n  },\n  beforeUnmount() {\n    document.removeEventListener('mousedown', this.handleClickOutside);\n  },\n  methods: {\n    handleClickOutside(e) {\n      if (!this.showPageDropdown) return;\n      const menu = this.$refs.pageSizeMenu;\n      const btn = this.$refs.pageSizeBtn;\n      if (menu && !menu.contains(e.target) && btn && !btn.contains(e.target)) {\n        this.$emit('togglePageDropdown');\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.footer-box {\n  width: 100%;\n  background: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0 0 18px 18px;\n  box-sizing: border-box;\n  padding: 0;\n  position: sticky;\n  bottom: 0;\n  left: 0;\n  min-height: 64px;\n  box-shadow: none;\n  overflow: visible !important;\n  margin: 0;\n  z-index: 5;\n}\n.footer-controls {\n  width: 100%;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0;\n  padding: 0 24px;\n  box-sizing: border-box;\n  overflow-x: visible !important;\n}\n.split-footer-controls {\n  justify-content: space-between;\n}\n.notifications-page-size-dropdown {\n  display: flex;\n  align-items: flex-start;\n  position: relative;\n}\n.notifications-page-size-btn {\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 0 14px;\n  font-size: 13px;\n  color: #222;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  height: 32px;\n  min-width: 70px;\n  box-sizing: border-box;\n  position: relative;\n  z-index: 2;\n}\n.notifications-page-size-arrow {\n  width: 13px;\n  height: 13px;\n  margin-left: 4px;\n}\n.notifications-page-size-menu {\n  left: 50% !important;\n  transform: translateX(-50%);\n  min-width: 100px !important;\n  width: auto !important;\n  max-width: 90vw;\n  position: absolute;\n  top: 100%;\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 10px;\n  box-shadow: 0 2px 8px rgba(33, 150, 243, 0.08);\n  z-index: 3;\n  display: flex;\n  flex-direction: column;\n  padding: 4px 0;\n  margin-top: 4px;\n}\n.notifications-page-size-option {\n  padding: 7px 14px;\n  font-size: 12px;\n  color: #222;\n  cursor: pointer;\n  transition: background 0.18s;\n  border-radius: 7px;\n}\n.notifications-page-size-option.selected,\n.notifications-page-size-option:hover {\n  background: #f0f8ff;\n  color: #0074c2;\n}\n.notifications-pagination {\n  display: flex;\n  align-items: center;\n  background: #fff;\n  border: 1px solid #e0e0e0;\n  border-radius: 16px;\n  padding: 0;\n  box-sizing: border-box;\n  margin-left: auto;\n  margin-right: 0;\n  width: auto;\n  max-width: 100%;\n  overflow-x: auto;\n  white-space: nowrap;\n}\n.notifications-pagination > * {\n  display: inline-block;\n}\n.notifications-pagination::-webkit-scrollbar {\n  display: none;\n}\n.notifications-pagination-btn {\n  border: none;\n  background: #fff;\n  font-size: 13px;\n  color: #222;\n  padding: 0 14px;\n  height: 32px;\n  min-width: 90px; /* Ensures all pagination buttons have a minimum width */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  border-right: 1px solid #e0e0e0;\n}\n.notifications-pagination-btn.prev,\n.notifications-pagination-btn.next {\n  width: 100px; /* Fixed width for both buttons */\n  min-width: 100px;\n  padding-left: 0;\n  padding-right: 0;\n  justify-content: center;\n}\n.notifications-pagination-btn.prev img {\n  margin-right: 8px;\n  margin-left: 0;\n}\n.notifications-pagination-btn.next img {\n  margin-left: 8px;\n  margin-right: 0;\n}\n.notifications-pagination-btn:first-child {\n  border-top-left-radius: 16px;\n  border-bottom-left-radius: 16px;\n}\n.notifications-pagination-btn:last-child {\n  border-top-right-radius: 16px;\n  border-bottom-right-radius: 16px;\n  border-right: none;\n}\n.notifications-pagination-btn[disabled] {\n  color: #888;\n  background: #fff;\n  cursor: default;\n}\n/* Add left border to the first pagination page after prev button */\n.notifications-pagination-page {\n  border: none;\n  background: #fff;\n  font-size: 13px;\n  color: #222;\n  padding: 0 14px;\n  height: 32px;\n  min-width: 32px;\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  transition: background 0.15s;\n  border-right: 1px solid #e0e0e0;\n  border-left: 1px solid #e0e0e0;\n  border-radius: 0;\n  font-family: inherit;\n  font-weight: 400;\n  margin: 0;\n  box-sizing: border-box;\n  flex-shrink: 0;\n  white-space: nowrap;\n}\n/* Remove left border for the very first page if it's the first child (to avoid double border if needed) */\n.notifications-pagination > .notifications-pagination-page:first-of-type {\n  border-left: none;\n}\n.notifications-pagination-btn.prev img {\n  margin-right: 8px;\n  margin-left: 0;\n}\n.notifications-pagination-btn.next img {\n  margin-left: 8px;\n  margin-right: 0;\n}\n.notifications-pagination-btn:first-child {\n  border-top-left-radius: 16px;\n  border-bottom-left-radius: 16px;\n}\n.notifications-pagination-btn:last-child {\n  border-top-right-radius: 16px;\n  border-bottom-right-radius: 16px;\n  border-right: none;\n}\n.notifications-pagination-btn[disabled] {\n  color: #888;\n  background: #fff;\n  cursor: default;\n}\n.notifications-pagination-page.selected {\n  background: #f5f5f5;\n  font-weight: 600;\n  color: #222;\n}\n.notifications-pagination-page:last-child {\n  border-right: none;\n}\n.notifications-pagination-ellipsis {\n  padding: 0 14px;\n  color: #888;\n  font-size: 13px;\n  display: flex;\n  align-items: center;\n  background: #fff;\n  border-right: 1px solid #e0e0e0;\n  height: 32px;\n  box-sizing: border-box;\n}\n.pagination-btn-text {\n  display: inline-flex;\n  align-items: center;\n  height: 32px;\n  line-height: 32px;\n  font-size: 13px;\n}\n@media (max-width: 900px) {\n  .footer-box {\n    margin: 12px;\n    overflow: visible !important;\n  }\n  .footer-controls,\n  .footer-controls-flex {\n    display: flex !important;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 16px;\n    padding: 0 8px;\n    overflow-x: visible !important;\n  }\n  .notifications-page-size-dropdown,\n  .center-footer-logo-block,\n  .notifications-pagination {\n    align-self: center;\n    justify-content: center;\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n  }\n  .footer-logo-vertical.responsive-footer-logo {\n    width: 22px;\n    height: 22px;\n  }\n  .footer-text-vertical {\n    font-size: 12px;\n  }\n  .center-footer-logo-block {\n    margin: 8px 0 0 0;\n  }\n  .notifications-pagination {\n    flex-wrap: nowrap;\n    max-width: 100%;\n    min-width: 0;\n    overflow-x: auto;\n    white-space: nowrap;\n    width: auto;\n    margin-left: auto;\n    margin-right: auto;\n    justify-content: center;\n  }\n  .notifications-pagination > * {\n    display: inline-block;\n  }\n  .notifications-pagination-btn {\n    height: 32px;\n    min-height: 32px;\n    max-height: 32px;\n    font-size: 13px;\n    gap: 4px;\n    align-items: center;\n    justify-content: center;\n    /* Remove any margin-top from img to keep icon vertically centered */\n  }\n  .pagination-btn-text {\n    height: 32px;\n    line-height: 32px;\n    font-size: 13px;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n  }\n  .notifications-pagination-btn img {\n    height: 18px;\n    width: 18px;\n    object-fit: contain;\n    display: inline-block;\n    margin-top: 0; /* Ensure icon is vertically centered */\n    vertical-align: middle;\n  }\n}\n@media (max-width: 600px) {\n  .notifications-page-size-menu {\n    left: 50% !important;\n    transform: translateX(-50%);\n    min-width: 100px !important;\n    width: auto !important;\n    max-width: 90vw;\n  }\n  .notifications-pagination {\n    flex-wrap: nowrap;\n    max-width: 100vw;\n    min-width: 0;\n    overflow-x: auto;\n    white-space: nowrap;\n    width: auto;\n    margin-left: auto;\n    margin-right: auto;\n    justify-content: center;\n  }\n  .notifications-pagination-btn.prev .prev-text,\n  .notifications-pagination-btn.next .next-text {\n    display: none;\n  }\n  .notifications-pagination-btn.prev,\n  .notifications-pagination-btn.next {\n    width: 40px;\n    min-width: 40px;\n    padding: 0;\n    justify-content: center;\n  }\n  .pagination-btn-icon {\n    height: 18px;\n    width: 18px;\n    display: inline-block;\n    margin: 0 auto;\n  }\n}\n</style>\n","import { render } from \"./Pagination.vue?vue&type=template&id=63376d46&scoped=true\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport \"./Pagination.vue?vue&type=style&index=0&id=63376d46&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-63376d46\"]])\n\nexport default __exports__","<template>\n  <MainLayout>\n    <div class=\"page\">\n      <div class=\"notifications-table-outer\">\n        <div class=\"notifications-table-card\">\n          <div class=\"notifications-controls\">\n            <div class=\"notifications-date-wrapper\">\n              <input\n                type=\"date\"\n                placeholder=\"Select Date\"\n                class=\"notifications-date\"\n                v-model=\"selectedDate\"\n                @change=\"onDateChange\"\n              />\n              <button\n                v-if=\"selectedDate\"\n                class=\"mark-all\"\n                style=\"margin-left: 8px; height: 36px\"\n                @click=\"clearDate\"\n              >\n                Clear\n              </button>\n            </div>\n            <div class=\"notifications-tabs\">\n              <button\n                :class=\"[\n                  'notifications-tab-btn-left',\n                  { active: tab === 'unread' },\n                ]\"\n                @click=\"switchTab('unread')\"\n              >\n                Unread\n              </button>\n              <button\n                :class=\"[\n                  'notifications-tab-btn-right',\n                  { active: tab === 'all' },\n                ]\"\n                @click=\"switchTab('all')\"\n              >\n                All\n              </button>\n            </div>\n            <button\n              v-if=\"tab === 'unread' && notifications.length > 0\"\n              class=\"mark-all\"\n              :disabled=\"markAllLoading\"\n              @click=\"markAllAsRead\"\n              style=\"\n                margin-top: 10px;\n                background: #fff;\n                color: #0164a5;\n                border: none;\n                border-radius: 6px;\n                padding: 4px 10px;\n                font-size: 0.95rem;\n                cursor: pointer;\n              \"\n            >\n              <i\n                class=\"fas fa-check\"\n                style=\"margin-right: 6px\"\n              ></i>\n              <span v-if=\"!markAllLoading\">Mark All As Read</span>\n              <span v-else>Marking...</span>\n            </button>\n          </div>\n          <div class=\"notifications-list\">\n            <div\n              v-for=\"(item, id) in paginatedNotifications\"\n              :key=\"id\"\n              class=\"notification-item\"\n            >\n              <div\n                class=\"notification-meta\"\n                style=\"\n                  display: flex;\n                  flex-direction: column;\n                  align-items: center;\n                \"\n              >\n                <img\n                  src=\"@/assets/images/Logo.svg\"\n                  class=\"notification-icon\"\n                  alt=\"Company logo\"\n                />\n              </div>\n              <div class=\"notification-body\">\n                <span class=\"notification-date\">{{ item.date }}</span>\n                <span class=\"notification-text\">\n                  <span class=\"notification-title\">Dolphin.</span>\n                  {{ item.body }}\n                </span>\n              </div>\n              <div\n                class=\"notification-meta\"\n                style=\"\n                  display: flex;\n                  flex-direction: column;\n                  align-items: center;\n                \"\n              >\n                <button\n                  v-if=\"tab === 'unread' && !item.read_at\"\n                  class=\"mark-all\"\n                  @click=\"markAsRead(item.id)\"\n                  style=\"\n                    margin-top: 10px;\n                    background: #fff;\n                    color: #0164a5;\n                    border: none;\n                    border-radius: 6px;\n                    padding: 4px 10px;\n                    font-size: 0.95rem;\n                    cursor: pointer;\n                  \"\n                >\n                  <i class=\"fas fa-check\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div\n              v-if=\"paginatedNotifications.length === 0\"\n              class=\"no-data\"\n            >\n              <span v-if=\"tab === 'unread'\"\n                >No unread notifications found.</span\n              >\n              <span v-else>No notification found.</span>\n            </div>\n          </div>\n        </div>\n        <Pagination\n          :pageSize=\"pageSize\"\n          :pageSizes=\"[5, 10, 20]\"\n          :currentPage=\"page\"\n          :totalPages=\"totalPages\"\n          :isNotifications=\"true\"\n          :showPageDropdown=\"showPageDropdown\"\n          @goToPage=\"goToPage\"\n          @selectPageSize=\"selectPageSize\"\n          @togglePageDropdown=\"togglePageDropdown\"\n        />\n      </div>\n    </div>\n  </MainLayout>\n</template>\n\n<script>\nimport MainLayout from '@/components/layout/MainLayout.vue';\nimport Pagination from '@/components/layout/Pagination.vue';\nimport storage from '@/services/storage';\nimport authMiddleware from '@/middleware/authMiddleware';\nimport axios from 'axios';\nimport { ref } from 'vue';\n\nconst date = ref();\nexport default {\n  name: 'GetNotification',\n  components: { Pagination, MainLayout },\n  data() {\n    return {\n      tab: 'unread',\n      page: 1,\n      pageSize: 10,\n      showPageDropdown: false,\n      notifications: [],\n      readNotifications: [],\n      selectedDate: '',\n      markAllLoading: false,\n    };\n  },\n  computed: {\n    totalPages() {\n      return Math.ceil(this.filteredNotifications.length / this.pageSize) || 1;\n    },\n    paginatedNotifications() {\n      const start = (this.page - 1) * this.pageSize;\n      return this.filteredNotifications.slice(start, start + this.pageSize);\n    },\n    filteredNotifications() {\n      // base list depending on tab\n      let list = [];\n      if (this.tab === 'unread') {\n        list = this.notifications.slice();\n      } else if (this.tab === 'all') {\n        list = [...this.notifications, ...this.readNotifications];\n      } else {\n        list = this.notifications.slice();\n      }\n\n      // if a date is selected, filter by created_at date (YYYY-MM-DD)\n      if (this.selectedDate) {\n        const sel = this.selectedDate;\n        list = list.filter((n) => {\n          // try multiple places for created timestamp\n          const createdAt =\n            n.created_at ||\n            (n._rawData && (n._rawData.created_at || n._rawData.createdAt)) ||\n            '';\n          if (!createdAt) return false;\n          const d = new Date(createdAt);\n          if (isNaN(d)) return false;\n          const yyyy = d.getFullYear();\n          const mm = String(d.getMonth() + 1).padStart(2, '0');\n          const dd = String(d.getDate()).padStart(2, '0');\n          return `${yyyy}-${mm}-${dd}` === sel;\n        });\n      }\n\n      return list;\n    },\n  },\n  methods: {\n    async switchTab(newTab) {\n      // Only fetch if switching to a different tab\n      if (this.tab !== newTab) {\n        this.tab = newTab;\n        this.page = 1; // Reset to first page when switching tabs\n        await this.fetchNotifications();\n      }\n    },\n    async fetchNotifications() {\n      try {\n        const config = this._getAuthHeaders();\n        const endpoint = this._getNotificationEndpoint();\n        const response = await this._fetchDataWithFallback(endpoint, config);\n        const notificationsArr = this._extractNotifications(response);\n\n        const storedUserId = storage.get('userId') || storage.get('user_id');\n        const currentUserId = storedUserId ? parseInt(storedUserId, 10) : 0;\n\n        const mapped = notificationsArr\n          .filter((n) => this._isNotificationForUser(n, currentUserId))\n          .map((n) => this._normalizeNotification(n));\n\n        this.notifications = mapped.filter((m) => !m.read_at);\n        this.readNotifications = mapped.filter((m) => !!m.read_at);\n      } catch (error) {\n        this._handleFetchError(error);\n      }\n    },\n\n    _getAuthHeaders() {\n      let token = storage.get('authToken');\n      if (token && typeof token === 'object' && token.token) {\n        token = token.token;\n      }\n      if (typeof token !== 'string') {\n        return {};\n      }\n      return token ? { headers: { Authorization: `Bearer ${token}` } } : {};\n    },\n\n    _getNotificationEndpoint() {\n      if (this.tab === 'unread') {\n        return '/api/notifications/unread';\n      }\n      const role = authMiddleware.getRole();\n      if (role === 'superadmin') {\n        const storedUserIdParam =\n          storage.get('userId') || storage.get('user_id');\n        const uid = storedUserIdParam ? parseInt(storedUserIdParam, 10) : 0;\n        if (uid) {\n          return `/api/notifications?notifiable_type=${encodeURIComponent(\n            'App\\\\Models\\\\User'\n          )}&notifiable_id=${uid}`;\n        }\n        return '/api/notifications';\n      }\n      return '/api/notifications/user';\n    },\n\n    async _fetchDataWithFallback(endpoint, config) {\n      try {\n        return await axios.get(endpoint, config);\n      } catch (err) {\n        if (err.response && err.response.status === 403 && this.tab === 'all') {\n          return axios.get('/api/notifications/user', config);\n        }\n        throw err;\n      }\n    },\n\n    _extractNotifications(response) {\n      if (!response || !response.data) return [];\n      if (Array.isArray(response.data)) return response.data;\n      if (Array.isArray(response.data.notifications))\n        return response.data.notifications;\n      if (Array.isArray(response.data.unread)) return response.data.unread;\n      console.warn('Unexpected notifications response format:', response.data);\n      return [];\n    },\n\n    _isNotificationForUser(n, currentUserId) {\n      if (!currentUserId) return true;\n      if (parseInt(n.notifiable_id, 10) === currentUserId) return true;\n      if (!n.data) return false;\n      try {\n        const d = typeof n.data === 'string' ? JSON.parse(n.data) : n.data;\n        return (\n          (d.user_id && parseInt(d.user_id, 10) === currentUserId) ||\n          (d.userId && parseInt(d.userId, 10) === currentUserId) ||\n          (d.recipient_id && parseInt(d.recipient_id, 10) === currentUserId)\n        );\n      } catch (e) {\n        console.error('Error parsing notification data:', e);\n        return false;\n      }\n    },\n\n    _normalizeNotification(n) {\n      let d = n.data;\n      if (typeof d === 'string') {\n        try {\n          d = JSON.parse(d);\n        } catch (e) {\n          console.error('Error parsing notification data:', e);\n        }\n      }\n\n      const bodyKeys = [\n        'body',\n        'message',\n        'text',\n        'details',\n        'description',\n        'content',\n        'msg',\n      ];\n      let bodyDisplay = this._pickString(d, bodyKeys) || n.body || '';\n\n      if (!bodyDisplay && d && typeof d === 'object') {\n        bodyDisplay =\n          this._pickString(d, ['user_message', 'notification', 'payload']) ||\n          (Object.keys(d).length ? JSON.stringify(d) : '');\n      }\n\n      return {\n        id: n.id,\n        created_at: n.created_at,\n        date: n.created_at ? this.formatDate(n.created_at) : '',\n        body: bodyDisplay,\n        read_at: n.read_at,\n        _rawData: d,\n      };\n    },\n\n    _pickString(obj, keys) {\n      if (!obj) return '';\n      for (const k of keys) {\n        if (Object.hasOwn(obj, k)) {\n          const v = obj[k];\n          if (typeof v === 'string' && v.trim()) return v.trim();\n          if (typeof v === 'number') return String(v);\n          if (v && typeof v === 'object' && v.message) return String(v.message);\n        }\n      }\n      return '';\n    },\n\n    _handleFetchError(error) {\n      this.notifications = [];\n      this.readNotifications = [];\n      console.error(\n        'Failed to fetch notifications:',\n        error,\n        error?.response?.data\n      );\n      const serverMsg =\n        error?.response?.data?.message || error?.response?.data?.error || null;\n      this.$nextTick(() => {\n        this.$notify?.({\n          type: 'error',\n          message: serverMsg || 'Failed to fetch notifications.',\n        });\n      });\n    },\n    onDateChange() {\n      // reset to first page when date filter changes\n      this.page = 1;\n      // If needed, you could fetch fresh data from server for the date here.\n      // For now, we filter client-side using already fetched notifications.\n    },\n    clearDate() {\n      this.selectedDate = '';\n      this.page = 1;\n    },\n    formatDate(dateStr) {\n      // Format MySQL datetime to 'MMM DD, YYYY at hh:mm A'\n      const d = new Date(dateStr);\n      if (isNaN(d)) return dateStr;\n      const options = {\n        month: 'short',\n        day: '2-digit',\n        year: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit',\n        hour12: true,\n      };\n      return d\n        .toLocaleString('en-US', options)\n        .replace(',', '')\n        .replace(/(\\d{2}:\\d{2}) (AM|PM)/, 'at $1 $2');\n    },\n    async markAllAsRead() {\n      try {\n        let token = storage.get('authToken');\n        if (token && typeof token === 'object' && token.token) {\n          token = token.token;\n        }\n        if (typeof token !== 'string') {\n          token = '';\n        }\n        const config = token\n          ? { headers: { Authorization: `Bearer ${token}` } }\n          : {};\n        await axios.post('/api/notifications/mark-all-read', {}, config);\n        // Refresh notifications\n        await this.fetchNotifications();\n        // Ensure badge updates immediately: update internal count and notify navbar\n        try {\n          this.updateNotificationCount();\n        } catch (e) {\n          console.error('Error updating notification count:', e);\n        }\n        // Broadcast events for in-window and cross-tab listeners\n        window.dispatchEvent(new Event('notification-updated'));\n        window.dispatchEvent(new Event('storage'));\n      } catch (error) {\n        console.error('Error marking all as read:', error);\n        this.$notify &&\n          this.$notify({\n            type: 'error',\n            message: 'Failed to mark all notifications as read.',\n          });\n      }\n    },\n    async markAsRead(id) {\n      const notif = this.paginatedNotifications.find((n) => n.id === id);\n      let token = storage.get('authToken');\n      if (token && typeof token === 'object' && token.token) {\n        token = token.token;\n      }\n      if (typeof token !== 'string') {\n        token = '';\n      }\n      const config = token\n        ? { headers: { Authorization: `Bearer ${token}` } }\n        : {};\n      if (notif && notif.id) {\n        try {\n          await axios.post(`/api/announcements/${notif.id}/read`, {}, config);\n          await this.fetchNotifications();\n          // Ensure badge updates immediately: update internal count and notify navbar\n          try {\n            this.updateNotificationCount();\n          } catch (e) {\n            console.error('Error updating notification count:', e);\n          }\n          window.dispatchEvent(new Event('notification-updated'));\n          window.dispatchEvent(new Event('storage'));\n        } catch (error) {\n          console.error('Failed to mark notification as read:', error);\n          this.$notify &&\n            this.$notify({\n              type: 'error',\n              message: 'Failed to mark notification as read.',\n            });\n        }\n      }\n    },\n    prevPage() {\n      if (this.page > 1) this.page--;\n    },\n    nextPage() {\n      if (this.page < this.totalPages) this.page++;\n    },\n    goToPage(n) {\n      if (n >= 1 && n <= this.totalPages) this.page = n;\n    },\n    selectPageSize(size) {\n      this.pageSize = size;\n      this.page = 1;\n      this.showPageDropdown = false;\n    },\n    togglePageDropdown() {\n      this.showPageDropdown = !this.showPageDropdown;\n    },\n    // single authoritative method for updating stored notification count\n    updateNotificationCount() {\n      storage.set('notificationCount', this.notifications.length);\n      // Broadcast a storage event for cross-tab listeners\n      window.dispatchEvent(new Event('storage'));\n      // Broadcast a domain event for in-window subscribers (Navbar)\n      window.dispatchEvent(new Event('notification-updated'));\n    },\n    markAllRead() {\n      this.readNotifications = [\n        ...this.readNotifications,\n        ...this.notifications,\n      ];\n      this.notifications = [];\n      this.updateNotificationCount();\n    },\n  },\n  watch: {\n    notifications: {\n      handler() {\n        this.updateNotificationCount();\n      },\n      deep: true,\n      immediate: true,\n    },\n    readNotifications: {\n      handler() {\n        this.updateNotificationCount();\n      },\n      deep: true,\n    },\n  },\n  mounted() {\n    // Fetch notifications only when arriving at notifications page or after login\n    if (\n      storage.get('showDashboardWelcome') ||\n      this.$route.name === 'GetNotification' ||\n      this.$route.name === 'Notifications'\n    ) {\n      this.fetchNotifications();\n      storage.remove('showDashboardWelcome');\n    }\n  },\n};\n</script>\n\n<style scoped>\n/* --- Layout and spacing to match Leads/OrganizationTable --- */\n.notifications-table-outer {\n  width: 100%;\n  min-width: 260px;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  box-sizing: border-box;\n}\n.notifications-table-card {\n  width: 100%;\n  background: #fff;\n  border-radius: 24px;\n  border: 1px solid #ebebeb;\n  box-shadow: 0 2px 16px 0 rgba(33, 150, 243, 0.04);\n  overflow: visible;\n\n  box-sizing: border-box;\n  min-width: 0;\n\n  display: flex;\n  flex-direction: column;\n  gap: 0;\n  position: relative;\n  padding: 0;\n}\n.notifications-controls {\n  display: flex;\n  align-items: center;\n  gap: 24px;\n  margin-bottom: 24px;\n  padding: 24px 24px 0 24px;\n  background: #fff;\n  border-top-left-radius: 24px;\n  border-top-right-radius: 24px;\n  min-height: 64px;\n  box-sizing: border-box;\n}\n.notifications-date-wrapper {\n  display: flex;\n  align-items: center;\n  background: #f6f6f6;\n  border-radius: 32px;\n  padding: 0 18px;\n  height: 36px;\n  min-width: 140px;\n}\n\n.notifications-date {\n  border: none;\n  outline: none;\n  background: transparent;\n  font-size: 20px;\n  font-family: 'Helvetica Neue LT Std', Arial, sans-serif;\n  font-weight: 400;\n  color: #888;\n  width: 100%;\n  padding: 0;\n  height: 56px;\n}\n.notifications-tabs {\n  display: flex;\n  border-radius: 32px;\n  background: #f8f8f8;\n  overflow: hidden;\n  min-width: 240px;\n  height: 36px;\n}\n.notifications-tab-btn-left {\n  border: none;\n  border-radius: 32px;\n  outline: none;\n  background: #f8f8f8;\n  color: #0f0f0f;\n  font-family: 'Helvetica Neue LT Std', Arial, sans-serif;\n  font-size: 20px;\n  font-weight: 400;\n  line-height: 26px;\n  letter-spacing: 0.02em;\n  padding: 0 50px;\n  flex: 1;\n  min-width: 0;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.18s, color 0.18s, border 0.18s, font-weight 0.18s;\n  cursor: pointer;\n  box-sizing: border-box;\n}\n.notifications-tab-btn-right {\n  border: none;\n  border-radius: 32px;\n  outline: none;\n  background: #f8f8f8;\n  color: #0f0f0f;\n  font-family: 'Helvetica Neue LT Std', Arial, sans-serif;\n  font-size: 20px;\n  font-weight: 400;\n  line-height: 26px;\n  letter-spacing: 0.02em;\n  padding: 0 50px;\n  flex: 1;\n  min-width: 0;\n  height: 36px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.18s, color 0.18s, border 0.18s, font-weight 0.18s;\n  cursor: pointer;\n  box-sizing: border-box;\n}\n.notifications-tab-btn-left.active {\n  background: #f6f6f6;\n  border: 1px solid #dcdcdc;\n  border-radius: 32px 0 0 32px;\n  color: #0f0f0f;\n  font-weight: 500;\n  z-index: 1;\n}\n.notifications-tab-btn-right.active {\n  background: #f6f6f6;\n  border: 1px solid #dcdcdc;\n  border-radius: 0 32px 32px 0;\n  color: #0f0f0f;\n  font-weight: 500;\n  z-index: 1;\n}\n\n.notifications-tab-btn:not(.active) {\n  background: #f8f8f8;\n  border: none;\n  border-radius: 32px;\n  color: #0f0f0f;\n  font-weight: 400;\n}\n.mark-all {\n  margin-left: auto;\n  background: none;\n  border: none;\n  color: #222;\n  font-weight: 500;\n  font-size: 1rem;\n  cursor: pointer;\n}\n.notifications-list {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n  padding: 0 24px 24px 24px;\n  background: #fff;\n  border-bottom-left-radius: 24px;\n  border-bottom-right-radius: 24px;\n}\n.notification-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 16px;\n  padding: 16px 0;\n  border-bottom: 1px solid #f0f0f0;\n}\n.notification-meta {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-width: 56px;\n  height: 100%;\n}\n.notification-icon {\n  width: 32px;\n  height: 32px;\n  margin-top: 8px;\n  margin-bottom: 0;\n  background: none;\n  border-radius: 0;\n  display: block;\n  box-shadow: none;\n  padding: 0;\n  object-fit: contain;\n}\n.notification-date {\n  font-size: 0.95rem;\n  color: #888;\n  text-align: left;\n  margin-bottom: 2px;\n  display: block;\n}\n.notification-body {\n  flex: 1;\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  gap: 2px;\n}\n.notification-title {\n  font-weight: 700;\n  color: #0164a5;\n  margin-right: 8px;\n  text-align: left;\n  display: inline;\n}\n.notification-text {\n  color: #222;\n  text-align: left;\n  display: block;\n  line-height: 1.6;\n}\n.no-data {\n  text-align: center;\n  color: #888;\n  font-size: 16px;\n  padding: 32px 0;\n}\n\n/* Responsive styles to match base pages */\n@media (max-width: 1400px) {\n  .notifications-controls {\n    padding: 8px 8px 0 8px;\n    border-top-left-radius: 14px;\n    border-top-right-radius: 14px;\n  }\n  .notifications-list {\n    padding: 0 8px 8px 8px;\n    border-bottom-left-radius: 14px;\n    border-bottom-right-radius: 14px;\n  }\n}\n@media (max-width: 900px) {\n  .notifications-controls {\n    padding: 8px 4px 0 4px;\n    border-top-left-radius: 10px;\n    border-top-right-radius: 10px;\n  }\n  .notifications-list {\n    padding: 0 4px 4px 4px;\n    border-bottom-left-radius: 10px;\n    border-bottom-right-radius: 10px;\n  }\n}\n</style>\n","import { render } from \"./GetNotifications.vue?vue&type=template&id=1250b027&scoped=true\"\nimport script from \"./GetNotifications.vue?vue&type=script&lang=js\"\nexport * from \"./GetNotifications.vue?vue&type=script&lang=js\"\n\nimport \"./GetNotifications.vue?vue&type=style&index=0&id=1250b027&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1250b027\"]])\n\nexport default __exports__"],"names":["class","ref","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","onClick","_cache","$event","_ctx","$emit","$props","pageSize","src","_imports_0","alt","showPageDropdown","_hoisted_4","_Fragment","_renderList","pageSizes","size","key","_normalizeClass","selected","_hoisted_5","_hoisted_6","disabled","currentPage","_imports_1","$options","computedPaginationPages","pageItem","_hoisted_8","Math","random","totalPages","_imports_2","name","props","withPagination","type","Boolean","default","Number","Array","paginationPages","computed","total","this","current","from","length","_","i","filter","v","arr","indexOf","mounted","document","addEventListener","handleClickOutside","beforeUnmount","removeEventListener","methods","e","menu","$refs","pageSizeMenu","btn","pageSizeBtn","contains","target","__exports__","render","style","_createBlock","_component_MainLayout","placeholder","$data","selectedDate","onChange","args","onDateChange","clearDate","tab","switchTab","notifications","markAllLoading","markAllAsRead","_hoisted_9","_hoisted_10","paginatedNotifications","item","id","_hoisted_11","_hoisted_12","_toDisplayString","date","_hoisted_13","body","_hoisted_14","read_at","markAsRead","_hoisted_16","_hoisted_17","_hoisted_18","_createVNode","_component_Pagination","page","isNotifications","onGoToPage","goToPage","onSelectPageSize","selectPageSize","onTogglePageDropdown","togglePageDropdown","components","Pagination","MainLayout","data","readNotifications","ceil","filteredNotifications","start","slice","list","sel","n","createdAt","created_at","_rawData","d","Date","isNaN","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","newTab","fetchNotifications","config","_getAuthHeaders","endpoint","_getNotificationEndpoint","response","_fetchDataWithFallback","notificationsArr","_extractNotifications","storedUserId","storage","get","currentUserId","parseInt","mapped","_isNotificationForUser","map","_normalizeNotification","m","error","_handleFetchError","token","headers","Authorization","role","authMiddleware","getRole","storedUserIdParam","uid","encodeURIComponent","axios","err","status","isArray","unread","console","warn","notifiable_id","JSON","parse","user_id","userId","recipient_id","bodyKeys","bodyDisplay","_pickString","Object","keys","stringify","formatDate","obj","k","hasOwn","trim","message","serverMsg","$nextTick","$notify","dateStr","options","month","day","year","hour","minute","hour12","toLocaleString","replace","post","updateNotificationCount","window","dispatchEvent","Event","notif","find","prevPage","nextPage","set","markAllRead","watch","handler","deep","immediate","$route","remove"],"sourceRoot":""}