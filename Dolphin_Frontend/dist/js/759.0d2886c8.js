"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[759],{8184:(e,s,a)=>{a.r(s),a.d(s,{default:()=>B});var t=a(641),n=a(33),l=a(3751);const o=a.p+"img/Pending.7b307357.svg";var i=a(9586);const u={class:"page"},d={class:"table-outer"},m={class:"assessment-table-card"},r={class:"assessment-summary-cards"},c={class:"assessment-summary-card"},g={class:"summary-value"},v={class:"assessment-summary-card"},k={class:"summary-value"},p={class:"assessment-summary-card"},b={class:"summary-value"},h={class:"assessment-table-container"},w={class:"assessment-table"},y={class:"member-name-td"},L={key:0,class:"status submitted"},P={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{"margin-right":"8px"}},f={key:1,class:"status pending"},S=["onClick"],M={key:0},C={class:"assessment-modal-content"},_={class:"assessment-modal-header-row sticky-modal-header"},x={class:"assessment-modal-scrollable"},z={class:"assessment-question"},E={class:"assessment-answer"};function R(e,s,a,R,X,A){const D=(0,t.g2)("TableHeader"),K=(0,t.g2)("Pagination"),T=(0,t.g2)("MainLayout");return(0,t.uX)(),(0,t.Wv)(T,null,{default:(0,t.k6)(()=>[(0,t.Lk)("div",u,[(0,t.Lk)("div",d,[(0,t.Lk)("div",m,[(0,t.Lk)("div",r,[(0,t.Lk)("div",c,[s[2]||(s[2]=(0,t.Lk)("div",{class:"summary-label"},"Total Sent Assessment",-1)),(0,t.Lk)("div",g,(0,n.v_)(R.summary.total_sent),1)]),(0,t.Lk)("div",v,[s[3]||(s[3]=(0,t.Lk)("div",{class:"summary-label"},"Submitted Assessment",-1)),(0,t.Lk)("div",k,(0,n.v_)(R.summary.submitted),1)]),(0,t.Lk)("div",p,[s[4]||(s[4]=(0,t.Lk)("div",{class:"summary-label"},"Pending",-1)),(0,t.Lk)("div",b,(0,n.v_)(R.summary.pending),1)])]),s[10]||(s[10]=(0,t.Lk)("div",{class:"assessment-table-header-spacer"},null,-1)),(0,t.Lk)("div",h,[(0,t.Lk)("table",w,[(0,t.bF)(D,{columns:R.tableColumns,onSort:R.sortBy},null,8,["columns","onSort"]),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(R.paginatedRows,e=>((0,t.uX)(),(0,t.CE)("tr",{key:e.name},[(0,t.Lk)("td",y,(0,n.v_)(e.name),1),(0,t.Lk)("td",null,["Submitted"===e.result?((0,t.uX)(),(0,t.CE)("span",L,[((0,t.uX)(),(0,t.CE)("svg",P,[...s[5]||(s[5]=[(0,t.Lk)("circle",{cx:"10",cy:"10",r:"10",fill:"#48B02C"},null,-1),(0,t.Lk)("path",{d:"M6 10.5L9 13.5L14 8.5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),s[6]||(s[6]=(0,t.eW)(" Submitted ",-1))])):((0,t.uX)(),(0,t.CE)("span",f,[...s[7]||(s[7]=[(0,t.Lk)("span",{style:{position:"relative",display:"inline-flex","align-items":"center","justify-content":"center",width:"20px",height:"20px","margin-right":"8px"}},[(0,t.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,t.Lk)("circle",{cx:"10",cy:"10",r:"10",fill:"#F0F0F0"})]),(0,t.Lk)("img",{src:o,alt:"Pending",style:{position:"absolute",left:"3px",top:"3px",width:"14px",height:"14px"}})],-1),(0,t.eW)(" Pending ",-1)])]))]),(0,t.Lk)("td",null,[(0,t.Lk)("button",{class:"btn-view",onClick:s=>R.openModal(e)},[...s[8]||(s[8]=[(0,t.Lk)("img",{src:i,alt:"View",class:"btn-view-icon",width:"18",height:"18"},null,-1),(0,t.eW)(" View ",-1)])],8,S)])]))),128)),0===R.paginatedRows.length?((0,t.uX)(),(0,t.CE)("tr",M,[...s[9]||(s[9]=[(0,t.Lk)("td",{colspan:"3",class:"no-data"}," No assessments found. ",-1)])])):(0,t.Q3)("",!0)])])])]),(0,t.bF)(K,{pageSize:R.pageSize,pageSizes:R.pageSizes,showPageDropdown:R.showPageDropdown,currentPage:R.currentPage,totalPages:R.totalPages,onGoToPage:R.goToPage,onSelectPageSize:R.selectPageSize,onTogglePageDropdown:R.togglePageDropdown},null,8,["pageSize","pageSizes","showPageDropdown","currentPage","totalPages","onGoToPage","onSelectPageSize","onTogglePageDropdown"]),R.showModal?((0,t.uX)(),(0,t.CE)("div",{key:0,class:"assessment-modal-overlay",onClick:s[1]||(s[1]=(0,l.D$)((...e)=>R.closeModal&&R.closeModal(...e),["self"]))},[(0,t.Lk)("div",C,[(0,t.Lk)("div",_,[(0,t.Lk)("h2",null,(0,n.v_)(R.selectedMember.name)+"’s Assessments",1),(0,t.Lk)("button",{class:"btn modal-close-btn",onClick:s[0]||(s[0]=(...e)=>R.closeModal&&R.closeModal(...e))}," × ")]),(0,t.Lk)("div",x,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(R.selectedMember.assessment||[],(e,s)=>((0,t.uX)(),(0,t.CE)("div",{key:s,class:"assessment-question-block"},[(0,t.Lk)("div",z," Q."+(0,n.v_)(s+1)+" "+(0,n.v_)(e.question),1),(0,t.Lk)("div",E,(0,n.v_)(e.answer),1)]))),128))]),s[11]||(s[11]=(0,t.Lk)("div",{class:"assessment-modal-header-row sticky-modal-header"},null,-1))])])):(0,t.Q3)("",!0)])])]),_:1})}var X=a(2724),A=a(280),D=a(8406),K=a(953),T=a(5220);const F={name:"AssessmentSummaryPage",components:{MainLayout:X.A,Pagination:A.A,TableHeader:D.A},setup(){const e=(0,T.lq)(),s=e.params.assessmentId,a=(0,K.KR)([]),n=(0,K.KR)({total_sent:0,submitted:0,pending:0});async function l(){try{const e="http://127.0.0.1:8000",t=await fetch(`${e}/api/assessment/${s}/summary`),l=await t.json();a.value=(l.members||[]).map(e=>({name:e.name||(e.member_id?`Member #${e.member_id}`:"Unknown"),result:e.answers&&e.answers.length>0?"Submitted":"Pending",assessment:(e.answers||[]).map(e=>({question:e.question,answer:e.answer}))})),n.value=l.summary||{total_sent:0,submitted:0,pending:0}}catch(e){a.value=[],n.value={total_sent:0,submitted:0,pending:0}}}l();const o=[{label:"Member Name",key:"name"},{label:"Result",key:"result"},{label:"Actions",key:"actions"}],i=[10,25,100],u=(0,K.KR)(10),d=(0,K.KR)(1),m=(0,K.KR)(!1),r=(0,t.EW)(()=>Math.max(1,Math.ceil(a.value.length/u.value))),c=(0,t.EW)(()=>{const e=(d.value-1)*u.value;return a.value.slice(e,e+u.value)}),g=(0,K.KR)(!1),v=(0,K.KR)({});function k(e){v.value=e,g.value=!0}function p(){g.value=!1}function b(e){e>=1&&e<=r.value&&(d.value=e)}function h(e){u.value=e,d.value=1,m.value=!1}function w(){m.value=!m.value}function y(){}return{assessmentId:s,rows:a,paginatedRows:c,pageSizes:i,pageSize:u,currentPage:d,totalPages:r,showPageDropdown:m,goToPage:b,selectPageSize:h,togglePageDropdown:w,showModal:g,selectedMember:v,openModal:k,closeModal:p,tableColumns:o,sortBy:y,summary:n}}};var q=a(6262);const W=(0,q.A)(F,[["render",R],["__scopeId","data-v-06021a00"]]),B=W}}]);
//# sourceMappingURL=759.0d2886c8.js.map