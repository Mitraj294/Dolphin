"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[951],{733:(e,s,t)=>{t.d(s,{A:()=>P});var a=t(641),n=t(33),o=t(8634);const i=t.p+"img/VectorLeft.078c6ba0.svg",l=t.p+"img/VectorRight.c1a1a195.svg",r={class:"footer-box"},c={class:"footer-controls split-footer-controls"},d={class:"notifications-page-size-dropdown"},m={key:0,class:"notifications-page-size-menu",ref:"pageSizeMenu"},u=["onClick"],g={class:"notifications-pagination"},p=["disabled"],h=["onClick"],k=["disabled"];function b(e,s,t,b,y,v){return(0,a.uX)(),(0,a.CE)("footer",r,[(0,a.Lk)("div",c,[(0,a.Lk)("div",d,[(0,a.Lk)("button",{class:"notifications-page-size-btn",onClick:s[0]||(s[0]=s=>e.$emit("togglePageDropdown")),ref:"pageSizeBtn"},[(0,a.eW)((0,n.v_)(t.pageSize)+"/page ",1),s[3]||(s[3]=(0,a.Lk)("img",{src:o,class:"notifications-page-size-arrow",alt:"Dropdown"},null,-1))],512),t.showPageDropdown?((0,a.uX)(),(0,a.CE)("div",m,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.pageSizes,s=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:(0,n.C4)(["notifications-page-size-option",{selected:t.pageSize===s}]),onClick:t=>e.$emit("selectPageSize",s)},(0,n.v_)(s)+"/page ",11,u))),128))],512)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",g,[(0,a.Lk)("button",{class:"notifications-pagination-btn prev",disabled:1===t.currentPage,onClick:s[1]||(s[1]=s=>e.$emit("goToPage",t.currentPage-1))},[...s[4]||(s[4]=[(0,a.Lk)("img",{src:i,alt:"Previous",class:"pagination-btn-icon"},null,-1),(0,a.Lk)("span",{class:"pagination-btn-text prev-text"},"Previous",-1)])],8,p),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.computedPaginationPages,s=>((0,a.uX)(),(0,a.CE)(a.FK,null,["..."!==s?((0,a.uX)(),(0,a.CE)("button",{key:s+"-page",class:(0,n.C4)(["notifications-pagination-page",{selected:s===t.currentPage}]),onClick:t=>e.$emit("goToPage",s)},(0,n.v_)(s),11,h)):((0,a.uX)(),(0,a.CE)("span",{key:"ellipsis-"+Math.random(),class:"notifications-pagination-page"},"..."))],64))),256)),(0,a.Lk)("button",{class:"notifications-pagination-btn next",disabled:t.currentPage===t.totalPages,onClick:s[2]||(s[2]=s=>e.$emit("goToPage",t.currentPage+1))},[...s[5]||(s[5]=[(0,a.Lk)("span",{class:"pagination-btn-text next-text"},"Next",-1),(0,a.Lk)("img",{src:l,alt:"Next",class:"pagination-btn-icon"},null,-1)])],8,k)])])])}const y={name:"Pagination",props:{withPagination:{type:Boolean,default:!1},pageSize:Number,pageSizes:Array,showPageDropdown:Boolean,currentPage:Number,totalPages:{type:Number,default:10},paginationPages:Array},computed:{computedPaginationPages(){const e=this.totalPages||10,s=this.currentPage||1;return e<=7?Array.from({length:e},(e,s)=>s+1):s<=3?[1,2,3,4,"...",e-1,e]:4===s?[1,3,4,5,"...",e-1,e]:5===s?[1,4,5,6,"...",e-1,e]:6===s?[1,5,6,7,"...",e-1,e]:7===s?[1,2,"...",6,7,8,e,e-1].filter((e,s,t)=>t.indexOf(e)===s):s===e-2?[1,2,"...",e-3,e-2,e-1,e]:s===e-1||s===e?[1,2,"...",e-2,e-1,e]:[1,2,"...",s-1,s,s+1,"...",e-1,e].filter((e,s,t)=>t.indexOf(e)===s)}},mounted(){document.addEventListener("mousedown",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)},methods:{handleClickOutside(e){if(!this.showPageDropdown)return;const s=this.$refs.pageSizeMenu,t=this.$refs.pageSizeBtn;s&&!s.contains(e.target)&&t&&!t.contains(e.target)&&this.$emit("togglePageDropdown")}}};var v=t(6262);const w=(0,v.A)(y,[["render",b],["__scopeId","data-v-63376d46"]]),P=w},2233:(e,s,t)=>{t.r(s),t.d(s,{default:()=>W});var a=t(641),n=t(33),o=t(3751);const i=t.p+"img/Pending.7b307357.svg";var l=t(9586);const r={class:"page"},c={class:"table-outer"},d={class:"assessment-table-card"},m={class:"assessment-summary-cards"},u={class:"assessment-summary-card"},g={class:"summary-value"},p={class:"assessment-summary-card"},h={class:"summary-value"},k={class:"assessment-summary-card"},b={class:"summary-value"},y={class:"assessment-table-container"},v={class:"assessment-table"},w={class:"member-name-td"},P={key:0,class:"status submitted"},f={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",style:{"margin-right":"8px"}},L={key:1,class:"status pending"},C=["onClick"],S={key:0},z={class:"assessment-modal-content"},x={class:"assessment-modal-header-row sticky-modal-header"},E={class:"assessment-modal-scrollable"},$={class:"assessment-question"},M={class:"assessment-answer"};function _(e,s,t,_,X,A){const D=(0,a.g2)("TableHeader"),T=(0,a.g2)("Pagination"),F=(0,a.g2)("MainLayout");return(0,a.uX)(),(0,a.Wv)(F,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",r,[(0,a.Lk)("div",c,[(0,a.Lk)("div",d,[(0,a.Lk)("div",m,[(0,a.Lk)("div",u,[s[2]||(s[2]=(0,a.Lk)("div",{class:"summary-label"},"Total Sent Assessment",-1)),(0,a.Lk)("div",g,(0,n.v_)(X.summary.total_sent),1)]),(0,a.Lk)("div",p,[s[3]||(s[3]=(0,a.Lk)("div",{class:"summary-label"},"Submitted Assessment",-1)),(0,a.Lk)("div",h,(0,n.v_)(X.summary.submitted),1)]),(0,a.Lk)("div",k,[s[4]||(s[4]=(0,a.Lk)("div",{class:"summary-label"},"Pending",-1)),(0,a.Lk)("div",b,(0,n.v_)(X.summary.pending),1)])]),s[10]||(s[10]=(0,a.Lk)("div",{class:"assessment-table-header-spacer"},null,-1)),(0,a.Lk)("div",y,[(0,a.Lk)("table",v,[(0,a.bF)(D,{columns:X.tableColumns,onSort:A.sortBy},null,8,["columns","onSort"]),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(A.paginatedRows,e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.name},[(0,a.Lk)("td",w,(0,n.v_)(e.name),1),(0,a.Lk)("td",null,["Submitted"===e.result?((0,a.uX)(),(0,a.CE)("span",P,[((0,a.uX)(),(0,a.CE)("svg",f,[...s[5]||(s[5]=[(0,a.Lk)("circle",{cx:"10",cy:"10",r:"10",fill:"#48B02C"},null,-1),(0,a.Lk)("path",{d:"M6 10.5L9 13.5L14 8.5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),s[6]||(s[6]=(0,a.eW)(" Submitted ",-1))])):((0,a.uX)(),(0,a.CE)("span",L,[...s[7]||(s[7]=[(0,a.Lk)("span",{style:{position:"relative",display:"inline-flex","align-items":"center","justify-content":"center",width:"20px",height:"20px","margin-right":"8px"}},[(0,a.Lk)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,a.Lk)("circle",{cx:"10",cy:"10",r:"10",fill:"#F0F0F0"})]),(0,a.Lk)("img",{src:i,alt:"Pending",style:{position:"absolute",left:"3px",top:"3px",width:"14px",height:"14px"}})],-1),(0,a.eW)(" Pending ",-1)])]))]),(0,a.Lk)("td",null,[(0,a.Lk)("button",{class:"btn-view",onClick:s=>A.openModal(e)},[...s[8]||(s[8]=[(0,a.Lk)("img",{src:l,alt:"View",class:"btn-view-icon",width:"18",height:"18"},null,-1),(0,a.eW)(" View ",-1)])],8,C)])]))),128)),0===A.paginatedRows.length?((0,a.uX)(),(0,a.CE)("tr",S,[...s[9]||(s[9]=[(0,a.Lk)("td",{colspan:"3",class:"no-data"}," No assessments found. ",-1)])])):(0,a.Q3)("",!0)])])])]),(0,a.bF)(T,{pageSize:X.pageSize,pageSizes:X.pageSizes,showPageDropdown:X.showPageDropdown,currentPage:X.currentPage,totalPages:A.totalPages,onGoToPage:A.goToPage,onSelectPageSize:A.selectPageSize,onTogglePageDropdown:A.togglePageDropdown},null,8,["pageSize","pageSizes","showPageDropdown","currentPage","totalPages","onGoToPage","onSelectPageSize","onTogglePageDropdown"]),X.showModal?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"assessment-modal-overlay",onClick:s[1]||(s[1]=(0,o.D$)((...e)=>A.closeModal&&A.closeModal(...e),["self"]))},[(0,a.Lk)("div",z,[(0,a.Lk)("div",x,[(0,a.Lk)("h2",null,(0,n.v_)(X.selectedMember.name)+"’s Assessments",1),(0,a.Lk)("button",{class:"btn modal-close-btn",onClick:s[0]||(s[0]=(...e)=>A.closeModal&&A.closeModal(...e))}," × ")]),(0,a.Lk)("div",E,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(X.selectedMember.assessment||[],(e,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"assessment-question-block"},[(0,a.Lk)("div",$," Q."+(0,n.v_)(s+1)+" "+(0,n.v_)(e.question),1),(0,a.Lk)("div",M,(0,n.v_)(e.answer),1)]))),128))]),s[11]||(s[11]=(0,a.Lk)("div",{class:"assessment-modal-header-row sticky-modal-header"},null,-1))])])):(0,a.Q3)("",!0)])])]),_:1})}var X=t(4631),A=t(733),D=t(5629),T=t(4335);const F={name:"AssessmentSummaryPage",components:{MainLayout:X.A,Pagination:A.A,TableHeader:D.A},data(){return{assessmentId:null,rows:[],summary:{total_sent:0,submitted:0,pending:0},tableColumns:[{label:"Member Name",key:"name"},{label:"Result",key:"result"},{label:"Actions",key:"actions"}],pageSizes:[10,25,100],pageSize:10,currentPage:1,showPageDropdown:!1,showModal:!1,selectedMember:{}}},computed:{totalPages(){return Math.max(1,Math.ceil(this.rows.length/this.pageSize))},paginatedRows(){const e=(this.currentPage-1)*this.pageSize;return this.rows.slice(e,e+this.pageSize)}},methods:{async fetchSummary(){if(this.assessmentId)try{const e="http://127.0.0.1:8000",s=await T.A.get(`${e}/api/assessment/${this.assessmentId}/summary`),t=s.data;if(t.assessment&&t.assessment.name){const e=t.assessment.name;this.$root&&this.$root.$emit&&this.$root.$emit("page-title-override",`Assessment ${e} Summary`)}this.rows=(t.members||[]).map(e=>({name:e.name||(e.member_id?`Member #${e.member_id}`:"Unknown"),result:e.answers&&e.answers.length>0?"Submitted":"Pending",assessment:(e.answers||[]).map(e=>({question:e.question,answer:e.answer}))})),this.summary=t.summary||{total_sent:0,submitted:0,pending:0}}catch(e){this.rows=[],this.summary={total_sent:0,submitted:0,pending:0},console.error("Failed to fetch assessment summary:",e)}},openModal(e){this.selectedMember=e,this.showModal=!0},closeModal(){this.showModal=!1},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},togglePageDropdown(){this.showPageDropdown=!this.showPageDropdown},sortBy(){}},created(){this.assessmentId=this.$route.params.assessmentId,this.fetchSummary()},beforeDestroy(){this.$root&&this.$root.$emit&&this.$root.$emit("page-title-override",null)}};var I=t(6262);const K=(0,I.A)(F,[["render",_],["__scopeId","data-v-d5e0e186"]]),W=K},5629:(e,s,t)=>{t.d(s,{A:()=>u});var a=t(641),n=t(33),o=t(3751);const i=t.p+"img/up-down.53d62c9d.svg",l=["role","tabindex","onClick","onKeyup"];function r(e,s,t,r,c,d){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("colgroup",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.columns,(e,s)=>((0,a.uX)(),(0,a.CE)("col",{key:"col-"+(e.key||s),class:(0,n.C4)(e.width||e.minWidth),style:(0,n.Tr)(d.getColumnStyle(e))},null,6))),128))]),(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t.columns,(s,r)=>((0,a.uX)(),(0,a.CE)("th",{key:s.key||r,class:(0,n.C4)([0===r?"rounded-th-left":"",r===t.columns.length-1?"rounded-th-right":"",s.width||s.minWidth,s.class||""]),style:(0,n.Tr)(d.getColumnStyle(s)),role:s.sortable?"button":null,tabindex:s.sortable?0:null,scope:"col",onClick:t=>!0===s.sortable?e.$emit("sort",s.key):null,onKeyup:(0,o.jR)(t=>!0===s.sortable?e.$emit("sort",s.key):null,["enter"])},[(0,a.Lk)("span",{class:(0,n.C4)(["org-th-content",s.sortable?"org-th-sortable":"",t.activeSortKey===s.key?"sorted":""])},[(0,a.eW)((0,n.v_)(s.label)+" ",1),!0===s.sortable?((0,a.uX)(),(0,a.CE)("img",{key:0,src:i,class:(0,n.C4)(["org-th-sort",t.activeSortKey===s.key?t.sortAsc?"asc":"desc":""]),alt:"Sort"},null,2)):(0,a.Q3)("",!0)],2)],46,l))),128))])])],64)}const c={name:"TableHeader",emits:["sort"],props:{columns:{type:Array,required:!0},activeSortKey:{type:String,default:null},sortAsc:{type:Boolean,default:!0}},methods:{getColumnStyle(e){let s={};if(e.width&&(s.width="number"===typeof e.width?e.width+"px":e.width),e.minWidth&&(s.minWidth="number"===typeof e.minWidth?e.minWidth+"px":e.minWidth),e.style){const t=e.style.split(";").filter(e=>e.trim());t.forEach(e=>{const[t,a]=e.split(":").map(e=>e.trim());if(t&&a){const e=t.replace(/-([a-z])/g,e=>e[1].toUpperCase());s[e]=a}})}return Object.keys(s).length>0?s:null}}};var d=t(6262);const m=(0,d.A)(c,[["render",r],["__scopeId","data-v-9953bdcc"]]),u=m},9586:(e,s,t)=>{e.exports=t.p+"img/Notes.d9b82ed3.svg"}}]);
//# sourceMappingURL=951.7b75a01d.js.map