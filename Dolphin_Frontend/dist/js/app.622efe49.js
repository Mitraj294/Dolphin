(()=>{var e={35:(e,t,s)=>{"use strict";e.exports=s.p+"img/Users+PermissionsOn.a9fc1c9d.svg"},223:(e,t,s)=>{"use strict";e.exports=s.p+"img/Training&ResourcesOff.3904f6cd.svg"},280:(e,t,s)=>{"use strict";s.d(t,{A:()=>w});var a=s(641),i=s(33),o=s(8634);const n=s.p+"img/VectorLeft.078c6ba0.svg",r=s.p+"img/VectorRight.c1a1a195.svg",l={class:"footer-box"},d={class:"footer-controls split-footer-controls"},u={class:"notifications-page-size-dropdown"},c={key:0,class:"notifications-page-size-menu",ref:"pageSizeMenu"},m=["onClick"],h={class:"notifications-pagination"},p=["disabled"],g=["onClick"],f=["disabled"];function b(e,t,s,b,y,k){return(0,a.uX)(),(0,a.CE)("footer",l,[(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.Lk)("button",{class:"notifications-page-size-btn",onClick:t[0]||(t[0]=t=>e.$emit("togglePageDropdown")),ref:"pageSizeBtn"},[(0,a.eW)((0,i.v_)(s.pageSize)+"/page ",1),t[3]||(t[3]=(0,a.Lk)("img",{src:o,class:"notifications-page-size-arrow",alt:"Dropdown"},null,-1))],512),s.showPageDropdown?((0,a.uX)(),(0,a.CE)("div",c,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.pageSizes,t=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,i.C4)(["notifications-page-size-option",{selected:s.pageSize===t}]),onClick:s=>e.$emit("selectPageSize",t)},(0,i.v_)(t)+"/page ",11,m))),128))],512)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",h,[(0,a.Lk)("button",{class:"notifications-pagination-btn prev",disabled:1===s.currentPage,onClick:t[1]||(t[1]=t=>e.$emit("goToPage",s.currentPage-1))},[...t[4]||(t[4]=[(0,a.Lk)("img",{src:n,alt:"Previous",class:"pagination-btn-icon"},null,-1),(0,a.Lk)("span",{class:"pagination-btn-text prev-text"},"Previous",-1)])],8,p),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(k.computedPaginationPages,t=>((0,a.uX)(),(0,a.CE)(a.FK,null,["..."!==t?((0,a.uX)(),(0,a.CE)("button",{key:t+"-page",class:(0,i.C4)(["notifications-pagination-page",{selected:t===s.currentPage}]),onClick:s=>e.$emit("goToPage",t)},(0,i.v_)(t),11,g)):((0,a.uX)(),(0,a.CE)("span",{key:"ellipsis-"+Math.random(),class:"notifications-pagination-page"},"..."))],64))),256)),(0,a.Lk)("button",{class:"notifications-pagination-btn next",disabled:s.currentPage===s.totalPages,onClick:t[2]||(t[2]=t=>e.$emit("goToPage",s.currentPage+1))},[...t[5]||(t[5]=[(0,a.Lk)("span",{class:"pagination-btn-text next-text"},"Next",-1),(0,a.Lk)("img",{src:r,alt:"Next",class:"pagination-btn-icon"},null,-1)])],8,f)])])])}const y={name:"Pagination",props:{withPagination:{type:Boolean,default:!1},pageSize:Number,pageSizes:Array,showPageDropdown:Boolean,currentPage:Number,totalPages:{type:Number,default:10},paginationPages:Array},computed:{computedPaginationPages(){const e=this.totalPages||10,t=this.currentPage||1;return e<=7?Array.from({length:e},(e,t)=>t+1):t<=3?[1,2,3,4,"...",e-1,e]:4===t?[1,3,4,5,"...",e-1,e]:5===t?[1,4,5,6,"...",e-1,e]:6===t?[1,5,6,7,"...",e-1,e]:7===t?[1,2,"...",6,7,8,e,e-1].filter((e,t,s)=>s.indexOf(e)===t):t===e-2?[1,2,"...",e-3,e-2,e-1,e]:t===e-1||t===e?[1,2,"...",e-2,e-1,e]:[1,2,"...",t-1,t,t+1,"...",e-1,e].filter((e,t,s)=>s.indexOf(e)===t)}},mounted(){document.addEventListener("mousedown",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)},methods:{handleClickOutside(e){if(!this.showPageDropdown)return;const t=this.$refs.pageSizeMenu,s=this.$refs.pageSizeBtn;t&&!t.contains(e.target)&&s&&!s.contains(e.target)&&this.$emit("togglePageDropdown")}}};var k=s(6262);const v=(0,k.A)(y,[["render",b],["__scopeId","data-v-fd91cc7c"]]),w=v},359:(e,t,s)=>{"use strict";e.exports=s.p+"img/Organizations+AdminsOff.1c8f2fa5.svg"},477:()=>{},606:(e,t,s)=>{"use strict";s.d(t,{A:()=>N});var a=s(641),i=s(33),o=s(3751),n=s(8634),r=s(5753);const l={class:"navbar"},d={class:"navbar-left"},u={class:"navbar-page"},c={class:"navbar-actions"},m={style:{height:"36px",width:"34px","vertical-align":"middle","margin-right":"8px",cursor:"pointer",display:"inline-block",position:"relative"}},h={key:0,class:"navbar-badge"},p={class:"navbar-avatar"},g={key:0,src:n,alt:"Open",class:"navbar-chevron"},f={key:1,src:r,alt:"Close",class:"navbar-chevron"},b={key:0,class:"navbar-dropdown",ref:"dropdown"},y={key:0,class:"logout-confirm-overlay"},k={class:"logout-confirm-dialog"},v={class:"logout-confirm-actions"};function w(e,t,s,n,r,w){const L=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("nav",l,[(0,a.Lk)("div",d,[(0,a.Lk)("span",u,(0,i.v_)(w.pageTitle),1)]),(0,a.Lk)("div",c,[["superadmin","dolphinadmin","salesperson"].includes(r.roleName)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(L,{key:0,to:"/get-notification",style:{display:"flex","align-items":"center",position:"relative"}},{default:(0,a.k6)(()=>[(0,a.Lk)("span",m,[t[7]||(t[7]=(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"34",height:"36",viewBox:"0 0 256 256"},[(0,a.Lk)("g",{style:{stroke:"none",fill:"none"},transform:"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)"},[(0,a.Lk)("path",{d:"M 83.25 74.548 H 6.75 c -1.536 0 -2.864 -0.988 -3.306 -2.457 c -0.441 -1.468 0.122 -3.022 1.401 -3.868 c 0.896 -0.594 1.954 -1.152 3.233 -1.707 c 5.52 -2.514 6.42 -16.025 7.144 -26.882 c 0.182 -2.74 0.355 -5.327 0.59 -7.664 c 1.926 -12.752 8.052 -20.942 18.223 -24.424 C 35.767 3.067 40.169 0 45 0 s 9.233 3.067 10.964 7.546 c 10.171 3.482 16.298 11.671 18.214 24.352 c 0.245 2.409 0.416 4.996 0.6 7.736 c 0.723 10.857 1.624 24.368 7.168 26.893 c 1.255 0.544 2.313 1.102 3.21 1.696 c 1.279 0.846 1.842 2.4 1.4 3.868 C 86.114 73.56 84.785 74.548 83.25 74.548 z M 45 2.934 c -3.818 0 -7.279 2.556 -8.416 6.215 l -0.228 0.733 l -0.732 0.231 c -9.568 3.018 -15.096 10.287 -16.9 22.224 c -0.221 2.216 -0.392 4.779 -0.573 7.493 c -0.816 12.242 -1.74 26.117 -8.88 29.368 c -1.129 0.49 -2.064 0.982 -2.806 1.473 c -0.265 0.175 -0.26 0.409 -0.21 0.575 c 0.051 0.168 0.177 0.368 0.496 0.368 h 76.5 c 0.318 0 0.445 -0.2 0.496 -0.368 c 0.05 -0.166 0.054 -0.4 -0.209 -0.575 h -0.001 c -0.741 -0.491 -1.677 -0.983 -2.782 -1.462 c -7.163 -3.261 -8.088 -17.137 -8.905 -29.379 c -0.181 -2.714 -0.352 -5.277 -0.582 -7.565 c -1.795 -11.864 -7.323 -19.134 -16.891 -22.151 l -0.732 -0.231 L 53.416 9.15 C 52.279 5.49 48.818 2.934 45 2.934 z",style:{fill:"rgb(0, 0, 0)"}}),(0,a.Lk)("path",{d:"M 33.257 78.292 C 33.277 84.75 38.536 90 45 90 c 6.463 0 11.723 -5.25 11.743 -11.708 H 33.257 z M 45 87.066 c -3.816 0 -7.063 -2.443 -8.285 -5.843 h 16.57 C 52.063 84.623 48.816 87.066 45 87.066 z",style:{fill:"rgb(0, 0, 0)"}})])],-1)),r.notificationCount>0?((0,a.uX)(),(0,a.CE)("span",h,(0,i.v_)(r.notificationCount),1)):(0,a.Q3)("",!0)])]),_:1})),(0,a.Lk)("div",{class:"navbar-profile-btn",ref:"dropdownWrapper",onClick:t[3]||(t[3]=(...e)=>w.toggleDropdown&&w.toggleDropdown(...e)),tabindex:"0",onKeydown:t[4]||(t[4]=(0,o.jR)((...e)=>w.toggleDropdown&&w.toggleDropdown(...e),["enter"]))},[(0,a.Lk)("span",p,(0,i.v_)(w.displayName.charAt(0)),1),(0,a.bo)((0,a.Lk)("span",{class:"navbar-username"},(0,i.v_)(w.displayName),513),[[o.aG,!r.isVerySmallScreen]]),r.dropdownOpen?((0,a.uX)(),(0,a.CE)("img",f)):((0,a.uX)(),(0,a.CE)("img",g)),(0,a.bF)(o.eB,{name:"fade"},{default:(0,a.k6)(()=>[r.dropdownOpen?((0,a.uX)(),(0,a.CE)("div",b,[r.roleName?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"navbar-dropdown-item",onClick:t[0]||(t[0]=(...e)=>w.goToProfile&&w.goToProfile(...e))},[...t[8]||(t[8]=[(0,a.Lk)("i",{class:"fas fa-user"},null,-1),(0,a.eW)(" Profile ",-1)])])):(0,a.Q3)("",!0),"superadmin"!=r.roleName?((0,a.uX)(),(0,a.CE)("div",{key:1,class:"navbar-dropdown-item",onClick:t[1]||(t[1]=t=>{e.$router.push({name:"ManageSubscription"}),r.dropdownOpen=!1})},[...t[9]||(t[9]=[(0,a.Lk)("i",{class:"fas fa-credit-card"},null,-1),(0,a.eW)(" Manage Subscriptions ",-1)])])):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:"navbar-dropdown-item",onClick:t[2]||(t[2]=(...e)=>w.confirmLogout&&w.confirmLogout(...e))},[...t[10]||(t[10]=[(0,a.Lk)("i",{class:"fas fa-sign-out-alt"},null,-1),(0,a.eW)(" Logout ",-1)])])],512)):(0,a.Q3)("",!0)]),_:1})],544)]),r.showLogoutConfirm?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("div",k,[t[11]||(t[11]=(0,a.Lk)("div",{class:"logout-confirm-title"},"Are you sure you want to logout?",-1)),(0,a.Lk)("div",v,[(0,a.Lk)("button",{class:"btn btn-secondary",onClick:t[5]||(t[5]=(...e)=>w.handleLogoutYes&&w.handleLogoutYes(...e))}," Yes "),(0,a.Lk)("button",{class:"btn btn-primary",onClick:t[6]||(t[6]=(...e)=>w.handleLogoutCancel&&w.handleLogoutCancel(...e))}," Cancel ")])])])):(0,a.Q3)("",!0)])}var L=s(4220),_=s(3193),A=s(4335);const S={name:"Navbar",data(){return{dropdownOpen:!1,showLogoutConfirm:!1,overridePageTitle:null,roleName:L.A.getRole(),isVerySmallScreen:!1,notificationCount:0,assessmentNameCache:{},assessmentNameFetching:{},leadNameCache:{},leadNameFetching:{},orgNameCache:{},orgNameFetching:{},isNavbarAlive:!1,_boundFetchUnread:null,_boundUpdateNotificationCount:null,_boundAuthUpdated:null}},computed:{pageTitle(){if(this.overridePageTitle)return this.overridePageTitle;const e=this.$route.name;if("UserPermission"===e)return"Users + Permission";if("ScheduleClassTraining"===e)return"Schedule Classes/Training";if("LeadDetail"===e){let e=this.$route.query.contact||"";return e?`${e} Details`:"Lead Details"}if("EditLead"===e){const e=this.$route.params.id||this.$route.query.id;if(e){const t=this.leadNameCache[e];return t?`Edit Lead : ${t}`:(this.leadNameFetching[e]||this.isNavbarAlive&&this.fetchLeadName(e),"Edit Lead")}return"Edit Lead"}if("OrganizationDetail"===e){const e=this.$route.params.orgName||this.$route.query.orgName||"";if(e)return`Organization Details: ${e}`;const t=this.$route.params.id||this.$route.query.id||this.$route.params.orgId;if(t){const e=this.orgNameCache[t];return e?`Organization Details: ${e}`:(this.orgNameFetching[t]||this.isNavbarAlive&&this.fetchOrgName(t),"Organization Details")}return"Organization Details"}if("OrganizationEdit"===e){const e=this.$route.params.id||this.$route.query.id||this.$route.params.orgId;if(e){const t=this.orgNameCache[e];return t?`Edit organization : ${t}`:(this.orgNameFetching[e]||this.isNavbarAlive&&this.fetchOrgName(e),"Edit organization")}const t=this.$route.params.orgName||"";return t?`${t} Organization Details`:"Organization Details"}if("BillingDetails"===e){const e=this.$route.query.orgName||"";return e?`${e} Organization Details`:"Organization Details"}if("SendAssessment"===e)return"Send Assessment";if("ScheduleDemo"===e)return"Schedule Demo";if("Assessments"===e)return"Assessments";if("TrainingResources"===e)return"Training & Resources";if("MyOrganization"===e)return"My Organization";if("Notifications"===e||"GetNotification"===e)return"Notification";if("Organizations"===e)return"Organizations";if("Leads"===e)return"Leads";if("ThankYou"===e)return"Thank You";if("Login"===e)return"Login";if("LeadCapture"===e)return"Lead Capture";if("ManageSubscription"===e)return"Manage Subscription";if("SubscriptionPlans"===e)return"Subscription Plans";if("MemberListing"===e)return"Member Listing";if("Members"===e)return"Member Listing";if("AssessmentSummary"===e){const e=this.$route.params.assessmentId;return e?this.assessmentNameCache&&this.assessmentNameCache[e]?`${this.assessmentNameCache[e]} Summary`:(this.fetchAssessmentName(e),`Assessment ${e} Summary`):"Assessment Summary"}return"Profile"===e?"Profile":this.$route.name||""},displayName(){const e=_["default"].get("first_name"),t=_["default"].get("last_name");if(e&&e.trim()||t&&t.trim())return`${e?e.trim():""}${t&&t.trim()?" "+t.trim():""}`.trim();const s=_["default"].get("userName");if(s&&s.trim())return s.trim();const a=_["default"].get("email");return a&&a.trim()?a.trim():"User"},role(){return L.A.getRole()}},methods:{_debounce(e,t=200){let s=null;return(...a)=>{s&&clearTimeout(s),s=setTimeout(()=>e.apply(this,a),t)}},async fetchUnreadCount(){try{let e=_["default"].get("authToken");e&&"object"===typeof e&&e.token&&(e=e.token),"string"!==typeof e&&(e="");const t=e?{headers:{Authorization:`Bearer ${e}`}}:{},s=await A.A.get("/api/notifications/unread",t);let a=0;s&&s.data&&(Array.isArray(s.data)?a=s.data.length:Array.isArray(s.data.unread)?a=s.data.unread.length:Array.isArray(s.data.notifications)&&(a=s.data.notifications.filter(e=>!e.read_at).length)),this.notificationCount=a,_["default"].set("notificationCount",String(a))}catch(e){}},async fetchAssessmentName(e){if(e&&!this.assessmentNameCache[e]&&!this.assessmentNameFetching[e]){this.assessmentNameFetching={...this.assessmentNameFetching,[e]:!0};try{const a="http://127.0.0.1:8000";let i=_["default"].get("authToken");i&&"object"===typeof i&&i.token&&(i=i.token);const o=i?{headers:{Authorization:`Bearer ${i}`}}:{};try{const t=await A.A.get(`${a}/api/assessments`,o),s=t&&t.data?t.data:null;let i=null;if(Array.isArray(s)?i=s:s&&(Array.isArray(s.assessments)?i=s.assessments:Array.isArray(s.data)?i=s.data:Array.isArray(s.items)&&(i=s.items)),Array.isArray(i)){const t=i.find(t=>String(t.id)===String(e)||String(t.assessment_id)===String(e));if(t&&(t.name||t.title)){const s=t.name||t.title||"";this.$set(this.assessmentNameCache,String(e),s)}}}catch(t){try{const t=await A.A.get(`${a}/api/assessments/${e}`,o),s=t&&t.data?t.data:null,i=s&&(s.assessment||s)?s.assessment||s:null;i&&i.id&&i.name&&this.$set(this.assessmentNameCache,i.id.toString(),i.name)}catch(s){}}this.assessmentNameCache[e]&&this.$forceUpdate&&this.$forceUpdate()}catch(a){}finally{const t={...this.assessmentNameFetching};delete t[e],this.assessmentNameFetching=t}}},async fetchLeadName(e){if(!e)return null;if(this.leadNameFetching[e])return null;this.leadNameFetching={...this.leadNameFetching,[e]:!0};try{const t="http://127.0.0.1:8000";let s=_["default"].get("authToken");s&&"object"===typeof s&&s.token&&(s=s.token);const a=s?{headers:{Authorization:`Bearer ${s}`}}:{},i=await A.A.get(`${t}/api/leads/${e}`,a),o=i&&i.data?i.data:null,n=o&&o.lead?o.lead:o;if(n){const t=((n.first_name||"")+" "+(n.last_name||"")).trim()||n.contact||n.email||"";t&&this.isNavbarAlive&&(this.leadNameCache={...this.leadNameCache,[e]:t})}}catch(t){}finally{if(this.isNavbarAlive){const t={...this.leadNameFetching};delete t[e],this.leadNameFetching=t}}return null},async fetchOrgName(e){if(!e)return null;if(this.orgNameFetching[e])return null;this.orgNameFetching={...this.orgNameFetching,[e]:!0};try{const t="http://127.0.0.1:8000";let s=_["default"].get("authToken");s&&"object"===typeof s&&s.token&&(s=s.token);const a=s?{headers:{Authorization:`Bearer ${s}`}}:{},i=await A.A.get(`${t}/api/organizations/${e}`,a),o=i&&i.data?i.data:null,n=o&&o.organization?o.organization:o;if(n){const t=n.org_name||n.name||n.title||"";t&&this.isNavbarAlive&&(this.orgNameCache={...this.orgNameCache,[e]:t})}}catch(t){}finally{if(this.isNavbarAlive){const t={...this.orgNameFetching};delete t[e],this.orgNameFetching=t}}return null},toggleDropdown(){this.dropdownOpen=!this.dropdownOpen},handleClickOutside(e){this.dropdownOpen&&this.$refs.dropdownWrapper&&!this.$refs.dropdownWrapper.contains(e.target)&&(this.dropdownOpen=!1)},confirmLogout(e){e.stopPropagation(),this.showLogoutConfirm=!0,this.dropdownOpen=!1},handleLogoutYes(){_["default"].get("superAuthToken")?(_["default"].set("authToken",_["default"].get("superAuthToken")),_["default"].set("role",_["default"].get("superRole")),_["default"].set("userName",_["default"].get("superUserName")),_["default"].set("userId",_["default"].get("superUserId")),_["default"].set("first_name",_["default"].get("superFirstName")||""),_["default"].set("last_name",_["default"].get("superLastName")||""),_["default"].remove("superAuthToken"),_["default"].remove("superRole"),_["default"].remove("superUserName"),_["default"].remove("superUserId"),_["default"].remove("superFirstName"),_["default"].remove("superLastName"),this.showLogoutConfirm=!1,this.$router.push("/user-permission")):(_["default"].clear(),this.showLogoutConfirm=!1,this.$router.push({name:"Login"}))},handleLogoutCancel(){this.showLogoutConfirm=!1},logout(){this.showLogoutConfirm=!1,this.$router.push({name:"Login"})},checkScreen(){this.isVerySmallScreen=window.innerWidth<=420},updateNotificationCount(){const e=Number(_["default"].get("notificationCount"));this.notificationCount=isNaN(e)?0:e},goToProfile(){this.dropdownOpen=!1,this.$router.push({name:"Profile"})}},watch:{showLogoutConfirm(e){e?document.body.classList.add("logout-overlay-active"):document.body.classList.remove("logout-overlay-active")},$route(e){"AssessmentSummary"===e.name&&e.params.assessmentId&&this.fetchAssessmentName(e.params.assessmentId)}},mounted(){this.isNavbarAlive=!0,document.addEventListener("mousedown",this.handleClickOutside),window.addEventListener("resize",this.checkScreen),this.checkScreen(),this.updateNotificationCount(),_["default"].get("showDashboardWelcome")&&(this.fetchUnreadCount(),_["default"].remove("showDashboardWelcome")),this._boundFetchUnread=this.fetchUnreadCount.bind(this),this._boundUpdateNotificationCount=this.updateNotificationCount.bind(this),this._boundAuthUpdated=this._debounce(()=>{this.roleName=L.A.getRole(),this.updateNotificationCount();try{this.fetchUnreadCount()}catch(e){}this.$forceUpdate&&this.$forceUpdate()},500),this._boundFetchUnread=this._debounce(this.fetchUnreadCount.bind(this),500),window.addEventListener("notification-updated",this._boundFetchUnread),window.addEventListener("auth-updated",this._boundAuthUpdated),window.addEventListener("storage",this._boundUpdateNotificationCount),"AssessmentSummary"===this.$route.name&&this.$route.params.assessmentId&&this.fetchAssessmentName(this.$route.params.assessmentId),this.showLogoutConfirm&&document.body.classList.add("logout-overlay-active"),this.$root&&this.$root.$on&&this.$root.$on("page-title-override",e=>{this.overridePageTitle=e})},beforeDestroy(){this.isNavbarAlive=!1,document.removeEventListener("mousedown",this.handleClickOutside),window.removeEventListener("resize",this.checkScreen),this._boundUpdateNotificationCount&&window.removeEventListener("storage",this._boundUpdateNotificationCount),this._boundFetchUnread&&window.removeEventListener("notification-updated",this._boundFetchUnread),this._boundAuthUpdated&&window.removeEventListener("auth-updated",this._boundAuthUpdated),document.body.classList.remove("logout-overlay-active"),this.$root&&this.$root.$off&&this.$root.$off("page-title-override")}};var C=s(6262);const P=(0,C.A)(S,[["render",w],["__scopeId","data-v-09663984"]]),N=P},1259:(e,t,s)=>{"use strict";e.exports=s.p+"img/AssessmentsOn.16eda574.svg"},1456:(e,t,s)=>{"use strict";s.d(t,{A:()=>g});var a=s(641),i=s(33),o=s(3751);const n={class:"form-input-icon"},r=["type","placeholder","readonly","disabled"],l={key:1,class:"form-input-noicon-wrap"},d=["type","placeholder","readonly","disabled"];function u(e,t,s,u,c,m){const h=(0,a.g2)("FormBox");return(0,a.uX)(),(0,a.Wv)(h,{error:s.error},{default:(0,a.k6)(()=>[s.icon?((0,a.uX)(),(0,a.CE)(a.FK,{key:0},[(0,a.Lk)("span",n,[(0,a.Lk)("i",{class:(0,i.C4)(s.icon)},null,2)]),(0,a.bo)((0,a.Lk)("input",(0,a.v6)(e.$attrs,{type:s.type,placeholder:s.placeholder,"onUpdate:modelValue":t[0]||(t[0]=e=>m.inputValue=e),readonly:s.readonly,disabled:s.disabled,class:s.icon?"form-input with-icon":"form-input",onInput:t[1]||(t[1]=t=>e.$emit("update:modelValue",m.inputValue))}),null,16,r),[[o.hp,m.inputValue]])],64)):((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bo)((0,a.Lk)("input",(0,a.v6)(e.$attrs,{type:s.type,placeholder:s.placeholder,"onUpdate:modelValue":t[2]||(t[2]=e=>m.inputValue=e),readonly:s.readonly,disabled:s.disabled,class:"form-input",onInput:t[3]||(t[3]=t=>e.$emit("update:modelValue",m.inputValue))}),null,16,d),[[o.hp,m.inputValue]])]))]),_:1},8,["error"])}var c=s(3654);const m={name:"FormInput",components:{FormBox:c.A},props:{modelValue:[String,Number],type:{type:String,default:"text"},placeholder:{type:String,default:""},icon:{type:String,default:""},error:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},computed:{inputValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}},methods:{focus(){this.$nextTick(()=>{const e=this.$el&&this.$el.querySelector("input");e&&"function"===typeof e.focus&&e.focus()})}}};var h=s(6262);const p=(0,h.A)(m,[["render",u],["__scopeId","data-v-19cf8bf2"]]),g=p},1609:(e,t,s)=>{"use strict";s.d(t,{A:()=>h});var a=s(641),i=s(33),o=s(3751);const n={key:0,class:"common-modal-overlay"},r={class:"common-modal-title"},l={class:"common-modal-actions"};function d(e,t,s,d,u,c){return s.visible?((0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",{class:"common-modal-card",style:(0,i.Tr)(c.computedModalStyle)},[(0,a.Lk)("button",{class:"common-modal-close",onClick:t[0]||(t[0]=t=>e.$emit("close"))}," × "),(0,a.Lk)("h2",r,[(0,a.RG)(e.$slots,"title",{},void 0,!0)]),(0,a.Lk)("form",{class:"common-modal-form",onSubmit:t[1]||(t[1]=(0,o.D$)(t=>e.$emit("submit"),["prevent"]))},[(0,a.RG)(e.$slots,"default",{},void 0,!0),(0,a.Lk)("div",l,[(0,a.RG)(e.$slots,"actions",{},void 0,!0)])],32)],4)])):(0,a.Q3)("",!0)}const u={name:"CommonModal",props:{visible:{type:Boolean,default:!1},modalMinWidth:{type:[String,Number],default:void 0},modalMaxWidth:{type:[String,Number],default:void 0},modalPadding:{type:String,default:void 0}},computed:{computedModalStyle(){const e={};return this.modalPadding&&(e.padding=this.modalPadding),void 0!==this.modalMinWidth&&(e.minWidth="number"===typeof this.modalMinWidth?`${this.modalMinWidth}px`:this.modalMinWidth),void 0!==this.modalMaxWidth&&(e.maxWidth="number"===typeof this.modalMaxWidth?`${this.modalMaxWidth}px`:this.modalMaxWidth),e}}};var c=s(6262);const m=(0,c.A)(u,[["render",d],["__scopeId","data-v-76435722"]]),h=m},2124:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(641);const i={class:"form-label"};function o(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("label",i,[(0,a.RG)(e.$slots,"default",{},void 0,!0)])}const n={name:"FormLabel"};var r=s(6262);const l=(0,r.A)(n,[["render",o],["__scopeId","data-v-41c6425a"]]),d=l},2435:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var a=s(641),i=s(3751);const o={class:"page"},n={class:"lead-capture-outer"},r={class:"lead-capture-card"},l={class:"lead-capture-actions"};function d(e,t,s,d,u,c){const m=(0,a.g2)("FormLabel"),h=(0,a.g2)("FormInput"),p=(0,a.g2)("FormRow"),g=(0,a.g2)("FormDropdown"),f=(0,a.g2)("MainLayout");return(0,a.uX)(),(0,a.Wv)(f,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",o,[(0,a.Lk)("div",n,[(0,a.Lk)("div",r,[t[30]||(t[30]=(0,a.Lk)("h3",{class:"lead-capture-card-title"},"Enter Lead Details",-1)),(0,a.Lk)("form",{class:"lead-capture-form",onSubmit:t[13]||(t[13]=(0,i.D$)((...e)=>c.handleSaveLead&&c.handleSaveLead(...e),["prevent"]))},[(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[14]||(t[14]=[(0,a.eW)("First Name",-1)])]),_:1}),(0,a.bF)(h,{modelValue:u.form.firstName,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.firstName=e),icon:"fas fa-user",placeholder:"Type here"},null,8,["modelValue"])]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[15]||(t[15]=[(0,a.eW)("Last Name",-1)])]),_:1}),(0,a.bF)(h,{modelValue:u.form.lastName,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.lastName=e),icon:"fas fa-user",placeholder:"Type here"},null,8,["modelValue"])]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[16]||(t[16]=[(0,a.eW)("Email",-1)])]),_:1}),(0,a.bF)(h,{modelValue:u.form.email,"onUpdate:modelValue":t[2]||(t[2]=e=>u.form.email=e),icon:"fas fa-envelope",type:"email",placeholder:"abc@gmail.com"},null,8,["modelValue"])])]),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[17]||(t[17]=[(0,a.eW)("Phone",-1)])]),_:1}),(0,a.bF)(h,{modelValue:u.form.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>u.form.phone=e),icon:"fas fa-phone",placeholder:"Type here"},null,8,["modelValue"])]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[18]||(t[18]=[(0,a.eW)("How did you find us?",-1)])]),_:1}),(0,a.bF)(g,{modelValue:u.form.findUs,"onUpdate:modelValue":t[4]||(t[4]=e=>u.form.findUs=e),icon:"fas fa-search",options:[{value:"Google",text:"Google"},{value:"Friend",text:"Friend"},{value:"Colleague",text:"Colleague"},{value:"Other",text:"Other"}]},null,8,["modelValue"])]),t[19]||(t[19]=(0,a.Lk)("div",null,null,-1))]),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[20]||(t[20]=[(0,a.eW)("Organization Name",-1)])]),_:1}),(0,a.bF)(h,{modelValue:u.form.orgName,"onUpdate:modelValue":t[5]||(t[5]=e=>u.form.orgName=e),icon:"fas fa-cog",placeholder:"Flexi-Finders"},null,8,["modelValue"])]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[21]||(t[21]=[(0,a.eW)("Organization Size",-1)])]),_:1}),(0,a.bF)(g,{modelValue:u.form.orgSize,"onUpdate:modelValue":t[6]||(t[6]=e=>u.form.orgSize=e),icon:"fas fa-users",options:[{value:"Large",text:"250+ Employees (Large)"},{value:"Medium",text:"100-249 Employees (Medium)"},{value:"Small",text:"1-99 Employees (Small)"}]},null,8,["modelValue"])]),t[22]||(t[22]=(0,a.Lk)("div",null,null,-1))]),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[23]||(t[23]=[(0,a.eW)("Address Line",-1)])]),_:1}),(0,a.bF)(h,{modelValue:u.form.address,"onUpdate:modelValue":t[7]||(t[7]=e=>u.form.address=e),icon:"fas fa-map-marker-alt",placeholder:"153, Maggie Loop Pottsville"},null,8,["modelValue"])]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[24]||(t[24]=[(0,a.eW)("Country",-1)])]),_:1}),(0,a.bF)(g,{modelValue:u.form.country_id,"onUpdate:modelValue":t[8]||(t[8]=e=>u.form.country_id=e),icon:"fas fa-globe",onChange:c.onCountryChange,options:[{value:null,text:"Select",disabled:!0},...u.countries.map(e=>({value:e.id,text:e.name}))]},null,8,["modelValue","onChange","options"])]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[25]||(t[25]=[(0,a.eW)("State",-1)])]),_:1}),(0,a.bF)(g,{modelValue:u.form.state_id,"onUpdate:modelValue":t[9]||(t[9]=e=>u.form.state_id=e),icon:"fas fa-map-marker-alt",onChange:c.onStateChange,options:[{value:null,text:"Select",disabled:!0},...u.states.map(e=>({value:e.id,text:e.name}))]},null,8,["modelValue","onChange","options"])])]),_:1}),(0,a.bF)(p,null,{default:(0,a.k6)(()=>[(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[26]||(t[26]=[(0,a.eW)("City",-1)])]),_:1}),(0,a.bF)(g,{modelValue:u.form.city_id,"onUpdate:modelValue":t[10]||(t[10]=e=>u.form.city_id=e),icon:"fas fa-map-marker-alt",options:[{value:null,text:"Select",disabled:!0},...u.cities.map(e=>({value:e.id,text:e.name}))]},null,8,["modelValue","options"])]),(0,a.Lk)("div",null,[(0,a.bF)(m,null,{default:(0,a.k6)(()=>[...t[27]||(t[27]=[(0,a.eW)("Zip Code",-1)])]),_:1}),(0,a.bF)(h,{modelValue:u.form.zip,"onUpdate:modelValue":t[11]||(t[11]=e=>u.form.zip=e),icon:"fas fa-map-marker-alt",placeholder:"Enter PIN code"},null,8,["modelValue"])]),t[28]||(t[28]=(0,a.Lk)("div",null,null,-1))]),_:1}),(0,a.Lk)("div",l,[(0,a.Lk)("button",{type:"button",class:"org-edit-cancel",onClick:t[12]||(t[12]=t=>e.$router.push("/leads"))}," Cancel "),t[29]||(t[29]=(0,a.Lk)("button",{type:"submit",class:"org-edit-update"}," Save Lead ",-1))])],32)])])])]),_:1})}var u=s(2724),c=s(8608),m=s(4335);const h={name:"LeadCapture",components:{MainLayout:u.A,FormRow:c.fh,FormLabel:c.lR,FormInput:c.ZQ,FormDropdown:c.ad,FormBox:c.CQ,FormPassword:c.Q4},data(){return{showPassword:!1,form:{firstName:"",lastName:"",email:"",phone:"",password:"",findUs:"",orgName:"",orgSize:"",address:"",country_id:null,state_id:null,city_id:null,zip:""},countries:[],states:[],cities:[],loading:!1,successMessage:"",errorMessage:""}},watch:{"form.country_id"(e){console.log("[LeadCapture] [FRONTEND] country_id changed:",e,"type:",typeof e)}},methods:{togglePassword(){this.showPassword=!this.showPassword},async fetchCountries(){const e="http://127.0.0.1:8000";console.log("[LeadCapture] [FRONTEND] Fetching countries...");const t=await m.A.get(`${e}/api/countries`);this.countries=t.data,console.log("[LeadCapture] [FRONTEND] Countries fetched:",this.countries)},async fetchStates(){if(!this.form.country_id)return this.states=[],void console.log("[LeadCapture] [FRONTEND] No country selected, states cleared.");const e="http://127.0.0.1:8000";console.log(`[LeadCapture] [FRONTEND] Fetching states for country_id: ${this.form.country_id}`);const t=await m.A.get(`${e}/api/states?country_id=${this.form.country_id}`);this.states=t.data,console.log("[LeadCapture] [FRONTEND] States fetched:",this.states)},async fetchCities(){if(!this.form.state_id)return this.cities=[],void console.log("[LeadCapture] [FRONTEND] No state selected, cities cleared.");const e="http://127.0.0.1:8000";console.log(`[LeadCapture] [FRONTEND] Fetching cities for state_id: ${this.form.state_id}`);const t=await m.A.get(`${e}/api/cities?state_id=${this.form.state_id}`);this.cities=t.data,console.log("[LeadCapture] [FRONTEND] Cities fetched:",this.cities)},onCountryChange(){let e=this.form.country_id;if(null!==e&&""!==e&&"number"!==typeof e){const t=Number(e);isNaN(t)||(this.form.country_id=t,e=t)}console.log("[LeadCapture] [FRONTEND] Country changed:",e,"type:",typeof e),e&&"number"===typeof e?(this.form.state_id=null,this.form.city_id=null,this.states=[],this.cities=[],this.fetchStates()):(this.form.state_id=null,this.form.city_id=null,this.states=[],this.cities=[],console.log("[LeadCapture] [FRONTEND] No country selected, states cleared."))},onStateChange(){let e=this.form.state_id;if(null!==e&&""!==e&&"number"!==typeof e){const t=Number(e);isNaN(t)||(this.form.state_id=t,e=t)}console.log("[LeadCapture] [FRONTEND] State changed:",e,"type:",typeof e),e&&"number"===typeof e?(this.form.city_id=null,this.cities=[],this.fetchCities()):(this.form.city_id=null,this.cities=[],console.log("[LeadCapture] [FRONTEND] No state selected, cities cleared."))},async handleSaveLead(){this.loading=!0,this.successMessage="",this.errorMessage="";try{const e=s(3193)["default"],t=e.get("authToken");if(!t)return this.errorMessage="Authentication token not found. Please log in.",void(this.loading=!1);const a="http://127.0.0.1:8000",i=await m.A.post(`${a}/api/leads`,{first_name:this.form.firstName,last_name:this.form.lastName,email:this.form.email,phone:this.form.phone,password:this.form.password,find_us:this.form.findUs,org_name:this.form.orgName,org_size:this.form.orgSize,address:this.form.address,country_id:this.form.country_id,state_id:this.form.state_id,city_id:this.form.city_id,zip:this.form.zip},{headers:{Authorization:`Bearer ${t}`}});this.successMessage=i.data.message||"Lead saved successfully!",this.resetForm(),this.$router.push("/leads")}catch(e){if(console.error("Error saving lead:",e),e.response&&e.response.data){if(this.errorMessage=e.response.data.message||"Failed to save lead.",e.response.data.errors)for(const t in e.response.data.errors)this.errorMessage+=` ${e.response.data.errors[t][0]}`}else this.errorMessage="An unexpected error occurred."}finally{this.loading=!1}},resetForm(){this.form={firstName:"",lastName:"",email:"",phone:"",password:"",findUs:"",orgName:"",orgSize:"",address:"",country_id:"",state_id:"",city_id:"",zip:""},this.states=[],this.cities=[]}},mounted(){this.fetchCountries()}};var p=s(6262);const g=(0,p.A)(h,[["render",d],["__scopeId","data-v-b419edf2"]]),f=g},2687:(e,t,s)=>{"use strict";e.exports=s.p+"img/MyOrganizationOff.9686cffd.svg"},2724:(e,t,s)=>{"use strict";s.d(t,{A:()=>C});var a=s(641),i=s(33);const o=s.p+"img/ExpandLines.6ac00fd3.svg",n={class:"main-layout"},r={class:"page-content"};function l(e,t,s,l,d,u){const c=(0,a.g2)("Navbar"),m=(0,a.g2)("Sidebar"),h=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("div",{class:"sidebar-circle-btn",onClick:t[0]||(t[0]=(...e)=>u.toggleSidebar&&u.toggleSidebar(...e)),style:(0,i.Tr)({left:u.sidebarBtnLeft})},[...t[1]||(t[1]=[(0,a.Lk)("img",{src:o,alt:"Menu",class:"sidebar-circle-icon"},null,-1)])],4),(0,a.Lk)("div",{class:(0,i.C4)(["main-content",{"sidebar-expanded":d.sidebarExpanded}])},[(0,a.bF)(c,{class:"fixed-navbar",sidebarExpanded:d.sidebarExpanded},null,8,["sidebarExpanded"]),(0,a.bF)(m,{role:d.userRole,expanded:d.sidebarExpanded},null,8,["role","expanded"]),(0,a.Lk)("div",r,[(0,a.RG)(e.$slots,"default",{},void 0,!0)]),(0,a.bF)(h,{class:"sticky-footer",style:{"z-index":"1",position:"relative","pointer-events":"none",background:"transparent"}})],2)])}var d=s(9924),u=s(606),c=s(3130);const m={class:"footer-box"},h={key:0,class:"footer-logo-text-vertical center-footer-logo-block"},p={key:1,class:"footer-logo-text-vertical center-footer-logo-block"};function g(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("footer",m,[(0,a.Lk)("div",{class:(0,i.C4)(["footer-controls",{"footer-controls-flex":!s.withPagination}])},[s.withPagination?((0,a.uX)(),(0,a.CE)("div",h,[...t[0]||(t[0]=[(0,a.Lk)("img",{src:c,alt:"Logo",class:"footer-logo-vertical responsive-footer-logo"},null,-1),(0,a.Lk)("span",{class:"footer-text-vertical"},"©2025 Dolphin | All Rights Reserved",-1)])])):((0,a.uX)(),(0,a.CE)("div",p,[...t[1]||(t[1]=[(0,a.Lk)("img",{src:c,alt:"Logo",class:"footer-logo-vertical responsive-footer-logo"},null,-1),(0,a.Lk)("span",{class:"footer-text-vertical"},"©2025 Dolphin | All Rights Reserved",-1)])]))],2)])}const f={name:"Footer",props:{withPagination:{type:Boolean,default:!1}}};var b=s(6262);const y=(0,b.A)(f,[["render",g],["__scopeId","data-v-410008f8"]]),k=y;var v=s(888),w=s(9063),L=s(4220),_=s(3193);const A={name:"MainLayout",components:{Sidebar:d.A,Navbar:u.A,Footer:k,Toast:w.A},data(){return{userRole:L.A.getRole()||"User",sidebarExpanded:!1,windowWidth:window.innerWidth}},computed:{sidebarBtnLeft(){return this.windowWidth<=900?this.sidebarExpanded?"calc(120px - 15px)":"calc(45px - 15px)":this.sidebarExpanded?"calc(200px - 15px)":"calc(65px - 15px)"}},methods:{toggleSidebar(){this.sidebarExpanded=!this.sidebarExpanded,_["default"].set("sidebarExpanded",this.sidebarExpanded?"1":"0")},collapseSidebar(){this.sidebarExpanded=!1,_["default"].set("sidebarExpanded","0")},handleResize(){this.windowWidth=window.innerWidth}},mounted(){window.addEventListener("resize",this.handleResize);const e=_["default"].get("sidebarExpanded");this.sidebarExpanded="1"===e,this.$app&&this.$app.use&&this.$app.use(v.A)},beforeDestroy(){window.removeEventListener("resize",this.handleResize)}},S=(0,b.A)(A,[["render",l],["__scopeId","data-v-fd14362e"]]),C=S},2820:(e,t,s)=>{"use strict";e.exports=s.p+"img/AnnouncementsOff.e3e00f39.svg"},3130:(e,t,s)=>{"use strict";e.exports=s.p+"img/Logo.b8bcb480.svg"},3143:(e,t,s)=>{"use strict";e.exports=s.p+"img/AssessmentsOff.7491a6d5.svg"},3193:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(1396),i=s.n(a);const o={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://127.0.0.1:8000",BASE_URL:"/"}.VUE_APP_STORAGE_KEY||"dolphin_secret_key",n={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://127.0.0.1:8000",BASE_URL:"/"}.VUE_APP_LOGOUT_BROADCAST_KEY||"dolphin_logout",r={_logoutListeners:new Set,set(e,t){try{const a=JSON.stringify(t);try{const t=i().AES.encrypt(a,o).toString();localStorage.setItem(e,t)}catch(s){console.warn(`Encryption failed for key "${e}". Storing as plain text.`,s),localStorage.setItem(e,a)}}catch(s){console.error(`Could not stringify value for key "${e}".`,s)}},get(e){const t=localStorage.getItem(e);if(!t)return null;const s="string"===typeof t&&0===t.indexOf("U2FsdGVk");if(s)try{const e=i().AES.decrypt(t,o),s=e.toString(i().enc.Utf8);return s?JSON.parse(s):null}catch(a){return t}try{return JSON.parse(t)}catch(a){return t}},remove(e){localStorage.removeItem(e)},clear(){localStorage.clear()},broadcastLogout(){try{localStorage.setItem(n,String(Date.now()))}catch(e){console.error("Failed to broadcast logout:",e)}try{this.clear()}catch(e){}this._notifyLogoutListeners()},onLogout(e){"function"===typeof e&&this._logoutListeners.add(e)},offLogout(e){"function"===typeof e&&this._logoutListeners.delete(e)},_notifyLogoutListeners(){for(const t of Array.from(this._logoutListeners))try{t()}catch(e){console.error("Logout listener error:",e)}}};window.addEventListener("storage",e=>{if(e.key&&e.key===n){try{r.clear()}catch(t){}r._notifyLogoutListeners()}});const l=r},3378:(e,t,s)=>{"use strict";e.exports=s.p+"img/LeadOn.d05ebf4c.svg"},3654:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(641),i=s(33);function o(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("div",{class:(0,i.C4)(["form-box",{"form-box--error":s.error}])},[(0,a.RG)(e.$slots,"default",{},void 0,!0)],2)}const n={name:"FormBox",props:{error:{type:Boolean,default:!1}}};var r=s(6262);const l=(0,r.A)(n,[["render",o],["__scopeId","data-v-06d74534"]]),d=l},3714:(e,t,s)=>{"use strict";s.d(t,{A:()=>p});var a=s(641),i=s(33),o=s(3751);const n={class:"form-box",ref:"dropdownRoot"},r={key:0,class:"form-input-icon"},l=["placeholder","value","disabled"],d=["onClick"];function u(e,t,s,u,c,m){return(0,a.uX)(),(0,a.CE)("div",n,[s.icon?((0,a.uX)(),(0,a.CE)("span",r,[(0,a.Lk)("i",{class:(0,i.C4)(s.icon)},null,2)])):(0,a.Q3)("",!0),(0,a.Lk)("input",{type:"text",placeholder:s.placeholder,readonly:"",value:m.selectedLabel,class:"form-input-with-icon",onClick:t[0]||(t[0]=(...e)=>m.toggleDropdown&&m.toggleDropdown(...e)),disabled:s.disabled,style:(0,i.Tr)(m.inputStyle)},null,12,l),t[2]||(t[2]=(0,a.Lk)("span",{class:"form-dropdown-chevron"},[(0,a.Lk)("i",{class:"fas fa-chevron-down"})],-1)),c.showDropdown?((0,a.uX)(),(0,a.Wv)(a.Im,{key:1,to:"body"},[(0,a.Lk)("div",{ref:"dropdownEl",class:"dropdown-list",style:(0,i.Tr)(c.dropdownStyle)},[(0,a.bo)((0,a.Lk)("input",{class:"dropdown-search",placeholder:"Search","onUpdate:modelValue":t[1]||(t[1]=e=>c.search=e)},null,512),[[o.Jo,c.search]]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(m.filteredOptions,e=>((0,a.uX)(),(0,a.CE)("div",{key:e.value,class:"dropdown-item",onClick:t=>m.selectOption(e)},[(0,a.Lk)("span",null,(0,i.v_)(e.text),1)],8,d))),128))],4)])):(0,a.Q3)("",!0)],512)}const c={name:"FormDropdown",props:{modelValue:[String,Number],options:{type:Array,required:!1,default:null},icon:{type:String,default:""},placeholder:{type:String,default:"Select"},disabled:{type:Boolean,default:!1},paddingLeft:{type:[Number,String],default:36},paddingRight:{type:[Number,String],default:36}},data(){return{showDropdown:!1,search:"",dropdownStyle:{}}},computed:{selectedLabel(){if(this.options&&this.options.length){const e=this.options.find(e=>e.value===this.modelValue);return e?e.text:this.placeholder}return this.placeholder},inputStyle(){const e=Number(this.paddingLeft)||36,t=Number(this.paddingRight)||36;return{padding:`0 ${t}px 0 ${e}px`}},filteredOptions(){let e=[];if(this.options&&this.options.length)e=this.options;else if(this.$slots.default){const t=this.$slots.default();e=t.filter(e=>"option"===e.type&&e.props&&void 0!==e.props.value).map(e=>({value:e.props.value,text:"string"===typeof e.children?e.children:Array.isArray(e.children)?e.children.join(""):""}))}return this.search?e.filter(e=>(e.text||"").toLowerCase().includes(this.search.toLowerCase())):e}},methods:{toggleDropdown(){this.disabled||(this.showDropdown=!this.showDropdown,this.showDropdown&&this.$nextTick(()=>this.updateDropdownPosition()))},selectOption(e){this.$emit("update:modelValue",e.value),this.$emit("change",e.value),this.showDropdown=!1,this.search=""},handleClickOutside(e){if(!this.showDropdown)return;const t=this.$refs.dropdownRoot,s=this.$refs.dropdownEl,a=t&&t.contains(e.target),i=s&&s.contains(e.target);a||i||(this.showDropdown=!1)},updateDropdownPosition(){const e=this.$refs.dropdownRoot,t=this.$refs.dropdownEl;if(!e||!t)return;const s=e.getBoundingClientRect(),a=s.bottom+window.scrollY+6,i=s.left+window.scrollX,o=s.width;this.dropdownStyle={position:"absolute",top:`${a}px`,left:`${i}px`,width:`${o}px`,zIndex:99999}}},mounted(){document.addEventListener("mousedown",this.handleClickOutside),window.addEventListener("resize",this.updateDropdownPosition),window.addEventListener("scroll",this.updateDropdownPosition,!0)},watch:{showDropdown(e){e&&this.$nextTick(()=>this.updateDropdownPosition())}},beforeUnmount(){document.removeEventListener("mousedown",this.handleClickOutside),window.removeEventListener("resize",this.updateDropdownPosition),window.removeEventListener("scroll",this.updateDropdownPosition,!0)}};var m=s(6262);const h=(0,m.A)(c,[["render",u],["__scopeId","data-v-6f8fecb0"]]),p=h},3718:(e,t,s)=>{"use strict";e.exports=s.p+"img/DashboardOn.c3ed0869.svg"},4051:(e,t,s)=>{"use strict";s.d(t,{A:()=>f});var a=s(641),i=s(3751);const o={class:"schedule-demo-schedule-inputs",style:{display:"flex",gap:"24px",width:"100%","justify-content":"flex-start"}},n={class:"form-box",style:{width:"338px","min-width":"0"}},r={class:"form-input-noicon-wrap"},l=["placeholder"],d={class:"form-box",style:{width:"338px","min-width":"0"}},u={class:"form-input-noicon-wrap"},c=["placeholder"];function m(e,t,s,m,h,p){return(0,a.uX)(),(0,a.CE)("div",o,[(0,a.Lk)("div",n,[(0,a.Lk)("div",r,[(0,a.bo)((0,a.Lk)("input",{type:"date",placeholder:s.datePlaceholder,class:"form-input","onUpdate:modelValue":t[0]||(t[0]=e=>p.dateValue=e),onInput:t[1]||(t[1]=t=>e.$emit("update:date",p.dateValue))},null,40,l),[[i.Jo,p.dateValue]])])]),(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.bo)((0,a.Lk)("input",{type:"time",placeholder:s.timePlaceholder,class:"form-input","onUpdate:modelValue":t[2]||(t[2]=e=>p.timeValue=e),onInput:t[3]||(t[3]=t=>e.$emit("update:time",p.timeValue))},null,40,c),[[i.Jo,p.timeValue]])])])])}const h={name:"FormDateTime",props:{date:{type:String,default:""},time:{type:String,default:""},datePlaceholder:{type:String,default:"MM/DD/YYYY"},timePlaceholder:{type:String,default:"00:00"}},computed:{dateValue:{get(){return this.date},set(e){this.$emit("update:date",e)}},timeValue:{get(){return this.time},set(e){this.$emit("update:time",e)}}}};var p=s(6262);const g=(0,p.A)(h,[["render",m],["__scopeId","data-v-7ac9120e"]]),f=g},4220:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(6939),i=s(3193);const o={loginAny(e,t="superadmin"){return i["default"].set("role",t),i["default"].set("name",e.split("@")[0]||"User"),i["default"].set("email",e),!0},isAuthenticated(){const e=i["default"].get("role");return!!e&&Object.values(a.gg).includes(e)},getRole(){return i["default"].get("role")||""},canAccess(e,t){const s=i["default"].get("role");return(0,a.Zf)(s,e,t)}},n=o},4682:(e,t,s)=>{"use strict";e.exports=s.p+"img/Image.c62cbb17.svg"},5753:(e,t,s)=>{"use strict";e.exports=s.p+"img/VectorUp.73e120cf.svg"},6236:(e,t,s)=>{"use strict";e.exports=s.p+"img/DashboardOff.9c2c91ae.svg"},6686:(e,t,s)=>{"use strict";e.exports=s.p+"img/AnnouncementsOn.cff9a84e.svg"},6747:(e,t,s)=>{"use strict";e.exports=s.p+"img/Organizations+AdminsOn.01fe8cd8.svg"},6915:(e,t,s)=>{"use strict";e.exports=s.p+"img/Training&ResourcesOn.aa246fc7.svg"},6939:(e,t,s)=>{"use strict";s.d(t,{Jj:()=>i,Zf:()=>o,gg:()=>a});const a={SUPERADMIN:"superadmin",DOLPHINADMIN:"dolphinadmin",USER:"user",ORGANIZATIONADMIN:"organizationadmin",SALESPERSON:"salesperson"},i={[a.SUPERADMIN]:{routes:["/dashboard","/organizations","/notifications","/leads","/leads/send-assessment","/leads/send-assessment/:id","/leads/schedule-demo","/leads/schedule-class-training","/organizations/:orgName","/organizations/:orgName","/organizations/:id","/organizations/:orgName/edit","/organizations/:id/edit","/leads/lead-capture","/leads/:id/edit","/leads/:email","/members","/my-organization/members","/assessments/send-assessment","/assessments/send-assessment/:id","/assessments/:assessmentId/summary","/user-permission","/user-permission/add","/organizations/billing-details","/profile"]},[a.DOLPHINADMIN]:{routes:["/dashboard","/leads","/leads/send-assessment","/leads/send-assessment/:id","/leads/schedule-demo","/leads/schedule-class-training","/leads/lead-capture","/leads/:id/edit","/leads/:email","/assessments/send-assessment","/assessments/send-assessment/:id","/assessments/:assessmentId/summary","/get-notification","/subscriptions/plans","/organizations/billing-details","/profile"]},[a.USER]:{routes:["/dashboard","/assessments","/assessments/:assessmentId/summary","/get-notification","/subscriptions/plans","/organizations/billing-details","/profile","/subscriptions/plans","/manage-subscription"]},[a.ORGANIZATIONADMIN]:{routes:["/dashboard","/my-organization","/training-resources","/assessments","/members","/my-organization/members","/assessments","/assessments/:assessmentId/summary","/get-notification","/subscriptions/plans","/organizations/billing-details","/profile"]},[a.SALESPERSON]:{routes:["/dashboard","/leads","/leads/send-assessment","/leads/send-assessment/:id","/assessments/send-assessment","/assessments/send-assessment/:id","/assessments/:assessmentId/summary","/get-notification","/subscriptions/plans","/organizations/billing-details","/profile","/subscriptions/plans","/manage-subscription"]}};function o(e,t,s){return!!i[e]&&("routes"===t?i[e][t].some(e=>{if(e===s)return!0;const t=new RegExp("^"+e.replace(/:[^/]+/g,"[^/]+")+"$");return t.test(s)}):i[e][t]&&i[e][t].includes(s))}},7087:(e,t,s)=>{"use strict";e.exports=s.p+"img/Users+PermissionsOff.1edf9255.svg"},7392:(e,t,s)=>{"use strict";e.exports=s.p+"img/Lines.7c893dea.svg"},7420:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var a=s(641);const i={class:"form-row"};function o(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.RG)(e.$slots,"default",{},void 0,!0)])}const n={name:"FormRow"};var r=s(6262);const l=(0,r.A)(n,[["render",o],["__scopeId","data-v-4abb1284"]]),d=l},8406:(e,t,s)=>{"use strict";s.d(t,{A:()=>m});var a=s(641),i=s(33),o=s(3751);const n=s.p+"img/up-down.53d62c9d.svg",r=["role","tabindex","onClick","onKeyup"];function l(e,t,s,l,d,u){return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.Lk)("colgroup",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.columns,(e,t)=>((0,a.uX)(),(0,a.CE)("col",{key:"col-"+(e.key||t),class:(0,i.C4)(e.width?"col-fixed":""),style:(0,i.Tr)(e.width?{width:"number"===typeof e.width?e.width+"px":e.width}:null)},null,6))),128))]),(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s.columns,(t,l)=>((0,a.uX)(),(0,a.CE)("th",{key:t.key||l,class:(0,i.C4)([0===l?"rounded-th-left":"",l===s.columns.length-1?"rounded-th-right":"",t.width?"col-fixed":""]),role:t.sortable?"button":null,tabindex:t.sortable?0:null,onClick:s=>!0===t.sortable?e.$emit("sort",t.key):null,onKeyup:(0,o.jR)(s=>!0===t.sortable?e.$emit("sort",t.key):null,["enter"])},[(0,a.Lk)("span",{class:(0,i.C4)(["org-th-content",t.sortable?"org-th-sortable":"",s.activeSortKey===t.key?"sorted":""])},[(0,a.eW)((0,i.v_)(t.label)+" ",1),!0===t.sortable?((0,a.uX)(),(0,a.CE)("img",{key:0,src:n,class:(0,i.C4)(["org-th-sort",s.activeSortKey===t.key?s.sortAsc?"asc":"desc":""]),alt:"Sort"},null,2)):(0,a.Q3)("",!0)],2)],42,r))),128))])])],64)}const d={name:"TableHeader",emits:["sort"],props:{columns:{type:Array,required:!0},activeSortKey:{type:String,default:null},sortAsc:{type:Boolean,default:!0}}};var u=s(6262);const c=(0,u.A)(d,[["render",l],["__scopeId","data-v-30b5dd22"]]),m=c},8608:(e,t,s)=>{"use strict";s.d(t,{CQ:()=>a.A,Ui:()=>b.A,ad:()=>o.A,ZQ:()=>i.A,lR:()=>r.A,Q4:()=>f,fh:()=>n.A});var a=s(3654),i=s(1456),o=s(3714),n=s(7420),r=s(2124),l=s(641),d=s(3751),u=s(33);const c=["type","placeholder"];function m(e,t,s,a,i,o){const n=(0,l.g2)("FormBox");return(0,l.uX)(),(0,l.Wv)(n,{error:s.error},{default:(0,l.k6)(()=>[t[3]||(t[3]=(0,l.Lk)("span",{class:"form-input-icon"},[(0,l.Lk)("i",{class:"fas fa-lock"})],-1)),(0,l.bo)((0,l.Lk)("input",(0,l.v6)({type:i.show?"text":"password"},e.$attrs,{"onUpdate:modelValue":t[0]||(t[0]=e=>o.inputValue=e),placeholder:s.placeholder,class:"form-input",onInput:t[1]||(t[1]=t=>e.$emit("update:modelValue",o.inputValue))}),null,16,c),[[d.hp,o.inputValue]]),(0,l.Lk)("i",{class:(0,u.C4)(["fas",i.show?"fa-eye-slash":"fa-eye","input-eye"]),onClick:t[2]||(t[2]=e=>i.show=!i.show)},null,2)]),_:1},8,["error"])}const h={name:"FormPassword",components:{FormBox:a.A},props:{modelValue:String,placeholder:{type:String,default:""},error:{type:Boolean,default:!1}},data(){return{show:!1}},computed:{inputValue:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}};var p=s(6262);const g=(0,p.A)(h,[["render",m],["__scopeId","data-v-fae437e6"]]),f=g;var b=s(4051)},8621:(e,t,s)=>{"use strict";var a=s(3751),i=s(641);const o={id:"app"};function n(e,t,s,a,n,r){const l=(0,i.g2)("Toast"),d=(0,i.g2)("router-view");return(0,i.uX)(),(0,i.CE)("div",o,[(0,i.bF)(l),((0,i.uX)(),(0,i.Wv)((0,i.$y)(r.layoutComponent),null,{default:(0,i.k6)(()=>[(0,i.bF)(d)]),_:1}))])}var r=s(2724);const l={name:"App",computed:{layoutComponent(){const e=this.$route.meta.layout;return"main"===e?r.A:"div"}}};var d=s(6262);const u=(0,d.A)(l,[["render",n]]),c=u;var m=s(5220),h=s(33),p=s(7392),g=s(4682),f=s(3130);const b={class:"login-bg"},y={class:"login-card"},k={class:"input-group email-group"},v={class:"input-group password-group"},w=["type"],L={class:"options-row"},_={class:"switch-auth"},A={class:"footer"},S={class:"copyright"};function C(e,t,s,o,n,r){const l=(0,i.g2)("Toast"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",b,[(0,i.bF)(l),t[14]||(t[14]=(0,i.Lk)("img",{src:p,alt:"Lines",class:"bg-lines"},null,-1)),t[15]||(t[15]=(0,i.Lk)("img",{src:g,alt:"Illustration",class:"bg-illustration"},null,-1)),(0,i.Lk)("div",y,[t[12]||(t[12]=(0,i.Lk)("h2",{class:"login-title"},"Welcome Back",-1)),t[13]||(t[13]=(0,i.Lk)("p",{class:"login-subtitle"},"Please login to your account",-1)),(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,a.D$)((...e)=>r.handleLogin&&r.handleLogin(...e),["prevent"]))},[(0,i.Lk)("div",k,[t[4]||(t[4]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-envelope"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),placeholder:"Email ID",autocomplete:"username",required:""},null,512),[[a.Jo,n.email]])]),(0,i.Lk)("div",v,[t[5]||(t[5]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-lock"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:n.showPassword?"text":"password","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),placeholder:"Password",autocomplete:"current-password",required:""},null,8,w),[[a.hp,n.password]]),(0,i.Lk)("span",{class:"icon right",onClick:t[2]||(t[2]=(...e)=>r.togglePassword&&r.togglePassword(...e))},[(0,i.Lk)("i",{class:(0,h.C4)(n.showPassword?"fas fa-eye":"fas fa-eye-slash")},null,2)])]),(0,i.Lk)("div",L,[t[7]||(t[7]=(0,i.Lk)("label",{class:"remember-label"},[(0,i.Lk)("input",{type:"checkbox"}),(0,i.eW)(" Remember me ")],-1)),(0,i.bF)(d,{to:"/forgot-password",class:"forgot-password"},{default:(0,i.k6)(()=>[...t[6]||(t[6]=[(0,i.eW)("Forgot Password?",-1)])]),_:1})]),t[8]||(t[8]=(0,i.Lk)("button",{type:"submit",class:"login-btn"}," Login ",-1))],32),(0,i.Lk)("div",_,[t[10]||(t[10]=(0,i.Lk)("span",null,"Don't have an account?",-1)),(0,i.bF)(d,{to:"/register",class:"switch-link"},{default:(0,i.k6)(()=>[...t[9]||(t[9]=[(0,i.eW)("Register here",-1)])]),_:1})]),(0,i.Lk)("div",A,[t[11]||(t[11]=(0,i.Lk)("img",{src:f,alt:"Dolphin Logo",class:"footer-logo"},null,-1)),(0,i.Lk)("p",S," © "+(0,h.v_)(n.currentYear)+" All Rights Reserved By Dolphin ",1)])])])}var P=s(4335),N=s(6939),z=s(9063),E=s(3080),D=s(3193),F=s(9205);const $="http://127.0.0.1:8000",M={name:"Login",components:{Toast:z.A},setup(){const e=(0,E.d)();return{toast:e}},data(){return{email:"",password:"",showPassword:!1,currentYear:(new Date).getFullYear()}},mounted(){this.$route.query.email&&(this.email=this.$route.query.email),this.$route.query.registrationSuccess&&this.toast.add({severity:"success",summary:"Registration Successful",detail:"Please log in with your new account.",life:3e3});const e={...this.$route.query};delete e.email,delete e.registrationSuccess,this.$router.replace({query:e}).catch(()=>{});const t=D["default"].get("authToken");t&&(0,F.fetchCurrentUser)().then(e=>{e?(e.role&&D["default"].set("role",e.role),this.$router.push("/dashboard").catch(()=>{})):D["default"].remove("authToken")}).catch(()=>{})},methods:{togglePassword(){this.showPassword=!this.showPassword},async handleLogin(){try{const e=await P.A.post(`${$}/api/login`,{email:this.email,password:this.password}),t=e.data.token,s=e.data.user.role,a=e.data.user.name,i=e.data.user.first_name||"",o=e.data.user.last_name||"";D["default"].set("authToken",t),D["default"].set("role",s),D["default"].set("first_name",i),D["default"].set("last_name",o),i||o?D["default"].set("userName",`${i}${o?" "+o:""}`.trim()):D["default"].set("userName",a),D["default"].set("showDashboardWelcome","1"),this.toast.add({severity:"success",summary:"Login Successful",detail:`Welcome, ${i||""}${o?" "+o:i?"":a}!`,life:3e3}),this.$router.push("/dashboard")}catch(e){console.error("Login failed:",e);let t="Login failed. Please check your credentials.";e.response&&e.response.data&&e.response.data.message&&(t=e.response.data.message),this.toast.add({severity:"error",summary:"Login Error",detail:t,life:4e3})}}}},x=(0,d.A)(M,[["render",C],["__scopeId","data-v-3603bd9b"]]),I=x,T={class:"login-bg"},U={class:"login-card"},V={class:"input-group name-group"},O={class:"input-group name-group"},R={class:"input-group email-group"},X={class:"input-group phone-group"},W={class:"input-group org-name-group"},B={class:"input-group org-country-group styled-select"},G={class:"input-group org-findus-group"},j={class:"input-group org-country-group styled-select"},K={class:"input-group org-state-group styled-select"},q={class:"input-group org-city-group styled-select"},Q={class:"input-group org-address-group"},Y={class:"input-group org-country-group styled-select"},H={class:"input-group org-zip-group"},J={class:"input-group password-group"},Z=["type"],ee={class:"input-group password-group"},te=["type"],se={class:"switch-auth"},ae={class:"footer"},ie={class:"copyright"};function oe(e,t,s,o,n,r){const l=(0,i.g2)("Toast"),d=(0,i.g2)("FormLabel"),u=(0,i.g2)("FormDropdown"),c=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",T,[(0,i.bF)(l),t[50]||(t[50]=(0,i.Lk)("img",{src:p,alt:"Lines",class:"bg-lines"},null,-1)),t[51]||(t[51]=(0,i.Lk)("img",{src:g,alt:"Illustration",class:"bg-illustration"},null,-1)),(0,i.Lk)("div",U,[t[48]||(t[48]=(0,i.Lk)("h2",{class:"login-title"},"Create Account",-1)),t[49]||(t[49]=(0,i.Lk)("p",{class:"login-subtitle"},"Please fill in the details to register",-1)),1===n.step?((0,i.uX)(),(0,i.CE)("form",{key:0,onSubmit:t[4]||(t[4]=(0,a.D$)((...e)=>r.goToStep2&&r.goToStep2(...e),["prevent"]))},[(0,i.Lk)("div",null,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[21]||(t[21]=[(0,i.eW)("First Name",-1)])]),_:1}),(0,i.Lk)("div",V,[t[22]||(t[22]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-user"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>n.first_name=e),placeholder:"First Name",ref:"firstNameInput",required:""},null,512),[[a.Jo,n.first_name]])])]),(0,i.Lk)("div",null,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[23]||(t[23]=[(0,i.eW)("Last Name",-1)])]),_:1}),(0,i.Lk)("div",O,[t[24]||(t[24]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-user"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>n.last_name=e),placeholder:"Last Name",required:""},null,512),[[a.Jo,n.last_name]])])]),(0,i.Lk)("div",null,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[25]||(t[25]=[(0,i.eW)("Email ID",-1)])]),_:1}),(0,i.Lk)("div",R,[t[26]||(t[26]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-envelope"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>n.email=e),placeholder:"Email ID",required:""},null,512),[[a.Jo,n.email]])])]),(0,i.Lk)("div",null,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[27]||(t[27]=[(0,i.eW)("Phone Number",-1)])]),_:1}),(0,i.Lk)("div",X,[t[28]||(t[28]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-phone"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"tel","onUpdate:modelValue":t[3]||(t[3]=e=>n.phone=e),placeholder:"Phone Number",required:""},null,512),[[a.Jo,n.phone]])])]),t[29]||(t[29]=(0,i.Lk)("button",{type:"submit",class:"login-btn"}," Next ",-1))],32)):2===n.step?((0,i.uX)(),(0,i.CE)("form",{key:1,onSubmit:t[14]||(t[14]=(0,a.D$)((...e)=>r.goToStep3&&r.goToStep3(...e),["prevent"]))},[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[30]||(t[30]=[(0,i.eW)("Organization Name",-1)])]),_:1}),(0,i.Lk)("div",W,[t[31]||(t[31]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-building"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>n.organization_name=e),placeholder:"Organization Name",ref:"orgNameInput",required:""},null,512),[[a.Jo,n.organization_name]])]),(0,i.Lk)("div",B,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[32]||(t[32]=[(0,i.eW)("Organization Size",-1)])]),_:1}),(0,i.bF)(u,{modelValue:n.organization_size,"onUpdate:modelValue":t[6]||(t[6]=e=>n.organization_size=e),icon:"fas fa-users",options:[{value:"",text:"Select Organization Size",disabled:!0},{value:"Large",text:"250+ Employees (Large)"},{value:"Medium",text:"100-249 Employees (Medium)"},{value:"Small",text:"1-99 Employees (Small)"}]},null,8,["modelValue"])]),(0,i.Lk)("div",G,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[33]||(t[33]=[(0,i.eW)("How did you find us?",-1)])]),_:1}),(0,i.bF)(u,{modelValue:n.find_us,"onUpdate:modelValue":t[7]||(t[7]=e=>n.find_us=e),icon:"fas fa-search",options:[{value:null,text:"Select",disabled:!0},...n.findUsOptions.length?n.findUsOptions.map(e=>({value:e,text:e})):[{value:"Google",text:"Google"},{value:"Friend",text:"Friend"},{value:"Colleague",text:"Colleague"},{value:"Other",text:"Other"}]]},null,8,["modelValue","options"])]),(0,i.Lk)("div",j,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[34]||(t[34]=[(0,i.eW)("Country",-1)])]),_:1}),(0,i.bF)(u,{modelValue:n.country,"onUpdate:modelValue":t[8]||(t[8]=e=>n.country=e),icon:"fas fa-globe",options:[{value:null,text:"Select",disabled:!0},...n.countries.map(e=>({value:e.id,text:e.name}))],onChange:r.onCountryChange},null,8,["modelValue","options","onChange"])]),(0,i.Lk)("div",K,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[35]||(t[35]=[(0,i.eW)("State",-1)])]),_:1}),(0,i.bF)(u,{modelValue:n.organization_state,"onUpdate:modelValue":t[9]||(t[9]=e=>n.organization_state=e),icon:"fas fa-flag",options:[{value:null,text:"Select",disabled:!0},...n.states.map(e=>({value:e.id,text:e.name}))],onChange:r.onStateChange},null,8,["modelValue","options","onChange"])]),(0,i.Lk)("div",q,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[36]||(t[36]=[(0,i.eW)("City",-1)])]),_:1}),(0,i.bF)(u,{modelValue:n.organization_city,"onUpdate:modelValue":t[10]||(t[10]=e=>n.organization_city=e),icon:"fas fa-city",options:[{value:null,text:"Select",disabled:!0},...n.cities.map(e=>({value:e.id,text:e.name}))]},null,8,["modelValue","options"])]),(0,i.Lk)("div",null,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[37]||(t[37]=[(0,i.eW)("Organization Address",-1)])]),_:1}),(0,i.Lk)("div",Q,[t[38]||(t[38]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-map-marker-alt"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[11]||(t[11]=e=>n.organization_address=e),placeholder:"Organization Address",required:""},null,512),[[a.Jo,n.organization_address]])])]),(0,i.Lk)("div",Y,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[...t[39]||(t[39]=[(0,i.eW)("Zip Code",-1)])]),_:1}),(0,i.Lk)("div",H,[t[40]||(t[40]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-mail-bulk"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"text","onUpdate:modelValue":t[12]||(t[12]=e=>n.organization_zip=e),placeholder:"Zip Code",required:""},null,512),[[a.Jo,n.organization_zip]])])]),(0,i.Lk)("button",{type:"button",class:"login-btn",onClick:t[13]||(t[13]=(...e)=>r.goToStep1&&r.goToStep1(...e)),style:{"margin-bottom":"8px"}}," Back "),t[41]||(t[41]=(0,i.Lk)("button",{type:"submit",class:"login-btn"}," Next ",-1))],32)):3===n.step?((0,i.uX)(),(0,i.CE)("form",{key:2,onSubmit:t[20]||(t[20]=(0,a.D$)((...e)=>r.handleRegister&&r.handleRegister(...e),["prevent"]))},[(0,i.Lk)("div",J,[t[42]||(t[42]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-lock"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:n.showPassword?"text":"password","onUpdate:modelValue":t[15]||(t[15]=e=>n.password=e),placeholder:"Password",required:""},null,8,Z),[[a.hp,n.password]]),(0,i.Lk)("span",{class:"icon right",onClick:t[16]||(t[16]=e=>n.showPassword=!n.showPassword),style:{"user-select":"none"}},[(0,i.Lk)("i",{class:(0,h.C4)(n.showPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),(0,i.Lk)("div",ee,[t[43]||(t[43]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-lock"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:n.showConfirmPassword?"text":"password","onUpdate:modelValue":t[17]||(t[17]=e=>n.confirm_password=e),placeholder:"Confirm Password",required:""},null,8,te),[[a.hp,n.confirm_password]]),(0,i.Lk)("span",{class:"icon right",onClick:t[18]||(t[18]=e=>n.showConfirmPassword=!n.showConfirmPassword),style:{"user-select":"none"}},[(0,i.Lk)("i",{class:(0,h.C4)(n.showConfirmPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),(0,i.Lk)("button",{type:"button",class:"login-btn",onClick:t[19]||(t[19]=(...e)=>r.goToStep2&&r.goToStep2(...e)),style:{"margin-bottom":"8px"}}," Back "),t[44]||(t[44]=(0,i.Lk)("button",{type:"submit",class:"login-btn"}," Register ",-1))],32)):(0,i.Q3)("",!0),(0,i.Lk)("div",se,[t[46]||(t[46]=(0,i.Lk)("span",null,"Already have an account?",-1)),(0,i.bF)(c,{to:"/login",class:"switch-link"},{default:(0,i.k6)(()=>[...t[45]||(t[45]=[(0,i.eW)("Login here",-1)])]),_:1})]),(0,i.Lk)("div",ae,[t[47]||(t[47]=(0,i.Lk)("img",{src:f,alt:"Dolphin Logo",class:"footer-logo"},null,-1)),(0,i.Lk)("p",ie," © "+(0,h.v_)(n.currentYear)+" All Rights Reserved By Dolphin ",1)])])])}var ne=s(8608);const re="http://127.0.0.1:8000",le={name:"Register",components:{Toast:z.A,FormLabel:ne.lR,FormDropdown:ne.ad,FormRow:ne.fh},setup(){const e=(0,E.d)();return{toast:e}},data(){return{step:1,first_name:"",last_name:"",email:"",phone:"",password:"",confirm_password:"",organization_name:"",organization_size:"",organization_address:"",organization_city:null,organization_state:null,organization_zip:"",country:null,countries:[],states:[],cities:[],currentYear:(new Date).getFullYear(),find_us:"",findUsOptions:[],showPassword:!1,showConfirmPassword:!1}},methods:{goToStep3(){this.step=3},goToStep2(){this.step=2,this.$nextTick(()=>{setTimeout(()=>{this.$refs.orgNameInput&&this.focusRef("orgNameInput")},50)})},goToStep1(){this.step=1,this.$nextTick(()=>{setTimeout(()=>{this.$refs.firstNameInput&&this.focusRef("firstNameInput")},50)})},focusRef(e){const t=this.$refs[e];if(t){try{if("function"===typeof t.focus)return void t.focus()}catch(s){}try{const e=t.$el||t,s=e&&e.querySelector?e.querySelector("input"):null;if(s&&"function"===typeof s.focus)return void s.focus();if(e&&"function"===typeof e.focus)return void e.focus()}catch(s){}}},async handleRegister(){try{const e=await P.A.post(`${re}/api/register`,{first_name:this.first_name,last_name:this.last_name,email:this.email,phone:this.phone,password:this.password,confirm_password:this.confirm_password,org_name:this.organization_name,org_size:this.organization_size,address:this.organization_address,city:this.organization_city,state:this.organization_state,zip:this.organization_zip,country:this.country,find_us:this.find_us});201===e.status&&this.$router.push({name:"Login",query:{email:this.email,registrationSuccess:!0}})}catch(e){console.error("Registration failed:",e);let t="Registration failed. Please try again.";if(e.response&&e.response.data){const s=e.response.data;if(console.error("Registration error response data:",s),s.message&&(t=s.message),s.errors)t=Object.values(s.errors).flat().join(" ");else if("object"===typeof s){const e=Object.values(s).flat();e.length&&(t=e.join(" "))}else"string"===typeof s&&(t=s);422===e.response.status&&console.warn("Validation failed (422) during registration")}else e.message&&(t=e.message);this.toast.add({severity:"error",summary:"Registration Error",detail:t,life:6e3})}},async prefillFromLead(){const e=this.$route.query;let t=!1;if((e.first_name||e.last_name||e.phone||e.organization_name||e.find_us)&&(e.country&&(this.country=e.country),e.first_name&&(this.first_name=e.first_name),e.last_name&&(this.last_name=e.last_name),e.email&&(this.email=e.email),e.phone&&(this.phone=e.phone),e.organization_name&&(this.organization_name=e.organization_name),e.organization_size&&(this.organization_size=e.organization_size),e.organization_address&&(this.organization_address=e.organization_address),e.organization_city&&(this.organization_city=e.organization_city),e.organization_state&&(this.organization_state=e.organization_state),e.organization_zip&&(this.organization_zip=e.organization_zip),e.find_us&&(this.find_us=e.find_us),this.find_us&&(this.find_us=this.normalizeFindUs(this.find_us)),this.organization_size&&(this.organization_size=this.normalizeOrgSize(this.organization_size)),t=!0),e.lead_id||e.token||e.email)try{const s=await P.A.get(`${re}/api/leads/prefill`,{params:{lead_id:e.lead_id,token:e.token,email:e.email}});if(s.data&&s.data.lead){const e=s.data.lead;this.first_name=e.first_name||"",this.last_name=e.last_name||"",this.email=e.email||"",this.phone=e.phone||"",this.organization_name=e.organization_name||"",this.organization_size=e.organization_size||"",this.organization_address=e.organization_address||"",this.country=e.country_id||e.country||this.country,this.organization_state=e.organization_state_id||e.state_id||e.organization_state||this.organization_state,this.organization_city=e.organization_city_id||e.city_id||e.organization_city||this.organization_city,this.organization_zip=e.organization_zip||"",this.find_us=e.find_us||"",this.find_us&&(this.find_us=this.normalizeFindUs(this.find_us)),this.organization_size&&(this.organization_size=this.normalizeOrgSize(this.organization_size)),t=!0}}catch(s){}t||(e.first_name&&(this.first_name=e.first_name),e.last_name&&(this.last_name=e.last_name),e.email&&(this.email=e.email),e.phone&&(this.phone=e.phone),e.organization_name&&(this.organization_name=e.organization_name),e.organization_size&&(this.organization_size=e.organization_size),e.organization_address&&(this.organization_address=e.organization_address),e.organization_city&&(this.organization_city=e.organization_city),e.organization_state&&(this.organization_state=e.organization_state),e.organization_zip&&(this.organization_zip=e.organization_zip),e.find_us&&(this.find_us=e.find_us))},normalizeOrgSize(e){if(!e&&0!==e)return"";const t=String(e).toLowerCase();return t.includes("250")||t.includes("large")?"Large":t.includes("100")||t.includes("medium")||t.includes("100-249")?"Medium":t.includes("1")||t.includes("small")||t.includes("1-99")?"Small":(["250+","100-249","1-99"].includes(e),e)},normalizeFindUs(e){if(!e&&0!==e)return"";const t=String(e).toLowerCase();return t.includes("google")?"Google":t.includes("Colleague")?"Colleague":t.includes("friend")||t.includes("referral")?"Friend":t.includes("other")?"Other":(["Google","Friend","Colleague","Other"].includes(e),e)},async fetchCountries(){const e="http://127.0.0.1:8000";try{const t=await P.A.get(`${e}/api/countries`);if(this.countries=t.data||[],this.country){const e=this.country;let t=null;const s=Number(e);if(isNaN(s)||0===s||(t=this.countries.find(e=>Number(e.id)===s)),!t){const s=String(e).toLowerCase();t=this.countries.find(e=>e.name&&String(e.name).toLowerCase()===s||e.iso&&String(e.iso).toLowerCase()===s)}t&&(this.country=Number(t.id),this.fetchStates())}}catch(t){console.warn("Failed to fetch countries",t)}},async fetchFindUsOptions(){try{const e=await P.A.get(`${re}/api/leads/find-us-options`),t=e.data&&e.data.options||[];this.findUsOptions=t.map(e=>{const t=String(e||"").trim();if(!t)return null;const s=t.toLowerCase();return s.includes("google")?"Google":s.includes("Colleague")?"Colleague":s.includes("friend")||s.includes("referral")?"Friend":s.includes("other")?"Other":t}).filter(Boolean),0===this.findUsOptions.length&&console.info("No find_us options found in leads")}catch(e){console.warn("Failed to fetch find_us options",e)}},async fetchStates(){if(!this.country)return void(this.states=[]);const e="http://127.0.0.1:8000",t=Number(this.country)||this.country;try{const s=await P.A.get(`${e}/api/states`,{params:{country_id:t}});if(this.states=s.data||[],this.organization_state){const e=this.organization_state;let t=null;const s=Number(e);if(isNaN(s)||0===s||(t=this.states.find(e=>Number(e.id)===s)),!t){const s=String(e).toLowerCase();t=this.states.find(e=>e.name&&String(e.name).toLowerCase()===s||e.code&&String(e.code).toLowerCase()===s)}t&&(this.organization_state=Number(t.id),this.fetchCities())}}catch(s){console.warn("Failed to fetch states",s),this.states=[]}},async fetchCities(){if(!this.organization_state)return void(this.cities=[]);const e="http://127.0.0.1:8000",t=Number(this.organization_state)||this.organization_state;try{const s=await P.A.get(`${e}/api/cities`,{params:{state_id:t}});if(this.cities=s.data||[],this.organization_city){const e=this.organization_city;let t=null;const s=Number(e);if(isNaN(s)||0===s||(t=this.cities.find(e=>Number(e.id)===s)),!t){const s=String(e).toLowerCase();t=this.cities.find(e=>e.name&&String(e.name).toLowerCase()===s||e.code&&String(e.code).toLowerCase()===s)}t&&(this.organization_city=Number(t.id))}}catch(s){console.warn("Failed to fetch cities",s),this.cities=[]}},onCountryChange(){if(null!==this.country&&""!==this.country&&"number"!==typeof this.country){const e=Number(this.country);isNaN(e)||(this.country=e)}this.organization_state=null,this.organization_city=null,this.states=[],this.cities=[],this.fetchStates()},onStateChange(){if(null!==this.organization_state&&""!==this.organization_state&&"number"!==typeof this.organization_state){const e=Number(this.organization_state);isNaN(e)||(this.organization_state=e)}this.organization_city=null,this.cities=[],this.fetchCities()}},async mounted(){await this.prefillFromLead(),await this.fetchCountries(),this.country&&await this.fetchStates(),this.organization_state&&await this.fetchCities(),await this.fetchFindUsOptions(),this.$nextTick(()=>{setTimeout(()=>{this.$refs.firstNameInput&&this.focusRef("firstNameInput")},50)})}},de=(0,d.A)(le,[["render",oe],["__scopeId","data-v-4dfc1884"]]),ue=de,ce={class:"thankyou-layout"},me={class:"main-content"},he={class:"thankyou-bg"},pe={class:"thankyou-card"},ge={class:"thankyou-footer"},fe=["src"];function be(e,t,a,o,n,r){const l=(0,i.g2)("Sidebar"),d=(0,i.g2)("Navbar");return(0,i.uX)(),(0,i.CE)("div",ce,[(0,i.bF)(l),(0,i.Lk)("div",me,[(0,i.bF)(d),(0,i.Lk)("div",he,[t[2]||(t[2]=(0,i.Lk)("div",{class:"left-illustration"},null,-1)),(0,i.Lk)("div",pe,[t[1]||(t[1]=(0,i.Fv)('<div class="check-circle" data-v-7f6f3aa1><svg width="56" height="56" viewBox="0 0 56 56" data-v-7f6f3aa1><circle cx="28" cy="28" r="28" fill="#2ecc40" data-v-7f6f3aa1></circle><polyline points="18,30 26,38 38,20" fill="none" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-7f6f3aa1></polyline></svg></div><h2 class="thankyou-title" data-v-7f6f3aa1>Thank You for your interest!</h2><div class="thankyou-desc" data-v-7f6f3aa1> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard. </div><div class="thankyou-touch" data-v-7f6f3aa1>We will be in touch.</div>',4)),(0,i.Lk)("div",ge,[(0,i.Lk)("img",{src:s(3130),alt:"Dolphin Logo",class:"footer-logo"},null,8,fe),t[0]||(t[0]=(0,i.Lk)("div",{class:"copyright"},"©2025 Dolphin | All Rights Reserved",-1))])]),t[3]||(t[3]=(0,i.Lk)("div",{class:"right-illustration"},null,-1))])])])}var ye=s(606),ke=s(9924);const ve={name:"ThankYou",components:{Sidebar:ke.A,Navbar:ye.A}},we=(0,d.A)(ve,[["render",be],["__scopeId","data-v-7f6f3aa1"]]),Le=we,_e={class:"thanks-page"},Ae={class:"thanks-card"},Se={class:"thanks-desc"},Ce={class:"thanks-footer"},Pe=["src"];function Ne(e,t,a,o,n,r){return(0,i.uX)(),(0,i.CE)("div",_e,[t[8]||(t[8]=(0,i.Lk)("img",{src:p,alt:"Lines",class:"bg-lines"},null,-1)),t[9]||(t[9]=(0,i.Lk)("img",{src:g,alt:"Illustration",class:"bg-illustration"},null,-1)),(0,i.Lk)("div",Ae,[t[7]||(t[7]=(0,i.Fv)('<div class="check-circle" data-v-b424d238><svg width="56" height="56" viewBox="0 0 56 56" data-v-b424d238><circle cx="28" cy="28" r="28" fill="#2ecc40" data-v-b424d238></circle><polyline points="18,30 26,38 38,20" fill="none" stroke="#fff" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" data-v-b424d238></polyline></svg></div><h2 class="thanks-title" data-v-b424d238>Thank You!</h2>',2)),(0,i.Lk)("div",Se,["1"===e.$route.query.already?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[t[0]||(t[0]=(0,i.eW)(" You have already submitted this assessment.",-1)),t[1]||(t[1]=(0,i.Lk)("br",null,null,-1)),t[2]||(t[2]=(0,i.eW)(" Duplicate submissions are not allowed. ",-1))],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[t[3]||(t[3]=(0,i.eW)(" Thank you for completing the assessment.",-1)),t[4]||(t[4]=(0,i.Lk)("br",null,null,-1)),t[5]||(t[5]=(0,i.eW)(" Your responses have been submitted successfully. ",-1))],64))]),(0,i.Lk)("div",Ce,[(0,i.Lk)("img",{src:s(3130),alt:"Dolphin Logo",class:"footer-logo"},null,8,Pe),t[6]||(t[6]=(0,i.Lk)("div",{class:"copyright"},"©2025 Dolphin | All Rights Reserved",-1))])])])}const ze={name:"ThanksPage"},Ee=(0,d.A)(ze,[["render",Ne],["__scopeId","data-v-b424d238"]]),De=Ee,Fe={class:"page"};function $e(e,t,s,a,o,n){const r=(0,i.g2)("Toast"),l=(0,i.g2)("OrgAdminGraphs"),d=(0,i.g2)("UserGraphs"),u=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(r),(0,i.Lk)("div",Fe,[n.isOrgAdmin?((0,i.uX)(),(0,i.Wv)(l,{key:0})):n.isUser?((0,i.uX)(),(0,i.Wv)(d,{key:1})):(0,i.Q3)("",!0)])]),_:1})}var Me=s(953),xe=s(4527),Ie=s(8508);const Te=["src","alt"],Ue=["onClick"];function Ve(e,t,a,o,n,r){return(0,i.uX)(),(0,i.CE)("div",{class:"dropdown-radio",style:(0,h.Tr)(r.widthStyle+"margin-right:0;"),ref:"dropdownRoot"},[(0,i.Lk)("button",{class:(0,h.C4)(["dropdown-radio-btn",{open:n.open}]),type:"button",tabindex:"0",style:(0,h.Tr)(r.widthStyle),onClick:t[0]||(t[0]=(...e)=>r.toggleDropdown&&r.toggleDropdown(...e))},[(0,i.Lk)("span",null,(0,h.v_)(r.displayLabel),1),(0,i.Lk)("img",{class:"dropdown-radio-arrow",src:n.open?s(5753):s(8634),alt:n.open?"Close":"Open"},null,8,Te)],6),n.open?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"dropdown-radio-list",style:(0,h.Tr)(r.dropdownListStyle)},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(a.options,e=>((0,i.uX)(),(0,i.CE)("button",{key:e.value,class:"dropdown-radio-option",type:"button",onClick:t=>r.selectOption(e.value)},[(0,i.Lk)("span",null,(0,h.v_)(e.label),1),(0,i.Lk)("span",{class:(0,h.C4)(["dropdown-radio-circle",{selected:n.internalValue===e.value}])},null,2)],8,Ue))),128))],4)):(0,i.Q3)("",!0)],4)}const Oe={name:"UniversalDropdown",props:{options:{type:Array,default:()=>[]},modelValue:{type:String,default:""},dropdownWidth:{type:Number,default:240}},emits:["update:modelValue"],data(){return{open:!1,internalValue:this.modelValue||this.options[0]?.value||""}},computed:{widthStyle(){return`width: ${this.dropdownWidth}px; min-width: ${this.dropdownWidth}px; max-width: ${this.dropdownWidth}px;`},displayLabel(){const e=this.options.find(e=>e.value===this.internalValue);return e?e.label:this.options[0]?.label||""},dropdownListStyle(){return`width: ${this.dropdownWidth}px; min-width: ${this.dropdownWidth}px; max-width: ${this.dropdownWidth}px;`}},watch:{modelValue(e){this.internalValue=e},internalValue(e){this.$emit("update:modelValue",e)}},methods:{toggleDropdown(){this.open=!this.open},selectOption(e){this.internalValue=e,this.open=!1},handleClickOutside(e){this.open&&!this.$el.contains(e.target)&&(this.open=!1)}},mounted(){document.addEventListener("mousedown",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("mousedown",this.handleClickOutside)}},Re=(0,d.A)(Oe,[["render",Ve],["__scopeId","data-v-1a35cb3d"]]),Xe=Re,We={class:"org-admin-graphs-outer"},Be={class:"org-admin-graphs-card"},Ge={class:"org-admin-graphs-content"},je={class:"graph-section"},Ke={class:"graph-controls"},qe={class:"graph-section"},Qe={class:"graph-controls"},Ye={__name:"OrgAdminGraphs",setup(e){Ie.t1.register(Ie.E8,Ie.PP,Ie.kc,Ie.m_,Ie.s$);const t=(0,Me.KR)("Entire Organization"),s=(0,Me.KR)("Q4-2024"),a=(0,Me.KR)("Single Department"),o=(0,Me.KR)("Q2-2024"),n=[{label:"Entire Organization",value:"Entire Organization"},{label:"Single Department",value:"Single Department"}],r=[{label:"Single Department",value:"Single Department"},{label:"Entire Organization",value:"Entire Organization"}],l=[{label:"Q1-2025",value:"Q1-2025"},{label:"Q2-2025",value:"Q2-2025"},{label:"Q3-2025",value:"Q3-2025"},{label:"Q4-2025",value:"Q4-2025"}],d=[60,100,40,40,20,60],u=[80,40,60,20,30,50],c={labels:["Info 1","Info 2","Info 3","Info 4","Info 5","Info 6"],datasets:[{label:"Hidden Culture",backgroundColor:"#0164A5",data:d,barPercentage:.7,categoryPercentage:.7}]},m={labels:["Info 1","Info 2","Info 3","Info 4","Info 5","Info 6"],datasets:[{label:"Current State",backgroundColor:"#0164A5",data:u,barPercentage:.7,categoryPercentage:.7}]},h={responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,max:100,ticks:{stepSize:20}}}};return(e,d)=>((0,i.uX)(),(0,i.CE)("div",We,[(0,i.Lk)("div",Be,[(0,i.Lk)("div",Ge,[(0,i.Lk)("div",je,[d[4]||(d[4]=(0,i.Lk)("div",{class:"org-admin-graphs-title"},"Hidden Culture",-1)),(0,i.Lk)("div",Ke,[(0,i.bF)(Xe,{options:n,modelValue:t.value,"onUpdate:modelValue":d[0]||(d[0]=e=>t.value=e)},null,8,["modelValue"]),(0,i.bF)(Xe,{options:l,modelValue:s.value,"onUpdate:modelValue":d[1]||(d[1]=e=>s.value=e)},null,8,["modelValue"])]),(0,i.bF)((0,Me.R1)(xe.yP),{data:c,options:h})]),(0,i.Lk)("div",qe,[d[5]||(d[5]=(0,i.Lk)("div",{class:"org-admin-graphs-title"},"Current State Graph",-1)),(0,i.Lk)("div",Qe,[(0,i.bF)(Xe,{options:r,modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=e=>a.value=e)},null,8,["modelValue"]),(0,i.bF)(Xe,{options:l,modelValue:o.value,"onUpdate:modelValue":d[3]||(d[3]=e=>o.value=e)},null,8,["modelValue"])]),(0,i.bF)((0,Me.R1)(xe.yP),{data:m,options:h})])])])]))}},He=(0,d.A)(Ye,[["__scopeId","data-v-2bc3a53c"]]),Je=He,Ze={class:"user-graphs-outer"},et={class:"user-graphs-card"},tt={class:"user-graphs-content"},st={class:"user-graph-section"},at={class:"user-graph-inner"},it={class:"user-graph-inner-header"},ot={class:"user-graph-section"},nt={class:"user-graph-inner"},rt={class:"user-graph-inner-header"},lt={__name:"UserGraphs",setup(e){Ie.t1.register(Ie.E8,Ie.PP,Ie.kc,Ie.m_,Ie.s$);const t={labels:["Info 1","Info 2","Info 3","Info 4","Info 5","Info 6"],datasets:[{label:"Original Self",backgroundColor:"#0164A5",data:[40,100,30,30,10,40],borderRadius:0,barPercentage:.7,categoryPercentage:.7}]},s={labels:["Info 1","Info 2","Info 3","Info 4","Info 5","Info 6"],datasets:[{label:"Adjusted Self",backgroundColor:"#0164A5",data:[40,60,40,10,20,30],borderRadius:0,barPercentage:.7,categoryPercentage:.7}]},a={responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0,max:100,ticks:{stepSize:20}}}},o=[{label:"Original Self 1",value:"Original Self 1"},{label:"Original Self 2",value:"Original Self 2"},{label:"Original Self 3",value:"Original Self 3"}],n=[{label:"Adjusted Self 1",value:"Adjusted Self 1"},{label:"Adjusted Self 2",value:"Adjusted Self 2"},{label:"Adjusted Self 3",value:"Adjusted Self 3"}],r=(0,Me.KR)("Original Self 1"),l=(0,Me.KR)("Adjusted Self 1");return(e,d)=>((0,i.uX)(),(0,i.CE)("div",Ze,[(0,i.Lk)("div",et,[(0,i.Lk)("div",tt,[(0,i.Lk)("div",st,[d[2]||(d[2]=(0,i.Lk)("div",{class:"user-graph-header"},"Original Self",-1)),(0,i.Lk)("div",at,[(0,i.Lk)("div",it,[(0,i.bF)(Xe,{mode:"radio",options:o,modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=e=>r.value=e)},null,8,["modelValue"])]),(0,i.bF)((0,Me.R1)(xe.yP),{data:t,options:a})])]),(0,i.Lk)("div",ot,[d[3]||(d[3]=(0,i.Lk)("div",{class:"user-graph-header"},"Adjusted Self",-1)),(0,i.Lk)("div",nt,[(0,i.Lk)("div",rt,[(0,i.bF)(Xe,{mode:"radio",options:n,modelValue:l.value,"onUpdate:modelValue":d[1]||(d[1]=e=>l.value=e)},null,8,["modelValue"])]),(0,i.bF)((0,Me.R1)(xe.yP),{data:s,options:a})])])])])]))}},dt=(0,d.A)(lt,[["__scopeId","data-v-2834c753"]]),ut=dt,ct={components:{MainLayout:r.A,OrgAdminGraphs:Je,UserGraphs:ut,Toast:z.A},setup(){const e=(0,E.d)();return{toast:e}},computed:{isOrgAdmin(){const e=s(3193)["default"],t=e.get("role");return"organizationadmin"===t||"superadmin"===t||"Dolphinadmin"===t},isUser(){const e=s(3193)["default"],t=e.get("role");return"user"===t||"salesperson"===t}}},mt=(0,d.A)(ct,[["render",$e]]),ht=mt,pt={class:"page"};function gt(e,t,s,a,o,n){const r=(0,i.g2)("OrganizationTable"),l=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(l,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",pt,[(0,i.bF)(r)])]),_:1})}const ft=s.p+"img/Detail.a366cc56.svg",bt={class:"table-outer"},yt={class:"table-card"},kt={class:"table-search-bar"},vt={class:"table-container"},wt={class:"table"},Lt=["onClick"];function _t(e,t,s,o,n,r){const l=(0,i.g2)("TableHeader"),d=(0,i.g2)("Pagination");return(0,i.uX)(),(0,i.CE)("div",bt,[(0,i.Lk)("div",yt,[(0,i.Lk)("div",kt,[(0,i.bo)((0,i.Lk)("input",{class:"org-search",placeholder:"Search Organization Name","onUpdate:modelValue":t[0]||(t[0]=e=>n.search=e)},null,512),[[a.Jo,n.search]])]),(0,i.Lk)("div",vt,[(0,i.Lk)("table",wt,[(0,i.bF)(l,{columns:[{label:"Organizations Name",key:"name",sortable:!0},{label:"Size",key:"size"},{label:"Admin Name",key:"main_contact"},{label:"Contract Start",key:"contractStart",sortable:!0},{label:"Contract End",key:"contractEnd",sortable:!0},{label:"Last Contacted",key:"last_contacted",sortable:!0},{label:"Action",key:"action"}],activeSortKey:n.sortKey,sortAsc:n.sortAsc,onSort:r.sortBy},null,8,["activeSortKey","sortAsc","onSort"]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedOrganizations,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,h.v_)(e.name),1),(0,i.Lk)("td",null,(0,h.v_)(e.size),1),(0,i.Lk)("td",null,(0,h.v_)(e.main_contact),1),(0,i.Lk)("td",null,(0,h.v_)(r.formatDate(e.contractStart)),1),(0,i.Lk)("td",null,(0,h.v_)(r.formatDate(e.contractEnd)),1),(0,i.Lk)("td",null,(0,h.v_)(r.formatDateTime(e.last_contacted)),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn-view",onClick:t=>r.goToDetail(e)},[...t[2]||(t[2]=[(0,i.Lk)("img",{src:ft,alt:"View",class:"btn-view-icon"},null,-1),(0,i.eW)(" View Detail ",-1)])],8,Lt)])]))),128))])])])]),(0,i.bF)(d,{withPagination:!0,pageSize:n.pageSize,pageSizes:[10,25,100],showPageDropdown:n.showPageDropdown,currentPage:n.currentPage,totalPages:r.totalPages,paginationPages:r.paginationPages,onTogglePageDropdown:t[1]||(t[1]=e=>n.showPageDropdown=!n.showPageDropdown),onSelectPageSize:r.selectPageSize,onGoToPage:r.goToPage},null,8,["pageSize","showPageDropdown","currentPage","totalPages","paginationPages","onSelectPageSize","onGoToPage"])])}var At=s(280),St=s(8406);const Ct={name:"OrganizationTable",components:{Pagination:At.A,TableHeader:St.A},data(){return{search:"",showPageDropdown:!1,pageSize:10,currentPage:1,sortKey:"",sortAsc:!0,organizations:[]}},computed:{filteredOrganizations(){let e=this.organizations;return this.search&&(e=e.filter(e=>e.name.toLowerCase().includes(this.search.toLowerCase()))),this.sortKey&&(e=e.slice().sort((e,t)=>{let s=e[this.sortKey],a=t[this.sortKey];if("contractStart"===this.sortKey||"contractEnd"===this.sortKey||"last_contacted"===this.sortKey){const e=new Date(s),t=new Date(a);if(!isNaN(e)&&!isNaN(t))return this.sortAsc?e-t:t-e}return s<a?this.sortAsc?-1:1:s>a?this.sortAsc?1:-1:0})),e},totalPages(){return Math.ceil(this.filteredOrganizations.length/this.pageSize)||1},paginatedOrganizations(){const e=(this.currentPage-1)*this.pageSize;return this.filteredOrganizations.slice(e,e+this.pageSize)},paginationPages(){const e=[];return e.push(1,2,3,"...",8,9,10),e}},mounted(){this.fetchOrganizations()},methods:{async fetchOrganizations(){try{const e=(await Promise.resolve().then(s.bind(s,3193))).default,t=e.get("authToken"),a=t?{Authorization:`Bearer ${t}`}:{},i=(await s.e(110).then(s.bind(s,3110))).default,o=await i.get("http://127.0.0.1:8000/api/organizations",{headers:a});this.organizations=o.data.map(e=>({name:e.org_name,size:e.org_size||"",main_contact:e.main_contact||"",contractStart:e.contract_start||"",contractEnd:e.contract_end||"",last_contacted:e.last_contacted||"",id:e.id}))}catch(e){e.response&&401===e.response.status?(alert("Session expired or unauthorized. Please log in again."),this.$router.push({name:"Login"})):console.error("Error fetching organizations:",e),this.organizations=[]}},goToDetail(e){this.$router.push({name:"OrganizationDetail",params:{id:e.id}})},formatDate(e){if(!e)return null;const t=String(e).match(/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2}))?)?$/);let s;if(t){const e=parseInt(t[1],10),a=parseInt(t[2],10)-1,i=parseInt(t[3],10),o=t[4]?parseInt(t[4],10):0,n=t[5]?parseInt(t[5],10):0,r=t[6]?parseInt(t[6],10):0;s=new Date(Date.UTC(e,a,i,o,n,r))}else s=new Date(e);if(isNaN(s.getTime()))return null;const a=String(s.getDate()).padStart(2,"0"),i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],o=i[s.getMonth()],n=s.getFullYear();return`${a} ${o},${n}`},formatDateTime(e){if(!e)return null;const t=String(e).match(/^(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2})(?::(\d{2}))?)?$/);let s;if(t){const e=parseInt(t[1],10),a=parseInt(t[2],10)-1,i=parseInt(t[3],10),o=t[4]?parseInt(t[4],10):0,n=t[5]?parseInt(t[5],10):0,r=t[6]?parseInt(t[6],10):0;s=new Date(Date.UTC(e,a,i,o,n,r))}else s=new Date(e);if(isNaN(s.getTime()))return null;const a=String(s.getDate()).padStart(2,"0"),i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],o=i[s.getMonth()],n=s.getFullYear();let r=s.getHours();const l=String(s.getMinutes()).padStart(2,"0"),d=r>=12?"PM":"AM";r%=12,r=r||12;const u=`${r}:${l} ${d}`;return`${a} ${o},${n} ${u}`},goToPage(e){"..."===e||e<1||e>this.totalPages||(this.currentPage=e)},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},sortBy(e){this.sortKey===e?this.sortAsc=!this.sortAsc:(this.sortKey=e,this.sortAsc=!0)}}},Pt=(0,d.A)(Ct,[["render",_t],["__scopeId","data-v-3fe96d01"]]),Nt=Pt,zt={name:"Organizations",components:{MainLayout:r.A,OrganizationTable:Nt}},Et=(0,d.A)(zt,[["render",gt]]),Dt=Et,Ft=s.p+"img/SendNotification.0bde51c1.svg",$t={class:"page"},Mt={class:"table-outer"},xt={class:"table-card"},It={class:"table-header-bar"},Tt={class:"table-container"},Ut={class:"table"},Vt={class:"notification-body-cell"},Ot=["title"],Rt=["onClick"],Xt={key:0},Wt={class:"modal-card"},Bt={class:"modal-row"},Gt={class:"modal-field"},jt={class:"modal-field"},Kt={class:"modal-row"},qt={class:"schedule-demo-field schedule-demo-schedule-field"},Qt={class:"modal-row"},Yt={class:"modal-field"},Ht={class:"form-box"},Jt={class:"modal-field"},Zt={class:"form-box"},es={class:"modal-card"},ts={class:"detail-table"},ss={class:"detail-row"},as={class:"detail-value"},is={class:"detail-row"},os={class:"detail-value"},ns={class:"detail-row"},rs={class:"detail-value"},ls={class:"recipient-list"},ds={key:0},us={key:0},cs={class:"group-name"},ms={class:"recipient-info"},hs={class:"recipient-name"},ps={key:0,class:"recipient-email"},gs={key:1},fs={class:"recipient-info"},bs={class:"recipient-name"},ys={key:2,class:"section-sep"},ks={key:3},vs={class:"recipient-info"},ws={class:"recipient-name"},Ls={key:4},_s={class:"recipient-info"},As={class:"recipient-name"},Ss={key:0,class:"recipient-email"},Cs={key:5},Ps={class:"recipient-info"},Ns={class:"recipient-name"},zs={key:0,class:"recipient-email"},Es={class:"recipient-status"},Ds=["innerHTML"],Fs=["innerHTML"],$s={key:2,class:"status-icon pending"},Ms={key:0,class:"all-recipients"};function xs(e,t,s,o,n,r){const l=(0,i.g2)("Toast"),d=(0,i.g2)("TableHeader"),u=(0,i.g2)("Pagination"),c=(0,i.g2)("FormLabel"),m=(0,i.g2)("MultiSelectDropdown"),p=(0,i.g2)("FormInput"),g=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(g,null,{default:(0,i.k6)(()=>[(0,i.bF)(l),(0,i.Lk)("div",$t,[(0,i.Lk)("div",Mt,[(0,i.Lk)("div",xt,[(0,i.Lk)("div",It,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=e=>n.showSendModal=!0)},[...t[11]||(t[11]=[(0,i.Lk)("img",{src:Ft,alt:"Send",class:"notifications-add-btn-icon"},null,-1),(0,i.eW)(" Send Notification ",-1)])])]),(0,i.Lk)("div",Tt,[(0,i.Lk)("table",Ut,[(0,i.bF)(d,{columns:[{label:"Notification Title",key:"body",sortable:!0},{label:"Date & Time",key:"sent_at",width:"225px",sortable:!0},{label:"Action",key:"action"}],activeSortKey:n.sortKey,sortAsc:n.sortAsc,onSort:r.sortBy},null,8,["activeSortKey","sortAsc","onSort"]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedNotifications,(e,s)=>((0,i.uX)(),(0,i.CE)("tr",{key:s},[(0,i.Lk)("td",Vt,[(0,i.Lk)("span",{class:"notification-body-truncate",title:e.body},(0,h.v_)(e.body),9,Ot)]),(0,i.Lk)("td",null,(0,h.v_)(r.formatLocalDateTime(e.sent_at)),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn-view",onClick:t=>r.openDetail(e)},[...t[12]||(t[12]=[(0,i.Lk)("img",{src:ft,alt:"View",class:"btn-view-icon"},null,-1),(0,i.eW)(" View Detail ",-1)])],8,Rt)])]))),128)),0===r.paginatedNotifications.length?((0,i.uX)(),(0,i.CE)("tr",Xt,[...t[13]||(t[13]=[(0,i.Lk)("td",{colspan:"3",class:"no-data"}," No notifications found. ",-1)])])):(0,i.Q3)("",!0)])])])])])]),(0,i.bF)(u,{pageSize:n.pageSize,pageSizes:[10,25,100],showPageDropdown:n.showPageDropdown,currentPage:n.currentPage,totalPages:r.totalPages,paginationPages:r.paginationPages,onGoToPage:r.goToPage,onSelectPageSize:r.selectPageSize,onTogglePageDropdown:t[1]||(t[1]=e=>n.showPageDropdown=!n.showPageDropdown)},null,8,["pageSize","showPageDropdown","currentPage","totalPages","paginationPages","onGoToPage","onSelectPageSize"]),n.showSendModal?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"modal-overlay",onClick:t[8]||(t[8]=(0,a.D$)(e=>n.showSendModal=!1,["self"]))},[(0,i.Lk)("div",Wt,[(0,i.Lk)("button",{class:"modal-close-btn",onClick:t[2]||(t[2]=e=>n.showSendModal=!1)}," × "),t[17]||(t[17]=(0,i.Lk)("div",{class:"modal-title"},"Send Notifications",-1)),t[18]||(t[18]=(0,i.Lk)("div",{class:"modal-desc"}," Send a notification to selected organizations, admins, or groups. You can also schedule it for later. ",-1)),t[19]||(t[19]=(0,i.Lk)("textarea",{class:"modal-textarea",placeholder:"Type your notification here..."},null,-1)),(0,i.Lk)("div",Bt,[(0,i.Lk)("div",Gt,[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...t[14]||(t[14]=[(0,i.eW)("Select Organizations",-1)])]),_:1}),(0,i.bF)(m,{options:n.organizations||[],selectedItems:n.selectedOrganizations,"onUpdate:selectedItems":t[3]||(t[3]=e=>n.selectedOrganizations=e),"option-label":"org_name","option-value":"id",placeholder:"Select organizations",enableSelectAll:!0},null,8,["options","selectedItems"])]),(0,i.Lk)("div",jt,[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...t[15]||(t[15]=[(0,i.eW)("Select Group",-1)])]),_:1}),(0,i.bF)(m,{options:n.groups||[],selectedItems:n.selectedGroups,"onUpdate:selectedItems":t[4]||(t[4]=e=>n.selectedGroups=e),placeholder:"Select groups",enableSelectAll:!0},null,8,["options","selectedItems"])])]),(0,i.Lk)("div",Kt,[(0,i.Lk)("div",qt,[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...t[16]||(t[16]=[(0,i.eW)("Schedule",-1)])]),_:1}),(0,i.Lk)("div",Qt,[(0,i.Lk)("div",Yt,[(0,i.Lk)("div",Ht,[(0,i.bF)(p,{modelValue:n.scheduledDate,"onUpdate:modelValue":t[5]||(t[5]=e=>n.scheduledDate=e),type:"date",placeholder:"MM/DD/YYYY"},null,8,["modelValue"])])]),(0,i.Lk)("div",Jt,[(0,i.Lk)("div",Zt,[(0,i.bF)(p,{modelValue:n.scheduledTime,"onUpdate:modelValue":t[6]||(t[6]=e=>n.scheduledTime=e),type:"time",placeholder:"00:00"},null,8,["modelValue"])])])])])]),(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[7]||(t[7]=(...e)=>r.sendNotification&&r.sendNotification(...e))}," Send Notification ")])])):(0,i.Q3)("",!0),n.showDetailModal&&n.selectedNotification?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"modal-overlay",onClick:t[10]||(t[10]=(0,a.D$)((...e)=>r.closeDetail&&r.closeDetail(...e),["self"]))},[(0,i.Lk)("div",es,[(0,i.Lk)("button",{class:"modal-close-btn",onClick:t[9]||(t[9]=(...e)=>r.closeDetail&&r.closeDetail(...e))}," × "),t[31]||(t[31]=(0,i.Lk)("div",{class:"modal-title"},"Notification Detail",-1)),t[32]||(t[32]=(0,i.Lk)("div",{class:"modal-desc"},"Details for the selected notification.",-1)),(0,i.Lk)("div",ts,[(0,i.Lk)("div",ss,[t[20]||(t[20]=(0,i.Lk)("div",{class:"detail-label"},"Title",-1)),(0,i.Lk)("div",as,(0,h.v_)(n.selectedNotification.body),1)]),(0,i.Lk)("div",is,[t[21]||(t[21]=(0,i.Lk)("div",{class:"detail-label"},"Date & Time",-1)),(0,i.Lk)("div",os,(0,h.v_)(r.formatLocalDateTime(n.selectedNotification.sent_at||n.selectedNotification.created_at)),1)]),(0,i.Lk)("div",ns,[t[30]||(t[30]=(0,i.Lk)("div",{class:"detail-label"},"Recipients",-1)),(0,i.Lk)("div",rs,[t[29]||(t[29]=(0,i.Lk)("div",{class:"recipient-info"},null,-1)),(0,i.Lk)("div",ls,[n.selectedNotification&&n.selectedNotification.groups&&n.selectedNotification.groups.some(e=>e.members&&e.members.length)?((0,i.uX)(),(0,i.CE)("div",ds,[t[23]||(t[23]=(0,i.Lk)("div",{class:"section-title"},"Members",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.selectedNotification.groups,e=>((0,i.uX)(),(0,i.CE)("div",{key:"gm-"+e.id},[e.members&&e.members.length?((0,i.uX)(),(0,i.CE)("div",us,[(0,i.Lk)("div",cs,(0,h.v_)(e.name),1),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.members,e=>((0,i.uX)(),(0,i.CE)("div",{key:"m-"+(e.id||e.email),class:"recipient-row"},[(0,i.Lk)("div",ms,[(0,i.Lk)("div",hs,(0,h.v_)(e.name||e.full_name||e.email),1),e.email?((0,i.uX)(),(0,i.CE)("div",ps,(0,h.v_)(e.email),1)):(0,i.Q3)("",!0)]),t[22]||(t[22]=(0,i.Lk)("div",{class:"recipient-status"},[(0,i.Lk)("span",{class:"recipient-badge unread"},"Yet to read"),(0,i.Lk)("span",{class:"status-icon pending"})],-1))]))),128))])):(0,i.Q3)("",!0)]))),128))])):(0,i.Q3)("",!0),n.selectedNotification&&n.selectedNotification.groups&&n.selectedNotification.groups.length?((0,i.uX)(),(0,i.CE)("div",gs,[t[24]||(t[24]=(0,i.Lk)("div",{class:"section-title"},"Groups",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.selectedNotification.groups,e=>((0,i.uX)(),(0,i.CE)("div",{key:"g-"+e.id,class:"recipient-row"},[(0,i.Lk)("div",fs,[(0,i.Lk)("div",bs,(0,h.v_)(e.name),1)])]))),128))])):(0,i.Q3)("",!0),n.selectedNotification&&(n.selectedNotification.organizations&&n.selectedNotification.organizations.length||n.selectedNotification.admins&&n.selectedNotification.admins.length)?((0,i.uX)(),(0,i.CE)("div",ys)):(0,i.Q3)("",!0),n.selectedNotification&&n.selectedNotification.organizations&&n.selectedNotification.organizations.length?((0,i.uX)(),(0,i.CE)("div",ks,[t[26]||(t[26]=(0,i.Lk)("div",{class:"section-title"},"Organizations",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.selectedNotification.organizations,e=>((0,i.uX)(),(0,i.CE)("div",{key:"o-"+e.id,class:"recipient-row"},[(0,i.Lk)("div",vs,[(0,i.Lk)("div",ws,(0,h.v_)(e.name),1)]),t[25]||(t[25]=(0,i.Lk)("div",{class:"recipient-status"},[(0,i.Lk)("span",{class:"recipient-badge unread"},"Yet to read"),(0,i.Lk)("span",{class:"status-icon pending"})],-1))]))),128))])):(0,i.Q3)("",!0),n.selectedNotification&&n.selectedNotification.admins&&n.selectedNotification.admins.length?((0,i.uX)(),(0,i.CE)("div",Ls,[t[28]||(t[28]=(0,i.Lk)("div",{class:"section-title"},"Admins",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.selectedNotification.admins,e=>((0,i.uX)(),(0,i.CE)("div",{key:"a-"+e.id,class:"recipient-row"},[(0,i.Lk)("div",_s,[(0,i.Lk)("div",As,(0,h.v_)(e.name),1),e.email?((0,i.uX)(),(0,i.CE)("div",Ss,(0,h.v_)(e.email),1)):(0,i.Q3)("",!0)]),t[27]||(t[27]=(0,i.Lk)("div",{class:"recipient-status"},[(0,i.Lk)("span",{class:"recipient-badge unread"},"Yet to read"),(0,i.Lk)("span",{class:"status-icon pending"})],-1))]))),128))])):(0,i.Q3)("",!0),n.selectedNotification&&(n.selectedNotification.groups&&0!==n.selectedNotification.groups.length||n.selectedNotification.organizations&&0!==n.selectedNotification.organizations.length||n.selectedNotification.admins&&0!==n.selectedNotification.admins.length)?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Cs,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.detailRecipients,(e,t)=>((0,i.uX)(),(0,i.CE)("div",{key:t,class:"recipient-row"},[(0,i.Lk)("div",Ps,[(0,i.Lk)("div",Ns,(0,h.v_)(e.name),1),e.email?((0,i.uX)(),(0,i.CE)("div",zs,(0,h.v_)(e.email),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Es,[(0,i.Lk)("span",{class:(0,h.C4)(["recipient-badge",{read:"delivered"===e.status||"read"===e.status,unread:!("delivered"===e.status||"read"===e.status)}])},(0,h.v_)("delivered"===e.status||"read"===e.status?"Read":"Yet to read"),3),"delivered"===e.status?((0,i.uX)(),(0,i.CE)("span",{key:0,class:"status-icon delivered",innerHTML:r.tickSvg},null,8,Ds)):"failed"===e.status?((0,i.uX)(),(0,i.CE)("span",{key:1,class:"status-icon failed",innerHTML:r.crossSvg},null,8,Fs)):((0,i.uX)(),(0,i.CE)("span",$s))])]))),128)),0===r.detailRecipients.length?((0,i.uX)(),(0,i.CE)("div",Ms," All ")):(0,i.Q3)("",!0)]))])])])])])])):(0,i.Q3)("",!0)]),_:1})}var Is=s(1456);const Ts={class:"form-box",ref:"dropdownRoot"},Us={class:"form-input-icon"},Vs=["placeholder","value"],Os={key:0,class:"dropdown-list"},Rs=["onClick"];function Xs(e,t,s,o,n,r){return(0,i.uX)(),(0,i.CE)("div",Ts,[(0,i.Lk)("span",Us,[(0,i.Lk)("i",{class:(0,h.C4)(s.icon)},null,2)]),(0,i.Lk)("input",{type:"text",placeholder:s.placeholder,readonly:"",value:s.selectedItems.map(e=>e[s.optionLabel]).join(", "),class:"form-input-with-icon",onClick:t[0]||(t[0]=(...e)=>r.toggleDropdown&&r.toggleDropdown(...e))},null,8,Vs),t[4]||(t[4]=(0,i.Lk)("span",{class:"form-dropdown-chevron"},[(0,i.Lk)("i",{class:"fas fa-chevron-down"})],-1)),n.showDropdown?((0,i.uX)(),(0,i.CE)("div",Os,[(0,i.bo)((0,i.Lk)("input",{class:"dropdown-search",placeholder:"Search","onUpdate:modelValue":t[1]||(t[1]=e=>n.search=e)},null,512),[[a.Jo,n.search]]),s.enableSelectAll?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"dropdown-item",onClick:t[2]||(t[2]=(...e)=>r.toggleSelectAll&&r.toggleSelectAll(...e))},[t[3]||(t[3]=(0,i.Lk)("span",null,[(0,i.Lk)("strong",null,"Select All")],-1)),(0,i.Lk)("span",{class:(0,h.C4)(["dropdown-checkbox",{checked:r.isAllSelected}])},null,2)])):(0,i.Q3)("",!0),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.filteredItems,e=>((0,i.uX)(),(0,i.CE)("div",{key:e[s.optionValue],class:"dropdown-item",onClick:t=>r.toggleItem(e)},[(0,i.Lk)("span",null,(0,h.v_)(e[s.optionLabel]),1),(0,i.Lk)("span",{class:(0,h.C4)(["dropdown-checkbox",{checked:s.selectedItems.some(t=>t[s.optionValue]===e[s.optionValue])}])},null,2)],8,Rs))),128))])):(0,i.Q3)("",!0)],512)}const Ws={name:"MultiSelectDropdown",props:{options:{type:Array,required:!0},selectedItems:{type:Array,required:!0},placeholder:{type:String,default:""},icon:{type:String,default:"fas fa-users"},optionLabel:{type:String,default:"name"},optionValue:{type:String,default:"id"},enableSelectAll:{type:Boolean,default:!1}},data(){return{showDropdown:!1,search:""}},computed:{filteredItems(){return this.search?this.options.filter(e=>(e[this.optionLabel]||"").toLowerCase().includes(this.search.toLowerCase())):this.options},isAllSelected(){return!!this.filteredItems.length&&this.filteredItems.every(e=>this.selectedItems.some(t=>t[this.optionValue]===e[this.optionValue]))}},mounted(){document.addEventListener("mousedown",this.handleClickOutside)},beforeDestroy(){document.removeEventListener("mousedown",this.handleClickOutside)},methods:{toggleDropdown(){this.showDropdown=!this.showDropdown},toggleItem(e){const t=this.selectedItems.findIndex(t=>t[this.optionValue]===e[this.optionValue]);t>-1?this.$emit("update:selectedItems",this.selectedItems.filter(t=>t[this.optionValue]!==e[this.optionValue])):this.$emit("update:selectedItems",[...this.selectedItems,e])},toggleSelectAll(){if(this.isAllSelected){const e=this.filteredItems.map(e=>e[this.optionValue]),t=this.selectedItems.filter(t=>!e.includes(t[this.optionValue]));this.$emit("update:selectedItems",t)}else{const e=[...this.selectedItems];this.filteredItems.forEach(t=>{e.some(e=>e[this.optionValue]===t[this.optionValue])||e.push(t)}),this.$emit("update:selectedItems",e)}},handleClickOutside(e){if(!this.showDropdown)return;const t=this.$refs.dropdownRoot;t&&!t.contains(e.target)&&(this.showDropdown=!1)}}},Bs=(0,d.A)(Ws,[["render",Xs],["__scopeId","data-v-47e69c85"]]),Gs=Bs,js={name:"Notifications",components:{MainLayout:r.A,Pagination:At.A,TableHeader:St.A,FormDropdown:ne.ad,FormRow:ne.fh,FormInput:Is.A,FormLabel:ne.lR,FormDateTime:ne.Ui,MultiSelectDropdown:Gs,Toast:z.A},data(){return{isAlive:!1,showPageDropdown:!1,showSendModal:!1,showDetailModal:!1,selectedNotification:null,pageSize:10,currentPage:1,sortKey:"",sortAsc:!0,selectedOrganizations:[],selectedAdmin:"",selectedGroups:[],scheduledDate:"",scheduledTime:"",organizations:[],groups:[],notifications:[]}},computed:{totalPages(){return Math.ceil(this.notifications.length/this.pageSize)||1},paginatedNotifications(){let e=[...this.notifications];this.sortKey&&e.sort((e,t)=>{const s=e[this.sortKey]||"",a=t[this.sortKey]||"";return s<a?this.sortAsc?-1:1:s>a?this.sortAsc?1:-1:0});const t=(this.currentPage-1)*this.pageSize;return e.slice(t,t+this.pageSize)},paginationPages(){const e=this.totalPages;if(e<=7)return Array.from({length:e},(e,t)=>t+1);{const t=[1];this.currentPage>4&&t.push("...");for(let s=Math.max(2,this.currentPage-1);s<=Math.min(e-1,this.currentPage+1);s++)t.push(s);return this.currentPage<e-3&&t.push("..."),t.push(e),t}},detailRecipients(){const e=this.selectedNotification||{},t=[];if(Array.isArray(e.groups)&&e.groups.length&&(e.groups.forEach(e=>{e.name&&t.push({name:e.name,email:"",status:"pending"}),Array.isArray(e.members)&&e.members.length&&e.members.forEach(e=>{t.push({name:e.name||e.full_name||e.email||"Unknown",email:e.email||"",status:e.status||"pending"})})}),Array.isArray(e.admins)&&e.admins.length&&e.admins.forEach(e=>{t.push({name:e.name||e.full_name||e.email||"Admin",email:e.email||"",status:"pending"})}),Array.isArray(e.organizations)&&e.organizations.length&&e.organizations.forEach(e=>{t.push({name:e.name||e.org_name||e.title||`Org ${e.id}`,email:"",status:"pending"})})),Array.isArray(e.recipients)&&e.recipients.length)return e.recipients.forEach(e=>{t.push({name:e.name||e.full_name||e.email||"Unknown",email:e.email||"",status:e.status||e.delivery_status||e.state||"pending"})}),t;if(Array.isArray(e.emails)&&e.emails.length)return e.emails.forEach(e=>{"string"===typeof e?t.push({name:e,email:e,status:"pending"}):e&&e.email&&t.push({name:e.name||e.email,email:e.email,status:e.status||"pending"})}),t;Array.isArray(e.organization_ids)&&e.organization_ids.length&&Array.isArray(this.organizations)&&e.organization_ids.forEach(e=>{const s=this.organizations.find(t=>t.id===e||t.org_id===e||t.id==e),a=s?s.org_name||s.name||s.title:String(e);t.push({name:a,email:"",status:"pending"})}),Array.isArray(e.group_ids)&&e.group_ids.length&&Array.isArray(this.groups)&&e.group_ids.forEach(e=>{const s=this.groups.find(t=>t.id===e||t.id==e||t.group_id===e),a=s?s.name||s.group_name||s.title:String(e);t.push({name:a,email:"",status:"pending"})}),Array.isArray(e.organization_names)&&e.organization_names.length&&e.organization_names.forEach(e=>{t.push({name:e,email:"",status:"pending"})}),Array.isArray(e.group_names)&&e.group_names.length&&e.group_names.forEach(e=>{t.push({name:e,email:"",status:"pending"})}),Array.isArray(e.member_names)&&e.member_names.length&&e.member_names.forEach(e=>{t.push({name:e,email:"",status:"pending"})}),Array.isArray(e.members)&&e.members.length&&e.members.forEach(e=>{t.push({name:e.name||e.full_name||e.email||"Unknown",email:e.email||"",status:e.status||"pending"})});const s=new Set,a=[];return t.forEach(e=>{const t=`${e.name||""}::${e.email||""}`;s.has(t)||(s.add(t),a.push(e))}),a},tickSvg(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20 6L9 17L4 12" stroke="#16A34A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'},crossSvg(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 6L6 18M6 6l12 12" stroke="#DC2626" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'}},methods:{goToPage(e){"..."===e||e<1||e>this.totalPages||(this.currentPage=e)},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},sortBy(e){this.sortKey===e?this.sortAsc=!this.sortAsc:(this.sortKey=e,this.sortAsc=!0)},formatLocalDateTime(e){if(!e)return"";let t=null;try{if(/[T].*Z$/.test(e)||/[T].*[+-]\d{2}:?\d{2}$/.test(e))t=new Date(e);else{const s=(e||"").match(/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?$/);if(s){const e=parseInt(s[1],10),a=parseInt(s[2],10)-1,i=parseInt(s[3],10),o=parseInt(s[4],10),n=parseInt(s[5],10),r=s[6]?parseInt(s[6],10):0,l=Date.UTC(e,a,i,o,n,r);t=new Date(l)}else t=new Date(e)}}catch(u){t=new Date(e)}if(!t||isNaN(t.getTime()))return e||"";const s=String(t.getDate()).padStart(2,"0"),a=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],i=a[t.getMonth()],o=t.getFullYear();let n=t.getHours();const r=String(t.getMinutes()).padStart(2,"0"),l=n>=12?"PM":"AM";n%=12,n=n||12;const d=`${n}:${r} ${l}`;return`${s} ${i},${o} ${d}`},openDetail(e){if(!this.isAlive)return;if(!e)return this.selectedNotification=null,void(this.showDetailModal=!1);const t={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://127.0.0.1:8000",BASE_URL:"/"}.VUE_APP_API_URL||"/api",s=D["default"].get("authToken");try{P.A.get(`${t}/announcements/${e.id}`,{headers:{Authorization:`Bearer ${s}`}}).then(t=>{const s=t.data||{},a=Object.assign({},e,{announcement_detail:s.announcement||null,groups:s.groups||[],organizations:s.organizations||[],admins:s.admins||[]});this.selectedNotification=a,this.showDetailModal=!0}).catch(t=>{console.warn("Failed to fetch announcement detail, opening basic view",t),this.selectedNotification=e,this.showDetailModal=!0})}catch(a){this.selectedNotification=e,this.showDetailModal=!0}},closeDetail(){this.isAlive&&(this.showDetailModal=!1,this.selectedNotification=null)},async sendNotification(){try{const e={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://127.0.0.1:8000",BASE_URL:"/"}.VUE_APP_API_URL||"/api",t=D["default"].get("authToken");let s;if(this.scheduledDate&&this.scheduledTime){let e=this.scheduledTime;5===e.length&&(e+=":00");const t=new Date(`${this.scheduledDate}T${e}`),a=e=>String(e).padStart(2,"0"),i=t.getUTCFullYear(),o=a(t.getUTCMonth()+1),n=a(t.getUTCDate()),r=a(t.getUTCHours()),l=a(t.getUTCMinutes()),d=a(t.getUTCSeconds());s=`${i}-${o}-${n} ${r}:${l}:${d}`}const a={organization_ids:this.selectedOrganizations.map(e=>e.id),group_ids:this.selectedGroups.map(e=>e.id),body:this.$el.querySelector(".modal-textarea").value};s&&(a.scheduled_at=s),console.log("Sending notification payload:",a),await P.A.post(e+"/announcements/send",a,{headers:{Authorization:`Bearer ${t}`}}),this.isAlive&&(this.showSendModal=!1,this.$toast&&this.$toast.add&&this.$toast.add({severity:"success",summary:"Success",detail:"Announcement sent!",life:3e3})),console.log("Announcement sent successfully")}catch(e){console.error("Error sending notification:",e),this.isAlive&&this.$toast&&this.$toast.add&&this.$toast.add({severity:"error",summary:"Error",detail:"Failed to send announcement",life:4e3})}},async fetchOrganizations(){try{const e={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://127.0.0.1:8000",BASE_URL:"/"}.VUE_APP_API_URL||"/api",t=D["default"].get("authToken"),s=await P.A.get(e+"/organizations",{headers:{Authorization:`Bearer ${t}`}});console.log("Organizations response:",s.data),this.isAlive&&(this.organizations=s.data)}catch(e){console.error("Error fetching organizations:",e),this.isAlive&&(this.organizations=[])}},async fetchGroups(){try{const e={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://127.0.0.1:8000",BASE_URL:"/"}.VUE_APP_API_URL||"/api",t=D["default"].get("authToken"),s=await P.A.get(e+"/groups",{headers:{Authorization:`Bearer ${t}`}});console.log("Groups response:",s.data),this.isAlive&&(this.groups=s.data)}catch(e){console.error("Error fetching groups:",e),this.isAlive&&(this.groups=[])}},isRead(e){return!!e&&("boolean"===typeof e.read?e.read:"read"===e.status||"delivered"===e.status)},async fetchNotifications(){try{const e={NODE_ENV:"production",VUE_APP_API_BASE_URL:"http://127.0.0.1:8000",BASE_URL:"/"}.VUE_APP_API_URL||"/api",t=D["default"].get("authToken"),s=await P.A.get(e+"/announcements",{headers:{Authorization:`Bearer ${t}`}});this.isAlive&&(this.notifications=Array.isArray(s.data)?s.data:s.data.notifications||[])}catch(e){console.error("Error fetching notifications:",e),this.isAlive&&(this.notifications=[])}}},watch:{},mounted(){this.isAlive=!0,this.fetchOrganizations(),this.fetchGroups(),this.fetchNotifications(),console.log("Mounted: fetching organizations, groups, notifications")},beforeUnmount(){this.isAlive=!1}},Ks=(0,d.A)(js,[["render",xs],["__scopeId","data-v-22655e44"]]),qs=Ks,Qs=s.p+"img/Add.1f261cbb.svg",Ys=s.p+"img/AddBlack.309c9cd0.svg",Hs=s.p+"img/Actions.51599183.svg",Js={class:"page"},Zs={class:"table-outer"},ea={class:"table-card"},ta={class:"table-header-bar"},sa={class:"table-container"},aa={class:"table-scroll"},ia={class:"table"},oa={"data-label":"Contact"},na=["onClick"],ra={"data-label":"Email"},la={"data-label":"Phone Number"},da={"data-label":"Organization"},ua={"data-label":"Size"},ca={"data-label":"Source"},ma={"data-label":"Status"},ha={"data-label":"Notes"},pa=["onClick"],ga={"data-label":"Actions",style:{position:"relative"}},fa={class:"actions-row"},ba=["onClick","aria-expanded"],ya=["onClick"],ka={class:"notes-modal"},va={class:"notes-modal-actions"};function wa(e,t,s,o,n,r){const l=(0,i.g2)("TableHeader"),d=(0,i.g2)("Pagination"),u=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(u,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Js,[(0,i.Lk)("div",Zs,[(0,i.Lk)("div",ea,[(0,i.Lk)("div",ta,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=t=>e.$router.push("/leads/lead-capture"))},[...t[7]||(t[7]=[(0,i.Lk)("img",{src:Qs,alt:"Add",class:"leads-add-btn-icon"},null,-1),(0,i.eW)(" Add New ",-1)])])]),(0,i.Lk)("div",sa,[(0,i.Lk)("div",aa,[(0,i.Lk)("table",ia,[(0,i.bF)(l,{columns:[{label:"Contact",key:"contact",sortable:!0},{label:"Email",key:"email"},{label:"Phone Number",key:"phone"},{label:"Organization",key:"organization",sortable:!0},{label:"Size",key:"size"},{label:"Source",key:"source"},{label:"Status",key:"status"},{label:"Notes",key:"notes"},{label:"",key:"actions"}],onSort:r.sortBy},null,8,["onSort"]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedLeads,(e,s)=>((0,i.uX)(),(0,i.CE)("tr",{key:e.email},[(0,i.Lk)("td",oa,[(0,i.Lk)("span",{class:"lead-contact-link",onClick:t=>r.goToLeadDetail(e)},(0,h.v_)(e.contact),9,na)]),(0,i.Lk)("td",ra,(0,h.v_)(e.email),1),(0,i.Lk)("td",la,(0,h.v_)(e.phone),1),(0,i.Lk)("td",da,(0,h.v_)(e.organization),1),(0,i.Lk)("td",ua,(0,h.v_)(e.size),1),(0,i.Lk)("td",ca,(0,h.v_)(e.source),1),(0,i.Lk)("td",ma,[(0,i.Lk)("span",{class:(0,h.C4)(["status-badge",e.status&&e.status.toLowerCase().replace(/\s+/g,"-")])},(0,h.v_)(e.status||"Lead Stage"),3)]),(0,i.Lk)("td",ha,[(0,i.Lk)("button",{class:"btn-view",onClick:t=>r.openNotesModal(e,s)},["View"===e.notesAction?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[t[8]||(t[8]=(0,i.Lk)("img",{src:ft,alt:"View",class:"btn-view-icon"},null,-1)),t[9]||(t[9]=(0,i.eW)(" View ",-1))],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[t[10]||(t[10]=(0,i.Lk)("img",{src:Ys,alt:"Add",class:"btn-view-icon"},null,-1)),t[11]||(t[11]=(0,i.eW)(" Add ",-1))],64))],8,pa)]),(0,i.Lk)("td",ga,[(0,i.Lk)("div",fa,[(0,i.Lk)("button",{class:"leads-menu-btn",onClick:(0,a.D$)(e=>r.toggleMenu(s),["stop"]),"aria-haspopup":"true","aria-expanded":n.menuOpen===s},[...t[12]||(t[12]=[(0,i.Lk)("img",{src:Hs,alt:"Actions",width:"20",height:"20",class:"leads-menu-icon"},null,-1)])],8,ba),n.menuOpen===s?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"leads-menu custom-leads-menu",style:(0,h.Tr)(n.menuStyle),ref_for:!0,ref:"menuDropdown",onClick:t[1]||(t[1]=(0,a.D$)(()=>{},["stop"]))},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.customMenuOptions,e=>((0,i.uX)(),(0,i.CE)("div",{class:"leads-menu-item",key:e,onClick:t=>r.selectCustomAction(s,e)},(0,h.v_)(e),9,ya))),128))],4)):(0,i.Q3)("",!0)])])]))),128))])])])])]),(0,i.bF)(d,{pageSize:n.pageSize,pageSizes:[10,25,100],showPageDropdown:n.showPageDropdown,currentPage:n.currentPage,totalPages:r.totalPages,paginationPages:r.paginationPages,onGoToPage:r.goToPage,onSelectPageSize:r.selectPageSize,onTogglePageDropdown:t[2]||(t[2]=e=>n.showPageDropdown=!n.showPageDropdown)},null,8,["pageSize","showPageDropdown","currentPage","totalPages","paginationPages","onGoToPage","onSelectPageSize"]),n.showNotesModal?((0,i.uX)(),(0,i.CE)("div",{key:0,class:"notes-modal-overlay",onClick:t[6]||(t[6]=(0,a.D$)((...e)=>r.closeNotesModal&&r.closeNotesModal(...e),["self"]))},[(0,i.Lk)("div",ka,[(0,i.Lk)("h3",null,(0,h.v_)("add"===n.notesModalMode?"Add Notes":"Notes"),1),(0,i.bo)((0,i.Lk)("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.notesInput=e),rows:"5",placeholder:"Enter notes here...",class:"notes-textarea"},null,512),[[a.Jo,n.notesInput]]),(0,i.Lk)("div",va,[(0,i.Lk)("button",{class:"btn btn-secondary",onClick:t[4]||(t[4]=e=>"add"===n.notesModalMode?r.submitNotes():r.saveNotes())},(0,h.v_)("add"===n.notesModalMode?"Submit":"Save"),1),(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[5]||(t[5]=(...e)=>r.closeNotesModal&&r.closeNotesModal(...e))}," Cancel ")])])])):(0,i.Q3)("",!0)])])]),_:1})}const La={name:"Leads",components:{MainLayout:r.A,Pagination:At.A,TableHeader:St.A},data(){return{menuOpen:null,menuStyle:{},customMenuOptions:["Schedule Demo","Schedule Class/Training","Send Assessment"],leads:[],pageSize:10,currentPage:1,showPageDropdown:!1,showNotesModal:!1,notesModalMode:"add",notesInput:"",currentLead:null,currentLeadId:null,currentLeadIdx:null,sortKey:"",sortAsc:!0,loading:!1,errorMessage:""}},computed:{totalPages(){return Math.ceil(this.leads.length/this.pageSize)||1},paginatedLeads(){let e=[...this.leads];this.sortKey&&e.sort((e,t)=>{const s=e[this.sortKey]||"",a=t[this.sortKey]||"";return s<a?this.sortAsc?-1:1:s>a?this.sortAsc?1:-1:0});const t=(this.currentPage-1)*this.pageSize;return e.slice(t,t+this.pageSize)},paginationPages(){const e=this.totalPages;if(e<=7)return Array.from({length:e},(e,t)=>t+1);{const t=[1];this.currentPage>4&&t.push("...");for(let s=Math.max(2,this.currentPage-1);s<=Math.min(e-1,this.currentPage+1);s++)t.push(s);return this.currentPage<e-3&&t.push("..."),t.push(e),t}}},methods:{async fetchLeads(){this.loading=!0,this.errorMessage="";try{const e=s(3193)["default"],t=e.get("authToken");if(!t)return this.errorMessage="Authentication token not found. Please log in.",void(this.loading=!1);const a="http://127.0.0.1:8000",i=await P.A.get(`${a}/api/leads`,{headers:{Authorization:`Bearer ${t}`}});this.leads=i.data.map(e=>({contact:`${e.first_name} ${e.last_name}`,email:e.email,phone:e.phone,organization:e.org_name,size:e.org_size,source:e.find_us,status:e.status||"Lead Stage",notesAction:e.notes&&String(e.notes).trim().length?"View":"Add",notes:e.notes||"",...e}))}catch(e){console.error("Error fetching leads:",e),this.errorMessage="Failed to load leads."}finally{this.loading=!1}},selectCustomAction(e,t){this.menuOpen=null;const s=this.leads[e];if("Send Assessment"===t){if(s.id)try{return void this.$router.push({name:"SendAssessment",params:{id:s.id}})}catch(a){return void(this.$route.path.startsWith("/assessments")?this.$router.push({path:"/assessments/send-assessment",params:{id:s.id}}):this.$router.push({path:"/leads/send-assessment",params:{id:s.id}}))}const e={contact:s.contact,email:s.email,phone:s.phone,organization:s.organization,size:s.size,source:s.source,status:s.status};return void(this.$route.path.startsWith("/assessments")?this.$router.push({path:"/assessments/send-assessment",query:e}):this.$router.push({path:"/leads/send-assessment",query:e}))}"Schedule Demo"!==t?"Schedule Class/Training"!==t?this.$set(this.leads[e],"selectedCustomAction",t):this.$router.push("/leads/schedule-class-training"):this.$router.push("/leads/schedule-demo")},handleGlobalClick(e){if(null!==this.menuOpen){let t=document.querySelector(".leads-menu.custom-leads-menu"),s=document.querySelectorAll(".leads-menu-btn");if(t&&t.contains(e.target))return;for(let a of s)if(a.contains(e.target))return;this.menuOpen=null}},goToLeadDetail(e){const t=e.id||e.email||"";this.$router.push({name:"LeadDetail",params:{id:t}})},goToPage(e){"..."===e||e<1||e>this.totalPages||(this.currentPage=e)},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},openNotesModal(e,t){this.menuOpen=null;try{document.body.style.overflow=""}catch(s){}this.currentLead=e,this.currentLeadId=e.id||null,this.currentLeadId?this.currentLeadIdx=this.leads.findIndex(e=>e.id===this.currentLeadId):(this.currentLeadIdx=this.leads.findIndex(t=>t.email&&t.email===e.email||t.phone&&t.phone===e.phone||t.contact&&t.contact===e.contact),-1===this.currentLeadIdx&&(this.currentLeadIdx=t+(this.currentPage-1)*this.pageSize)),"View"===e.notesAction?this.notesModalMode="view":this.notesModalMode="add",this.notesInput=e.notes||"",this.showNotesModal=!0},async submitNotes(){let e=null;if(this.currentLeadId&&(e=this.leads.find(e=>e.id===this.currentLeadId)),!e&&null!=this.currentLeadIdx&&this.currentLeadIdx>=0&&(e=this.leads[this.currentLeadIdx]),!e||!e.id)return e&&(e.notes=this.notesInput,e.notesAction="View"),void this.closeNotesModal();try{const t=s(3193)["default"],a=t.get("authToken"),i="http://127.0.0.1:8000";await P.A.patch(`${i}/api/leads/${e.id}`,{notes:this.notesInput},{headers:{Authorization:`Bearer ${a}`}}),e.notes=this.notesInput,e.notesAction="View"}catch(t){console.error("Failed to submit notes",t),this.errorMessage="Failed to save notes."}finally{this.closeNotesModal()}},async saveNotes(){let e=null;if(this.currentLeadId&&(e=this.leads.find(e=>e.id===this.currentLeadId)),!e&&null!=this.currentLeadIdx&&this.currentLeadIdx>=0&&(e=this.leads[this.currentLeadIdx]),!e||!e.id)return e&&(e.notes=this.notesInput),void this.closeNotesModal();try{const t=s(3193)["default"],a=t.get("authToken"),i="http://127.0.0.1:8000";await P.A.patch(`${i}/api/leads/${e.id}`,{notes:this.notesInput},{headers:{Authorization:`Bearer ${a}`}}),e.notes=this.notesInput}catch(t){console.error("Failed to save notes",t),this.errorMessage="Failed to save notes."}finally{this.closeNotesModal()}},closeNotesModal(){this.showNotesModal=!1,this.notesInput="",this.currentLead=null,this.currentLeadIdx=null,this.currentLeadId=null},sortBy(e){this.sortKey===e?this.sortAsc=!this.sortAsc:(this.sortKey=e,this.sortAsc=!0)},toggleMenu(e){const t=this.menuOpen!==e;this.menuOpen=t?e:null;try{document.body.style.overflow=t?"hidden":""}catch(s){}t?(this.updateMenuPosition(e),window.addEventListener("scroll",this._menuScrollHandler,{passive:!0}),window.addEventListener("resize",this._menuResizeHandler)):(this.menuStyle={},window.removeEventListener("scroll",this._menuScrollHandler),window.removeEventListener("resize",this._menuResizeHandler))},getMenuPosition(e){const t=document.querySelectorAll(".leads-menu-btn"),s=t&&t[e]?t[e]:null;if(!s)return{};const a=s.getBoundingClientRect(),i=220,o=8,n=window.innerWidth;let r=a.left+a.width/2-i/2;r=Math.max(o,Math.min(r,n-i-o));const l=a.bottom+window.scrollY+8;return{left:`${Math.round(r)}px`,top:`${Math.round(l)}px`,minWidth:i+"px"}},updateMenuPosition(e){const t=document.querySelectorAll(".leads-menu-btn"),s=t&&t[e]?t[e]:null;if(!s)return;const a=s.getBoundingClientRect(),i=220,o=8,n=window.innerWidth;let r=a.left+a.width/2-i/2;r=Math.max(o,Math.min(r,n-i-o));const l=a.bottom+window.scrollY+8;this.menuStyle={left:`${Math.round(r)}px`,top:`${Math.round(l)}px`,minWidth:i+"px"}}},mounted(){document.addEventListener("click",this.handleGlobalClick),this._menuScrollHandler=()=>{null!==this.menuOpen&&this.updateMenuPosition(this.menuOpen)},this._menuResizeHandler=()=>{null!==this.menuOpen&&this.updateMenuPosition(this.menuOpen)},this.fetchLeads()},beforeUnmount(){document.removeEventListener("click",this.handleGlobalClick),window.removeEventListener("scroll",this._menuScrollHandler),window.removeEventListener("resize",this._menuResizeHandler)}},_a=(0,d.A)(La,[["render",wa],["__scopeId","data-v-0a500f7d"]]),Aa=_a;function Sa(e,t,s,a,o,n){const r=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(r,null,{default:(0,i.k6)(()=>[...t[0]||(t[0]=[(0,i.Lk)("div",{class:"page"},[(0,i.Lk)("div",{class:"page-content-wrapper"},[(0,i.Lk)("div",{class:"training-resources-page"},[(0,i.Lk)("h2",null,"Training & Resources"),(0,i.Lk)("p",null,"Welcome to the Training & Resources page.")])])],-1)])]),_:1})}const Ca={name:"TrainingResources",components:{MainLayout:r.A}},Pa=(0,d.A)(Ca,[["render",Sa],["__scopeId","data-v-2fee105c"]]),Na=Pa,za={class:"page"},Ea={class:"assessments-table-outer"};function Da(e,t,s,a,o,n){const r=(0,i.g2)("OrganizationAdminAssessmentsCard"),l=(0,i.g2)("UserAssessment"),d=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(d,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",za,[(0,i.Lk)("div",Ea,[n.isOrganizationAdmin?((0,i.uX)(),(0,i.Wv)(r,{key:0})):n.isUser?((0,i.uX)(),(0,i.Wv)(l,{key:1})):(0,i.Q3)("",!0)])])]),_:1})}const Fa=s.p+"img/Schedule.2140b6c7.svg",$a={class:"assessments-card"},Ma={class:"assessments-header-row"},xa={class:"assessments-header-actions"},Ia={class:"table-container"},Ta={class:"table"},Ua=["onClick"],Va={key:0,class:"scheduled-details"},Oa={style:{"margin-top":"8px","font-size":"15px"}},Ra=["onClick"],Xa=["onClick"],Wa={key:0,class:"modal-overlay"},Ba={class:"modal-card"},Ga={class:"modal-form-row"},ja={class:"modal-form-group",style:{padding:"0 0",background:"none","border-radius":"0",height:"auto"}},Ka={class:"modal-form-row",style:{"flex-direction":"column","align-items":"stretch",gap:"10px"}},qa=["for"],Qa=["id","value"],Ya={style:{flex:"1","text-align":"left","font-size":"18px","font-weight":"500",color:"#222"}},Ha={class:"modal-form-actions"},Ja={key:1,class:"modal-overlay"},Za={key:0,class:"modal-card"},ei={class:"modal-title2 schedule-header",style:{"font-size":"20px","font-weight":"450"}},ti={class:"schedule-header-left"},si={class:"schedule-assessment-name",style:{display:"inline-block","vertical-align":"middle","max-width":"520px","margin-right":"12px"}},ai={class:"schedule-assessment-name",style:{display:"inline-block","vertical-align":"middle","margin-left":"12px"}},ii={class:"schedule-header-right"},oi={key:0},ni={key:0,class:"status-green"},ri={key:1,class:"status-yellow"},li={key:2},di={key:0,class:"status-yellow"},ui={key:1,class:"status-red"},ci={key:3,class:"status-yellow"},mi={key:1},hi={key:0,class:"status-yellow"},pi={key:1,class:"status-red"},gi={key:0},fi={class:"detail-row"},bi={class:"detail-table"},yi={class:"recipient-table-wrap"},ki={key:0,class:"recipient-table compact"},vi=["rowspan"],wi={key:1};function Li(e,t,s,o,n,r){const l=(0,i.g2)("TableHeader"),d=(0,i.g2)("ScheduleAssessmentModal"),u=(0,i.g2)("Pagination");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",$a,[(0,i.Lk)("div",Ma,[t[10]||(t[10]=(0,i.Lk)("div",null,null,-1)),(0,i.Lk)("div",xa,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=e=>n.showCreateModal=!0)},[...t[9]||(t[9]=[(0,i.Lk)("img",{src:Qs,alt:"Add",style:{width:"18px",height:"18px","vertical-align":"middle","margin-right":"8px"}},null,-1),(0,i.eW)(" Create Assessments ",-1)])])])]),(0,i.Lk)("div",Ia,[(0,i.Lk)("table",Ta,[(0,i.bF)(l,{columns:[{label:"Assessment Name",key:"name",width:"250px"},{label:"Actions",key:"actions",width:"250px"},{},{}]}),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedAssessments,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"assessment-link",onClick:t=>r.goToSummary(e)},(0,h.v_)(e.name),9,Ua)]),(0,i.Lk)("td",null,[e.schedule?((0,i.uX)(),(0,i.CE)("div",Va,[t[15]||(t[15]=(0,i.Lk)("span",{style:{color:"#f7c948","font-weight":"bold","font-size":"18px"}},"Mail Scheduled",-1)),(0,i.Lk)("div",Oa,[(0,i.Lk)("div",null,[t[11]||(t[11]=(0,i.Lk)("strong",null,"Subject:",-1)),(0,i.eW)(" "+(0,h.v_)(e.schedule.subject||"Assessment Scheduled"),1)]),(0,i.Lk)("div",null,[t[12]||(t[12]=(0,i.Lk)("strong",null,"Send At:",-1)),(0,i.eW)(" "+(0,h.v_)(e.schedule.send_at),1)]),(0,i.Lk)("div",null,[t[13]||(t[13]=(0,i.Lk)("strong",null,"Status:",-1)),(0,i.eW)(" "+(0,h.v_)(e.schedule.status||"scheduled"),1)])]),(0,i.Lk)("button",{class:"schedule-btn",onClick:t=>r.openScheduleDetails(e),style:{"margin-top":"10px"}},[...t[14]||(t[14]=[(0,i.Lk)("img",{src:Fa,alt:"Details",style:{"margin-right":"6px",width:"18px",height:"18px","vertical-align":"middle",display:"inline-block"}},null,-1),(0,i.eW)(" Details ",-1)])],8,Ra)])):((0,i.uX)(),(0,i.CE)("button",{key:1,class:"schedule-btn",onClick:t=>r.openScheduleModal(e)},[...t[16]||(t[16]=[(0,i.Lk)("img",{src:Fa,alt:"Schedule",style:{"margin-right":"6px",width:"18px",height:"18px","vertical-align":"middle",display:"inline-block"}},null,-1),(0,i.eW)(" Schedule ",-1)])],8,Xa))])]))),128))])])]),n.showCreateModal?((0,i.uX)(),(0,i.CE)("div",Wa,[(0,i.Lk)("div",Ba,[(0,i.Lk)("button",{class:"modal-close",onClick:t[1]||(t[1]=(...e)=>r.closeCreateModal&&r.closeCreateModal(...e))}," × "),t[20]||(t[20]=(0,i.Lk)("div",{class:"modal-title"},"Create Assessment",-1)),(0,i.Lk)("form",{class:"modal-form",onSubmit:t[5]||(t[5]=(0,a.D$)((...e)=>r.submitAssessment&&r.submitAssessment(...e),["prevent"]))},[(0,i.Lk)("div",Ga,[(0,i.Lk)("div",ja,[(0,i.bo)((0,i.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.newAssessment.name=e),type:"text",placeholder:"Assessment Name",required:"",style:{width:"100%",background:"#f6f6f6","border-radius":"9px",border:"1.5px solid #e0e0e0","font-size":"20px",padding:"16px 20px","box-sizing":"border-box","font-weight":"500",color:"#222"}},null,512),[[a.Jo,n.newAssessment.name]])])]),(0,i.Lk)("div",Ka,[t[18]||(t[18]=(0,i.Lk)("label",{style:{"font-weight":"600","margin-bottom":"16px","font-size":"22px","text-align":"left",display:"block","align-self":"flex-start"}}," Questions ",-1)),((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.questions,e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,style:{width:"100%","margin-bottom":"8px"}},[(0,i.Lk)("label",{for:"q-"+e.id,class:(0,h.C4)(["user-assessment-checkbox-label",{checked:n.newAssessment.selectedQuestionIds.includes(e.id)}]),style:{"justify-content":"flex-start","font-size":"18px",padding:"18px 24px",background:"#f8f9fb","border-radius":"12px","margin-bottom":"0","text-align":"left"}},[t[17]||(t[17]=(0,i.Lk)("span",{class:"user-assessment-checkbox-custom"},null,-1)),(0,i.bo)((0,i.Lk)("input",{type:"checkbox",id:"q-"+e.id,value:e.id,"onUpdate:modelValue":t[3]||(t[3]=e=>n.newAssessment.selectedQuestionIds=e)},null,8,Qa),[[a.lH,n.newAssessment.selectedQuestionIds]]),(0,i.Lk)("span",Ya,(0,h.v_)(e.text),1)],10,qa)]))),128))]),(0,i.Lk)("div",Ha,[t[19]||(t[19]=(0,i.Lk)("button",{type:"submit",class:"modal-save-btn"}," Create ",-1)),(0,i.Lk)("button",{type:"button",class:"btn btn-secondary",onClick:t[4]||(t[4]=(...e)=>r.closeCreateModal&&r.closeCreateModal(...e)),style:{"margin-left":"12px"}}," Cancel ")])],32)])])):(0,i.Q3)("",!0),n.showScheduleModal?((0,i.uX)(),(0,i.CE)("div",Ja,[(0,i.bF)(d,{assessmentName:n.selectedAssessment&&n.selectedAssessment.name,assessment_id:n.selectedAssessment&&n.selectedAssessment.id,onClose:r.closeScheduleModal,onSchedule:r.handleScheduleAssessment},null,8,["assessmentName","assessment_id","onClose","onSchedule"])])):(0,i.Q3)("",!0),n.showScheduleDetailsModal?((0,i.uX)(),(0,i.CE)("div",{key:2,class:"modal-overlay",onClick:t[7]||(t[7]=(0,a.D$)((...e)=>r.closeScheduleDetailsModal&&r.closeScheduleDetailsModal(...e),["self"]))},[n.scheduleDetails?((0,i.uX)(),(0,i.CE)("div",Za,[(0,i.Lk)("button",{class:"modal-close-btn",onClick:t[6]||(t[6]=(...e)=>r.closeScheduleDetailsModal&&r.closeScheduleDetailsModal(...e))}," × "),t[24]||(t[24]=(0,i.Lk)("div",{class:"modal-title2"},"Scheduled Assessment Details",-1)),t[25]||(t[25]=(0,i.Lk)("div",{class:"modal-desc"}," Details for the selected scheduled assessment. ",-1)),t[26]||(t[26]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("div",ei,[(0,i.Lk)("div",ti,[(0,i.Lk)("div",null,[(0,i.Lk)("div",si,(0,h.v_)(n.scheduleDetails.assessment.name),1),t[21]||(t[21]=(0,i.eW)(" - ",-1)),(0,i.Lk)("div",ai,(0,h.v_)(r.formatLocalDateTime(n.scheduleDetails.schedule.date,n.scheduleDetails.schedule.time)),1)])]),(0,i.Lk)("div",ii,[n.scheduleDetails.emails&&n.scheduleDetails.emails.length?((0,i.uX)(),(0,i.CE)("span",oi,[r.filteredEmails.length&&r.filteredEmails.every(e=>e.sent)?((0,i.uX)(),(0,i.CE)("span",ni,"Sent")):r.filteredEmails.length&&r.filteredEmails.some(e=>!e.sent)&&r.filteredEmails.some(e=>e.sent)?((0,i.uX)(),(0,i.CE)("span",ri,"Scheduled")):r.filteredEmails.length&&r.filteredEmails.every(e=>!e.sent)?((0,i.uX)(),(0,i.CE)("span",li,[r.filteredEmails.some(e=>{const[t,s]=(e.send_at||"").split(" "),[a,i,o]=t?t.split("-"):[],[n,r,l]=s?s.split(":"):[],d=Date.UTC(Number(a),Number(i)-1,Number(o),Number(n),Number(r),Number(l)),u=Date.now();return d>=u})?((0,i.uX)(),(0,i.CE)("span",di,"Scheduled")):((0,i.uX)(),(0,i.CE)("span",ui,"Failed"))])):((0,i.uX)(),(0,i.CE)("span",ci,"Scheduled"))])):((0,i.uX)(),(0,i.CE)("span",mi,[(()=>{const[e,t,s]=(n.scheduleDetails.schedule.date||"").split("-"),[a,i,o]=(n.scheduleDetails.schedule.time||"").split(":"),r=Date.UTC(Number(e),Number(t)-1,Number(s),Number(a),Number(i),Number(o)),l=Date.now();return r>=l})()?((0,i.uX)(),(0,i.CE)("span",hi,"Scheduled")):((0,i.uX)(),(0,i.CE)("span",pi,"Failed"))]))])]),n.scheduleDetails&&n.scheduleDetails.schedule?((0,i.uX)(),(0,i.CE)("div",gi,[(0,i.Lk)("div",fi,[(0,i.Lk)("div",bi,[(0,i.Lk)("div",yi,[r.filteredEmails&&r.filteredEmails.length?((0,i.uX)(),(0,i.CE)("table",ki,[t[22]||(t[22]=(0,i.Lk)("thead",null,[(0,i.Lk)("tr",null,[(0,i.Lk)("th",{style:{width:"20%"}},"Group"),(0,i.Lk)("th",{style:{width:"30%"}},"Name"),(0,i.Lk)("th",{style:{width:"30%"}},"Email"),(0,i.Lk)("th",{style:{width:"20%"}},"Role")])],-1)),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.groupedEmails,(e,t)=>((0,i.uX)(),(0,i.CE)(i.FK,{key:"group-"+t},[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.items,(s,a)=>((0,i.uX)(),(0,i.CE)("tr",{key:"email-"+t+"-"+a},[0===a?((0,i.uX)(),(0,i.CE)("td",{key:0,rowspan:e.items.length,class:"group-cell"},(0,h.v_)(e.name||"Ungrouped"),9,vi)):(0,i.Q3)("",!0),(0,i.Lk)("td",null,(0,h.v_)(s.member_id&&r.memberDetailMap[s.member_id]?r.memberDetailMap[s.member_id].name:s.recipient_email||s.email||s.to||"Unknown"),1),(0,i.Lk)("td",null,(0,h.v_)(s.member_id&&r.memberDetailMap[s.member_id]?r.memberDetailMap[s.member_id].email:s.recipient_email||s.email||s.to||""),1),(0,i.Lk)("td",null,(0,h.v_)(s.member_id&&r.memberDetailMap[s.member_id]?r.memberDetailMap[s.member_id].role||"Member":""),1)]))),128))],64))),128))])])):(0,i.Q3)("",!0)])])])])):((0,i.uX)(),(0,i.CE)("div",wi,[...t[23]||(t[23]=[(0,i.Lk)("em",null,"No schedule details found.",-1)])]))])):(0,i.Q3)("",!0)])):(0,i.Q3)("",!0)]),(0,i.bF)(u,{pageSize:n.pageSize,pageSizes:[10,25,100],showPageDropdown:n.showPageDropdown,currentPage:n.currentPage,totalPages:r.totalPages,onTogglePageDropdown:t[8]||(t[8]=e=>n.showPageDropdown=!n.showPageDropdown),onSelectPageSize:r.selectPageSize,onGoToPage:r.goToPage},null,8,["pageSize","showPageDropdown","currentPage","totalPages","onSelectPageSize","onGoToPage"])],64)}const _i={class:"modal-card"},Ai={class:"modal-title center-title"},Si={key:0,class:"centered-loading"},Ci={key:1,class:"centered-modal-content"},Pi={class:"scheduled-status-row centered-status-row"},Ni={class:"scheduled-details-table"},zi={class:"justified-table"},Ei={class:"value"},Di={class:"value"},Fi={class:"value"},$i={class:"value"},Mi={class:"modal-form-row"},xi={class:"modal-form-row"},Ii={key:0,class:"modal-form-actions"};function Ti(e,t,s,o,n,r){const l=(0,i.g2)("FormDateTime"),d=(0,i.g2)("MultiSelectDropdown");return(0,i.uX)(),(0,i.CE)("div",_i,[(0,i.Lk)("button",{class:"modal-close",onClick:t[0]||(t[0]=t=>e.$emit("close"))}," × "),(0,i.Lk)("h2",Ai,"Schedule "+(0,h.v_)(s.assessmentName),1),n.scheduledLoading?((0,i.uX)(),(0,i.CE)("div",Si," Loading schedule status... ")):n.scheduledStatus?((0,i.uX)(),(0,i.CE)("div",Ci,[(0,i.Lk)("div",Pi,[(0,i.Lk)("span",{class:(0,h.C4)({"scheduled-status-green":"sent"===n.scheduledStatus,"scheduled-status-yellow":"scheduled"===n.scheduledStatus,"scheduled-status-red":"failed"===n.scheduledStatus})},(0,h.v_)("sent"===n.scheduledStatus?"Mail Sent":"failed"===n.scheduledStatus?"Mail Failed":"Mail Scheduled"),3)]),(0,i.Lk)("div",Ni,[(0,i.Lk)("table",zi,[(0,i.Lk)("tbody",null,[(0,i.Lk)("tr",null,[t[6]||(t[6]=(0,i.Lk)("td",{class:"field"},"Assessment",-1)),(0,i.Lk)("td",Ei,(0,h.v_)(s.assessmentName),1)]),(0,i.Lk)("tr",null,[t[7]||(t[7]=(0,i.Lk)("td",{class:"field"},"Date",-1)),(0,i.Lk)("td",Di,(0,h.v_)(n.scheduledDetails.send_at?n.scheduledDetails.send_at.split("T")[0]:""),1)]),(0,i.Lk)("tr",null,[t[8]||(t[8]=(0,i.Lk)("td",{class:"field"},"Time",-1)),(0,i.Lk)("td",Fi,(0,h.v_)(n.scheduledDetails.send_at?n.scheduledDetails.send_at.split("T")[1]:""),1)]),(0,i.Lk)("tr",null,[t[9]||(t[9]=(0,i.Lk)("td",{class:"field"},"Emails",-1)),(0,i.Lk)("td",$i,(0,h.v_)("sent"===n.scheduledStatus?"Sent":"failed"===n.scheduledStatus?"Failed":"Scheduled"),1)])])])])])):(0,i.Q3)("",!0),n.scheduledStatus||n.scheduledLoading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("form",{key:2,class:"modal-form",onSubmit:t[5]||(t[5]=(0,a.D$)((...e)=>r.emitSchedule&&r.emitSchedule(...e),["prevent"]))},[(0,i.Lk)("div",Mi,[(0,i.bF)(l,{date:n.date,time:n.time,"onUpdate:date":t[1]||(t[1]=e=>n.date=e),"onUpdate:time":t[2]||(t[2]=e=>n.time=e)},null,8,["date","time"])]),(0,i.Lk)("div",xi,[(0,i.bF)(d,{options:n.groups,selectedItems:n.selectedGroups,"onUpdate:selectedItems":t[3]||(t[3]=e=>n.selectedGroups=e),placeholder:"Groups",icon:"fas fa-users",enableSelectAll:!0},null,8,["options","selectedItems"]),(0,i.bF)(d,{options:n.members,selectedItems:n.selectedMembers,"onUpdate:selectedItems":t[4]||(t[4]=e=>n.selectedMembers=e),placeholder:"Members",icon:"fas fa-user",inputValue:n.selectedMembers.map(e=>e.name).join(", "),enableSelectAll:!0},null,8,["options","selectedItems","inputValue"])]),n.scheduledStatus?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",Ii,[...t[10]||(t[10]=[(0,i.Lk)("button",{class:"modal-save-btn",type:"submit"}," Schedule ",-1)])]))],32))])}var Ui=s(4051);const Vi={name:"ScheduleAssessmentModal",components:{FormDateTime:Ui.A,MultiSelectDropdown:Gs},props:{selectedMembers:{type:Array,default:()=>[]},assessmentName:{type:String,default:""},assessment_id:{type:[String,Number],required:!0}},data(){return{date:"",time:"",selectedGroups:[],selectedMembers:[],groups:[],members:[],loadingGroups:!1,loadingMembers:!1,isSyncingSelection:!1,scheduledStatus:null,scheduledDetails:null,scheduledLoading:!1}},mounted:async function(){if("undefined"===typeof this.assessment_id||null===this.assessment_id||""===this.assessment_id)return console.warn("[ScheduleAssessmentModal] assessment_id is undefined/null/empty! Modal will not check schedule."),this.scheduledStatus=null,this.scheduledDetails=null,void(this.scheduledLoading=!1);console.log("[ScheduleAssessmentModal] Checking if schedule exists for assessment_id:",this.assessment_id),this.scheduledLoading=!0;try{const e=(await Promise.resolve().then(s.bind(s,3193))).default,t=(await s.e(110).then(s.bind(s,3110))).default,a=e.get("authToken"),i=this.assessment_id;let o="http://127.0.0.1:8000/api/scheduled-email/show?assessment_id="+encodeURIComponent(i);console.log("[ScheduleAssessmentModal] API URL:",o);const n=await t.get(o,{headers:{Authorization:`Bearer ${a}`}});console.log("[ScheduleAssessmentModal] API response:",n.data),n.data&&n.data.scheduled&&n.data.data?(this.scheduledStatus="scheduled",this.scheduledDetails=n.data.data,console.log("[ScheduleAssessmentModal] Assessment schedule exists:",this.scheduledDetails)):(this.scheduledStatus=null,this.scheduledDetails=null,console.log("[ScheduleAssessmentModal] No schedule exists for this assessment."))}catch(e){this.scheduledStatus=null,this.scheduledDetails=null,console.error("[ScheduleAssessmentModal] Error checking schedule status:",e)}this.scheduledLoading=!1,this.loadingGroups=!0,this.loadingMembers=!0;try{const e=(await Promise.resolve().then(s.bind(s,3193))).default,t=(await s.e(110).then(s.bind(s,3110))).default,a=e.get("authToken"),i=await t.get("http://127.0.0.1:8000/api/groups",{headers:{Authorization:`Bearer ${a}`}});console.log("Fetched groups response:",i.data),Array.isArray(i.data)?this.groups=i.data.map(e=>({id:e.id,name:e.name})):Array.isArray(i.data.groups)?this.groups=i.data.groups.map(e=>({id:e.id,name:e.name})):this.groups=[],this.loadingGroups=!1;const o=await t.get("http://127.0.0.1:8000/api/members",{headers:{Authorization:`Bearer ${a}`}});console.log("Fetched members response:",o.data),Array.isArray(o.data)?(this.members=o.data.map(e=>({id:e.id,name:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.name||e.email||"Unknown",email:e.email,group_ids:e.group_ids||(e.group_id?[e.group_id]:[])})),console.log("Initialized members:",this.members),this.members.forEach((e,t)=>{console.log("Member["+t+"]:",e)})):Array.isArray(o.data.members)?(this.members=o.data.members.map(e=>({id:e.id,name:e.first_name&&e.last_name?`${e.first_name} ${e.last_name}`:e.name||e.email||"Unknown",email:e.email,group_ids:e.group_ids||(e.group_id?[e.group_id]:[])})),console.log("Initialized members:",this.members),this.members.forEach((e,t)=>{console.log("Member["+t+"]:",e)})):(this.members=[],console.log("No members found")),this.loadingMembers=!1}catch(e){this.groups=[],this.members=[],this.loadingGroups=!1,this.loadingMembers=!1,console.error("Error fetching groups/members:",e)}},watch:{assessmentName(){this.date="",this.time="",this.selectedGroups=[],this.selectedMembers=[]},selectedGroups:{handler(e){if(console.log("selectedGroups changed:",e),this.isSyncingSelection)return;if(this.isSyncingSelection=!0,!Array.isArray(e)||0===e.length)return this.selectedMembers.length>0&&(this.selectedMembers=[],console.log("No groups selected, clearing selectedMembers")),void(this.isSyncingSelection=!1);const t=e.map(e=>e.id);console.log("Selected group IDs:",t);const s=this.members.filter(e=>{if(Array.isArray(e.group_ids)){const s=e.group_ids.some(e=>t.includes(e));return s&&console.log("Member matched:",e.name,e.group_ids),s}if(e.group_id){const s=t.includes(e.group_id);return s&&console.log("Member matched:",e.name,e.group_id),s}return!1});console.log("Auto-selected members:",s.map(e=>e.name));const a=s.map(e=>e.id).sort().join(","),i=this.selectedMembers.map(e=>e.id).sort().join(",");a!==i&&(this.selectedMembers=s,console.log("selectedMembers set:",this.selectedMembers.map(e=>e.name))),this.isSyncingSelection=!1},deep:!0},selectedMembers:{handler(e){if(this.isSyncingSelection)return;this.isSyncingSelection=!0;const t={};this.groups.forEach(e=>{t[e.id]=this.members.filter(t=>Array.isArray(t.group_ids)&&t.group_ids.includes(e.id)).map(e=>e.id)});const s=e.map(e=>e.id),a=this.groups.filter(e=>{const a=t[e.id];return a.length>0&&a.every(e=>s.includes(e))}),i=this.selectedGroups.map(e=>e.id),o=[...a,...this.groups.filter(e=>i.includes(e.id)&&!a.some(t=>t.id===e.id))],n=o.map(e=>e.id).sort().join(","),r=this.selectedGroups.map(e=>e.id).sort().join(",");n!==r&&(this.selectedGroups=o),this.isSyncingSelection=!1},deep:!0}},methods:{emitSchedule(){const e=new Date(`${this.date}T${this.time}:00`),t=e.toISOString();this.$emit("schedule",{date:this.date,time:this.time,send_at:t,groupIds:this.selectedGroups.map(e=>e.id),memberIds:this.selectedMembers.map(e=>e.id),selectedMembers:this.selectedMembers})}}},Oi=(0,d.A)(Vi,[["render",Ti],["__scopeId","data-v-17d65ab8"]]),Ri=Oi,Xi={name:"OrganizationAdminAssessmentsCard",components:{Pagination:At.A,ScheduleAssessmentModal:Ri,TableHeader:St.A},data(){return{assessments:[],showScheduleModal:!1,selectedAssessment:null,showCreateModal:!1,newAssessment:{name:"",selectedQuestionIds:[]},questions:[],pageSize:10,currentPage:1,showPageDropdown:!1,showGroupsDropdown:!1,showMembersDropdown:!1,loading:!1,toast:null,showScheduleDetailsModal:!1,scheduleDetails:null,allGroups:[],allMembers:[]}},created(){this.toast=(0,E.d)()},computed:{paginatedAssessments(){const e=(this.currentPage-1)*this.pageSize;return this.assessments.slice(e,e+this.pageSize)},totalPages(){return Math.ceil(this.assessments.length/this.pageSize)||1},groupNameMap(){const e={};return(this.allGroups||[]).forEach(t=>{e[t.id]=t.name}),e},memberNameMap(){const e={};return(this.allMembers||[]).forEach(t=>{const s=(t.first_name||t.name||"").toString().trim(),a=(t.last_name||"").toString().trim(),i=(t.member_role||t.role||"").toString().trim();let o=s;a&&(o=o?`${o} ${a}`:a),o||(o=t.email||t.id||"Unknown"),i&&(o=`${o} — ${i}`),e[t.id]=o}),e},memberDetailMap(){const e={};return(this.allMembers||[]).forEach(t=>{const s=(t.first_name||t.name||"").toString().trim(),a=(t.last_name||"").toString().trim();let i=s;a&&(i=i?`${i} ${a}`:a),i||(i=t.email||`Member ${t.id}`),e[t.id]={name:i,email:t.email||"",role:(t.member_role||t.role||"").toString().trim()||""}}),e},filteredEmails(){if(!this.scheduleDetails||!this.scheduleDetails.emails)return[];const e=this.scheduleDetails.schedule;return e?(this.scheduleDetails.emails||[]).filter(e=>e&&e.assessment_id==this.scheduleDetails.assessment.id):[]},groupedEmails(){const e=this.filteredEmails||[],t=this.scheduleDetails&&this.scheduleDetails.schedule||null,s=new Map,a=e=>{if(!e)return[];if(Array.isArray(e))return e.map(e=>Number(e));try{const t=JSON.parse(e);if(Array.isArray(t))return t.map(e=>Number(e))}catch(t){return e.toString().replace(/\[|\]|\s+/g,"").split(",").filter(Boolean).map(e=>Number(e))}return[]},i=t?a(t.group_ids):[];t&&a(t.member_ids);return i&&i.length?(i.forEach(t=>{const i=(this.allGroups||[]).find(e=>Number(e.id)===Number(t)),o=i&&(i.name||i.group)||`Group ${t}`,n=[];e.forEach(e=>{const s=new Set;if(e.group_id&&s.add(Number(e.group_id)),e.group_ids)try{const t=Array.isArray(e.group_ids)?e.group_ids:JSON.parse(e.group_ids);Array.isArray(t)&&t.forEach(e=>s.add(Number(e)))}catch(a){}s.has(Number(t))&&n.push(e)});let r=[];i&&Array.isArray(i.members)&&i.members.length&&(r=i.members.map(e=>e&&e.id?Number(e.id):Number(e)).filter(Boolean)),r.length||(this.allMembers||[]).forEach(e=>{const s=Number(e.id);if(!s)return;if(e.group_id&&Number(e.group_id)===Number(t))return void r.push(s);const i=a(e.group_ids||e.group_ids_raw||e.groups||e.group_ids_json);i&&i.includes(Number(t))&&r.push(s)}),(r||[]).forEach(e=>{const t=n.find(t=>Number(t.member_id)===Number(e));t||n.push({member_id:e})}),s.set(t,{id:t,name:o,items:n})}),Array.from(s.values())):(e.forEach(e=>{const t=e.group_id||e.group||"ungrouped",a=e.group_name||e.group||("ungrouped"===t?"Ungrouped":null);s.has(t)||s.set(t,{id:t,name:a||"Group",items:[]}),s.get(t).items.push(e)}),Array.from(s.values()))}},methods:{async openScheduleDetails(e){try{const t=await P.A.get("http://127.0.0.1:8000/api/scheduled-email/show",{params:{assessment_id:e.id}});this.scheduleDetails=t.data}catch(t){this.scheduleDetails=null}this.selectedAssessment=e,this.showScheduleDetailsModal=!0},formatLocalDateTime(e,t){if(!e)return"";try{const s=(e||"").toString().trim(),a=(t||"").toString().trim(),i=s.match(/^(\d{4})-(\d{2})-(\d{2})$/),o=a.match(/^(\d{2}):(\d{2})(?::(\d{2}))?$/);let n,r,l,d,u,c;if(i)n=Number(i[1]),r=Number(i[2])-1,l=Number(i[3]);else{const a=new Date(s);if(isNaN(a.getTime()))return e+(t?" "+t:"");n=a.getFullYear(),r=a.getMonth(),l=a.getDate()}o?(d=Number(o[1]),u=Number(o[2]),c=o[3]?Number(o[3]):0):(d=0,u=0,c=0);const m=new Date(n,r,l,d,u,c);if(isNaN(m.getTime()))return e+(t?" "+t:"");const h=String(m.getDate()).padStart(2,"0"),p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],g=p[m.getMonth()],f=m.getFullYear();let b=m.getHours();const y=String(m.getMinutes()).padStart(2,"0"),k=b>=12?"PM":"AM";return b%=12,b=b||12,`${h} ${g},${f} ${b}:${y} ${k}`}catch(s){return e+(t?" "+t:"")}},formatSendAt(e){if(!e)return"";try{const t=(e||"").toString().trim();if(t.includes("T")){const e=new Date(t);if(isNaN(e.getTime()))return t;const s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return this.formatLocalDateTime(`${s}-${a}-${i}`,`${o}:${n}`)}if(t.includes(" ")){const[e,s]=t.split(" "),a=(s||"").split(":").slice(0,2).join(":");return this.formatLocalDateTime(e,a)}return t}catch(t){return e}},closeScheduleDetailsModal(){this.showScheduleDetailsModal=!1,this.scheduleDetails=null},async openScheduleModal(e){try{const t=await P.A.get("http://127.0.0.1:8000/api/scheduled-email/show",{params:{assessment_id:e.id}});return console.log("Scheduled check response:",t.data),!t.data||!0!==t.data.scheduled&&1!==t.data.scheduled?!t.data||!1!==t.data.scheduled&&0!==t.data.scheduled?void this.openScheduleDetails(e):(this.selectedAssessment=e,void(this.showScheduleModal=!0)):void this.openScheduleDetails(e)}catch(t){return console.error("Schedule check error:",t),void this.toast.add({severity:"error",summary:"Error",detail:"Could not check schedule status.",life:3500})}},closeScheduleModal(){this.showScheduleModal=!1,this.selectedAssessment=null,this.showGroupsDropdown=!1,this.showMembersDropdown=!1},goToSummary(e){this.$router.push({name:"AssessmentSummary",params:{assessmentId:e.id}})},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},closeCreateModal(){this.showCreateModal=!1,this.newAssessment={name:"",selectedQuestionIds:[]}},submitAssessment:async function(){const e=this.questions.filter(e=>this.newAssessment.selectedQuestionIds.includes(e.id));if(this.newAssessment.name&&0!==e.length)try{const e=D["default"].get("authToken"),t=await P.A.post("http://127.0.0.1:8000/api/assessments",{name:this.newAssessment.name,question_ids:this.newAssessment.selectedQuestionIds},{headers:{Authorization:`Bearer ${e}`}});t.data&&t.data.assessment&&this.assessments.unshift(t.data.assessment),this.closeCreateModal()}catch(t){alert("Failed to create assessment.")}else alert("Please enter a name and select at least one question.")},async handleScheduleAssessment({date:e,time:t,groupIds:s,memberIds:a,selectedMembers:i}){if(this.selectedAssessment&&e&&t)try{const o=D["default"].get("authToken");await P.A.post("http://127.0.0.1:8000/api/assessment-schedules",{assessment_id:this.selectedAssessment.id,date:e,time:t,group_ids:s,member_ids:a},{headers:{Authorization:`Bearer ${o}`}});const n=new Date(`${e}T${t}:00`),r=n.toISOString(),l="Assessment Scheduled",d="You have an assessment scheduled.";for(const e of i||[])if(e.email){let t=null;Array.isArray(e.group_ids)&&e.group_ids.length>0?t=e.group_ids[0]:e.group_id?t=e.group_id:Array.isArray(s)&&1===s.length&&(t=s[0]),await P.A.post("http://127.0.0.1:8000/api/schedule-email",{recipient_email:e.email,subject:l,body:d,send_at:r,assessment_id:this.selectedAssessment.id,member_id:e.id,group_id:t},{headers:{Authorization:`Bearer ${o}`}})}this.closeScheduleModal(),this.toast.add({severity:"success",summary:"Scheduled",detail:"Assessment scheduled and emails queued!",life:3500})}catch(o){this.toast.add({severity:"error",summary:"Error",detail:"Failed to schedule assessment or emails.",life:3500})}else this.toast.add({severity:"warn",summary:"Missing Data",detail:"Please select assessment, date, and time.",life:3500})}},mounted:async function(){this.loading=!0;try{const t=D["default"].get("authToken"),s=D["default"].get("user_id"),a=D["default"].get("organization_id")||D["default"].get("org_id")||D["default"].get("organizationId")||D["default"].get("orgId")||D["default"].get("user")&&D["default"].get("user").organization_id||null,i={};a?i.organization_id=a:s&&(i.user_id=s);const o="http://127.0.0.1:8000";if(0===Object.keys(i).length&&t)try{console.log("[OrganizationAdminAssessmentsCard] no params found; fetching /api/profile to determine org");const e=await P.A.get(o+"/api/profile",{headers:{Authorization:`Bearer ${t}`}}),s=e.data||{},a=s.organization_id||s.user&&s.user.organization_id||null;a&&(i.organization_id=a),console.log("[OrganizationAdminAssessmentsCard] profile returned:",s)}catch(e){console.warn("[OrganizationAdminAssessmentsCard] failed to fetch profile",e&&e.message)}console.log("[OrganizationAdminAssessmentsCard] fetching /api/assessments with params:",i);const n=await P.A.get(o+"/api/assessments",{headers:{Authorization:`Bearer ${t}`},params:i});Array.isArray(n.data.assessments)?this.assessments=n.data.assessments:Array.isArray(n.data)?this.assessments=n.data:this.assessments=[];const r=await P.A.get("http://127.0.0.1:8000/api/organization-assessment-questions",{headers:{Authorization:`Bearer ${t}`}});Array.isArray(r.data.questions)?this.questions=r.data.questions:Array.isArray(r.data)?this.questions=r.data:this.questions=[];const l=await P.A.get("http://127.0.0.1:8000/api/groups",{headers:{Authorization:`Bearer ${t}`}});Array.isArray(l.data.groups)?this.allGroups=l.data.groups:Array.isArray(l.data)?this.allGroups=l.data:this.allGroups=[];const d=await P.A.get("http://127.0.0.1:8000/api/members",{headers:{Authorization:`Bearer ${t}`}});Array.isArray(d.data.members)?this.allMembers=d.data.members:Array.isArray(d.data)?this.allMembers=d.data:this.allMembers=[]}catch(e){this.assessments=[],this.questions=[]}finally{this.loading=!1}}},Wi=(0,d.A)(Xi,[["render",Li],["__scopeId","data-v-6d89af08"]]),Bi=Wi,Gi={class:"user-assessment-outer"},ji={class:"user-assessment-card"},Ki={class:"user-assessment-header"},qi={class:"user-assessment-title"},Qi={class:"user-assessment-table-container"},Yi={class:"user-assessment-words-grid"},Hi=["value"],Ji={class:"user-assessment-footer"},Zi={style:{flex:"1",display:"flex","align-items":"center"}},eo={class:"user-assessment-step-btn"},to={style:{flex:"1",display:"flex","justify-content":"flex-end","align-items":"center",gap:"12px"}},so=["disabled"],ao=["disabled"],io={key:1,class:"user-assessment-success-card"};function oo(e,t,s,o,n,r){return(0,i.uX)(),(0,i.CE)("div",Gi,[(0,i.Lk)("div",ji,[o.submitted?((0,i.uX)(),(0,i.CE)("div",io,[t[7]||(t[7]=(0,i.Fv)('<div class="user-assessment-success-icon" data-v-44142d19><svg width="80" height="80" viewBox="0 0 80 80" fill="none" data-v-44142d19><circle cx="40" cy="40" r="40" fill="#2ECC40" data-v-44142d19></circle><path d="M25 42l13 13 17-23" stroke="#fff" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" data-v-44142d19></path></svg></div><div class="user-assessment-success-title" data-v-44142d19> Assessment submitted successfully and processed! </div><div class="user-assessment-success-desc" data-v-44142d19> Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged </div>',3)),o.isSubscribed?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"user-assessment-success-btn",onClick:t[4]||(t[4]=(...e)=>o.goToManageSubscription&&o.goToManageSubscription(...e))}," Manage Subscription ")):((0,i.uX)(),(0,i.CE)("button",{key:1,class:"user-assessment-success-btn",onClick:t[5]||(t[5]=(...e)=>o.explorePlans&&o.explorePlans(...e))}," Explore Subscriptions ")),t[8]||(t[8]=(0,i.Lk)("div",{style:{"margin-top":"16px"}},null,-1))])):((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.Lk)("div",Ki,[(0,i.Lk)("div",qi,(0,h.v_)(o.currentQuestion.question||`Question ${o.step}`),1)]),(0,i.Lk)("div",Qi,[(0,i.Lk)("div",Yi,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(o.currentQuestion.options,e=>((0,i.uX)(),(0,i.CE)("label",{key:e,class:(0,h.C4)(["user-assessment-checkbox-label",{checked:o.currentSelectedWords.includes(e)}])},[t[6]||(t[6]=(0,i.Lk)("span",{class:"user-assessment-checkbox-custom"},null,-1)),(0,i.bo)((0,i.Lk)("input",{type:"checkbox",value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedWords[o.step-1]=e)},null,8,Hi),[[a.lH,o.selectedWords[o.step-1]]]),(0,i.eW)(" "+(0,h.v_)(e),1)],2))),128))])]),(0,i.Lk)("div",Ji,[(0,i.Lk)("div",Zi,[(0,i.Lk)("span",eo," Question "+(0,h.v_)(o.step)+" of "+(0,h.v_)(o.totalSteps),1)]),(0,i.Lk)("div",to,[o.step>1?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"user-assessment-back-btn",onClick:t[1]||(t[1]=(...e)=>o.goToBack&&o.goToBack(...e))}," Back ")):(0,i.Q3)("",!0),o.step<o.totalSteps?((0,i.uX)(),(0,i.CE)("button",{key:1,class:"user-assessment-next-btn",disabled:!o.canProceed,onClick:t[2]||(t[2]=(...e)=>o.goToNext&&o.goToNext(...e))}," Next ",8,so)):((0,i.uX)(),(0,i.CE)("button",{key:2,class:"user-assessment-next-btn",disabled:!o.canProceed,onClick:t[3]||(t[3]=(...e)=>o.handleSubmit&&o.handleSubmit(...e))}," Submit ",8,ao))])])],64))])])}const no="http://127.0.0.1:8000",ro={name:"UserAssessment",setup(){const e=(0,m.rd)(),t=(0,Me.KR)(1),a=(0,Me.KR)([]),o=(0,Me.KR)([]),n=(0,Me.KR)(!1),r=(0,Me.KR)(!1),l=(0,i.EW)(()=>a.value.length),d=(0,i.EW)(()=>a.value[t.value-1]||{question:"",options:[]}),u=(0,i.EW)(()=>o.value[t.value-1]||[]),c=(0,i.EW)(()=>o.value[t.value-1]&&o.value[t.value-1].length>0),h=async()=>{try{const e=s(3193)["default"],i=e.get("authToken"),n=e.get("user_id"),l={};i&&(l["Authorization"]=`Bearer ${i}`);const d={};n&&(d["user_id"]=n);const u=await P.A.get(`${no}/api/questions`,{headers:l,params:d});Array.isArray(u.data)&&(a.value=u.data,o.value=u.data.map(()=>[]));const c=await P.A.get(`${no}/api/answers`,{headers:l,params:d});Array.isArray(c.data)&&c.data.forEach(e=>{const t=a.value.findIndex(t=>String(t.id)===String(e.question_id));-1!==t&&Array.isArray(e.answer)&&(o.value[t]=e.answer)});try{const e=await P.A.get(`${no}/api/subscription/status`,{headers:l});r.value=!(!e.data||!e.data.active&&"active"!==e.data.status&&!e.data.subscribed)}catch(t){r.value=!1}}catch(i){i.response&&401===i.response.status?e.push("/login"):alert("Failed to load assessment questions or answers.")}},p=()=>{t.value<l.value&&c.value&&t.value++},g=()=>{t.value>1&&t.value--},f=async()=>{if(!c.value)return;const t=s(3193)["default"],i=t.get("authToken");if(!i)return alert("You must be logged in to submit an assessment."),void e.push("/login");const r=a.value.map((e,t)=>({question_id:e.id,answer:o.value[t]||[]}));try{await P.A.post(`${no}/api/answers`,{answers:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}}),n.value=!0}catch(l){let t="Failed to submit assessment. Please try again.";l.response&&401===l.response.status&&(t="Your session has expired. Please log in again.",e.push("/login")),alert(t)}};(0,i.sV)(h);const b=()=>{e.push({name:"ManageSubscription"})},y=()=>{e.push({name:"SubscriptionPlans"})};return{step:t,questions:a,selectedWords:o,submitted:n,totalSteps:l,currentQuestion:d,currentSelectedWords:u,canProceed:c,goToNext:p,goToBack:g,handleSubmit:f,goToManageSubscription:b,explorePlans:y,isSubscribed:r}}},lo=(0,d.A)(ro,[["render",oo],["__scopeId","data-v-44142d19"]]),uo=lo,co={name:"Assessments",components:{MainLayout:r.A,OrganizationAdminAssessmentsCard:Bi,UserAssessment:uo},computed:{isOrganizationAdmin(){const e=s(3193)["default"],t=e.get("role")||"user";return"organizationadmin"===t},isUser(){const e=s(3193)["default"],t=e.get("role")||"user";return"user"===t}}},mo=(0,d.A)(co,[["render",Da],["__scopeId","data-v-0664c6d1"]]),ho=mo,po={class:"page"},go={class:"table-outer"},fo={class:"table-card"};function bo(e,t,s,a,o,n){const r=(0,i.g2)("OrgActionButtons"),l=(0,i.g2)("MemberTable"),d=(0,i.g2)("Pagination"),u=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(u,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",po,[(0,i.Lk)("div",go,[(0,i.Lk)("div",fo,[(0,i.bF)(r,{onShowAddGroup:t[0]||(t[0]=t=>e.showAddGroupModal=!0),onShowAddMember:t[1]||(t[1]=t=>e.showAddMemberModal=!0)}),(0,i.bF)(l,{groups:n.paginatedGroups,onViewGroup:n.viewGroup},null,8,["groups","onViewGroup"])]),(0,i.bF)(d,{pageSize:o.pageSize,pageSizes:o.pageSizes,showPageDropdown:o.showPageDropdown,currentPage:o.currentPage,totalPages:n.totalPages,onTogglePageDropdown:n.togglePageDropdown,onSelectPageSize:n.selectPageSize,onGoToPage:n.goToPage},null,8,["pageSize","pageSizes","showPageDropdown","currentPage","totalPages","onTogglePageDropdown","onSelectPageSize","onGoToPage"])])])]),_:1})}var yo=s(9586);const ko={class:"table-card"},vo={class:"table-container"},wo={class:"table"},Lo=["onClick"],_o={key:0};function Ao(e,t,s,a,o,n){const r=(0,i.g2)("TableHeader");return(0,i.uX)(),(0,i.CE)("div",ko,[(0,i.Lk)("div",vo,[(0,i.Lk)("table",wo,[(0,i.bF)(r,{columns:[{label:"Group Name",key:"name"},{label:"Actions",key:"action"},{},{}]}),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(s.groups,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,(0,h.v_)(e.name),1),(0,i.Lk)("td",null,[(0,i.Lk)("button",{class:"btn-view",onClick:t=>n.viewGroup(e)},[...t[0]||(t[0]=[(0,i.Lk)("img",{src:yo,alt:"View",class:"btn-view-icon"},null,-1),(0,i.Lk)("span",{class:"view-label"},"View",-1)])],8,Lo)])]))),128)),0===s.groups.length?((0,i.uX)(),(0,i.CE)("tr",_o,[...t[1]||(t[1]=[(0,i.Lk)("td",{colspan:"2",class:"empty-row"}," No groups found. ",-1)])])):(0,i.Q3)("",!0)])])])])}const So={name:"MemberTable",components:{TableHeader:St.A},props:{groups:{type:Array,default:()=>[]}},methods:{viewGroup(e){this.$emit("view-group",e)}}},Co=(0,d.A)(So,[["render",Ao]]),Po=Co,No={class:"table-header-bar"},zo={class:"my-org-action-buttons"},Eo={key:0,class:"modal-overlay"},Do={class:"modal-card"},Fo={key:1,class:"modal-overlay"},$o={class:"modal-card"};function Mo(e,t,s,o,n,r){const l=(0,i.g2)("FormInput"),d=(0,i.g2)("FormRow"),u=(0,i.g2)("MultiSelectDropdown");return(0,i.uX)(),(0,i.CE)("div",No,[(0,i.Lk)("div",zo,[(0,i.Lk)("button",{class:"my-org-secondary",onClick:t[0]||(t[0]=t=>e.$router.push({name:"MemberListing"}))}," Members Listing "),(0,i.Lk)("button",{class:"my-org-primary",onClick:t[1]||(t[1]=(...e)=>r.openAddGroupModal&&r.openAddGroupModal(...e))},[...t[15]||(t[15]=[(0,i.Lk)("img",{src:Qs,alt:"Add",style:{width:"18px",height:"18px","margin-right":"6px","vertical-align":"middle"}},null,-1),(0,i.eW)(" Add New Group ",-1)])]),(0,i.Lk)("button",{class:"my-org-primary",onClick:t[2]||(t[2]=(...e)=>r.openAddMemberModal&&r.openAddMemberModal(...e))},[...t[16]||(t[16]=[(0,i.Lk)("img",{src:Qs,alt:"Add",style:{width:"18px",height:"18px","margin-right":"6px","vertical-align":"middle"}},null,-1),(0,i.eW)(" Add New Member ",-1)])])]),n.showAddMemberModal?((0,i.uX)(),(0,i.CE)("div",Eo,[(0,i.Lk)("div",Do,[(0,i.Lk)("button",{class:"modal-close",onClick:t[3]||(t[3]=e=>n.showAddMemberModal=!1)}," × "),t[18]||(t[18]=(0,i.Lk)("h2",{class:"modal-title"},"Add New Member",-1)),(0,i.Lk)("form",{class:"modal-form",onSubmit:t[10]||(t[10]=(0,a.D$)((...e)=>r.saveMember&&r.saveMember(...e),["prevent"]))},[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,{modelValue:n.newMember.firstName,"onUpdate:modelValue":t[4]||(t[4]=e=>n.newMember.firstName=e),placeholder:"First Name",icon:"fas fa-user",required:""},null,8,["modelValue"]),(0,i.bF)(l,{modelValue:n.newMember.lastName,"onUpdate:modelValue":t[5]||(t[5]=e=>n.newMember.lastName=e),placeholder:"Last Name",icon:"fas fa-user",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(d,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,{modelValue:n.newMember.email,"onUpdate:modelValue":t[6]||(t[6]=e=>n.newMember.email=e),placeholder:"Email",icon:"fas fa-envelope",type:"email",required:""},null,8,["modelValue"]),(0,i.bF)(l,{modelValue:n.newMember.phone,"onUpdate:modelValue":t[7]||(t[7]=e=>n.newMember.phone=e),placeholder:"Phone Number",icon:"fas fa-phone",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(d,null,{default:(0,i.k6)(()=>[(0,i.bF)(u,{options:n.roles,selectedItems:Array.isArray(n.newMember.roles)?n.newMember.roles:[],"onUpdate:selectedItems":t[8]||(t[8]=e=>n.newMember.roles=e),placeholder:"Role",icon:"fas fa-user-tag",enableSelectAll:!0},null,8,["options","selectedItems"]),(0,i.bF)(u,{options:n.groups,selectedItems:Array.isArray(n.newMember.groups)?n.newMember.groups:[],"onUpdate:selectedItems":t[9]||(t[9]=e=>n.newMember.groups=e),placeholder:"Groups associated with",enableSelectAll:!0},null,8,["options","selectedItems"])]),_:1}),t[17]||(t[17]=(0,i.Lk)("div",{class:"modal-form-actions"},[(0,i.Lk)("button",{type:"submit",class:"modal-save-btn"}," Save Member ")],-1))],32)])])):(0,i.Q3)("",!0),n.showAddGroupModal?((0,i.uX)(),(0,i.CE)("div",Fo,[(0,i.Lk)("div",$o,[(0,i.Lk)("button",{class:"modal-close",onClick:t[11]||(t[11]=e=>n.showAddGroupModal=!1)}," × "),t[20]||(t[20]=(0,i.Lk)("h2",{class:"modal-title"},"Add New Group",-1)),(0,i.Lk)("form",{class:"modal-form",onSubmit:t[14]||(t[14]=(0,a.D$)((...e)=>r.saveGroup&&r.saveGroup(...e),["prevent"]))},[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,{icon:"fas fa-users",modelValue:n.newGroup.name,"onUpdate:modelValue":t[12]||(t[12]=e=>n.newGroup.name=e),placeholder:" Group Name",required:""},null,8,["modelValue"]),(0,i.bF)(u,{options:n.availableMembers,selectedItems:Array.isArray(n.newGroup.members)?n.newGroup.members:[],"onUpdate:selectedItems":t[13]||(t[13]=e=>n.newGroup.members=e),placeholder:"Members",icon:"fas fa-user",enableSelectAll:!0},null,8,["options","selectedItems"])]),_:1}),t[19]||(t[19]=(0,i.Lk)("div",{class:"modal-form-actions"},[(0,i.Lk)("button",{type:"submit",class:"modal-save-btn"}," Save Group ")],-1))],32)])])):(0,i.Q3)("",!0)])}var xo=s(7420);const Io={name:"OrgActionButtons",components:{FormInput:Is.A,MultiSelectDropdown:Gs,FormRow:xo.A,Toast:z.A},data(){return{showAddMemberModal:!1,showAddGroupModal:!1,newMember:{firstName:"",lastName:"",email:"",phone:"",roles:[],groups:[]},newGroup:{name:"",members:[]},roles:[{id:1,name:"Manager"},{id:2,name:"CEO"},{id:3,name:"Owner"},{id:4,name:"Support"}],groups:[],availableMembers:[],toast:null}},mounted(){this.toast=(0,E.d)()},methods:{async openAddMemberModal(){try{const e=D["default"].get("authToken"),t="http://127.0.0.1:8000",s=await P.A.get(`${t}/api/groups`,{headers:{Authorization:`Bearer ${e}`}});this.groups=Array.isArray(s.data)?s.data:[]}catch(e){this.groups=[]}this.showAddMemberModal=!0},openAddGroupModal(){this.availableMembers=[];const e=D["default"].get("authToken"),t="http://127.0.0.1:8000";P.A.get(`${t}/api/members`,{headers:{Authorization:`Bearer ${e}`}}).then(e=>{Array.isArray(e.data)?this.availableMembers=e.data.map(e=>({...e,id:e.id||e.value||e,name:`${e.first_name||e.firstName||""} ${e.last_name||e.lastName||""}`.trim()})):this.availableMembers=[]}).catch(()=>{this.availableMembers=[]}).finally(()=>{this.showAddGroupModal=!0})},async saveMember(){try{if(!Array.isArray(this.newMember.roles)||0===this.newMember.roles.length)return void this.toast.add({severity:"error",summary:"Error",detail:"Please select a role for the member.",life:4e3});const e={first_name:this.newMember.firstName,last_name:this.newMember.lastName,email:this.newMember.email,phone:this.newMember.phone,member_role:this.newMember.roles[0].name||this.newMember.roles[0],group_ids:Array.isArray(this.newMember.groups)?this.newMember.groups.map(e=>e.id||e.value||e):[]},t=D["default"].get("authToken"),s={};t&&(s["Authorization"]=`Bearer ${t}`),await P.A.post("http://127.0.0.1:8000/api/members",e,{headers:s}),this.toast.add({severity:"success",summary:"Success",detail:"Member added successfully!",life:3e3}),this.$emit("member-added")}catch(e){let t="Failed to add member.";e.response&&e.response.data&&e.response.data.message?t=e.response.data.message:e.response&&e.response.data&&"string"===typeof e.response.data&&(t=e.response.data),this.toast.add({severity:"error",summary:"Error",detail:t,life:4e3})}this.showAddMemberModal=!1,this.groups=[],this.newMember={firstName:"",lastName:"",email:"",phone:"",roles:[],groups:[]}},async saveGroup(){try{const e={name:this.newGroup.name,member_ids:Array.isArray(this.newGroup.members)?this.newGroup.members.map(e=>e.id||e.value||e):[]},t=D["default"].get("authToken"),s={};t&&(s["Authorization"]=`Bearer ${t}`),await P.A.post("http://127.0.0.1:8000/api/groups",e,{headers:s}),this.toast.add({severity:"success",summary:"Success",detail:"Group added successfully!",life:3e3}),this.$emit("group-added")}catch(e){let t="Failed to add group.";e.response&&e.response.data&&e.response.data.message?t=e.response.data.message:e.response&&e.response.data&&"string"===typeof e.response.data&&(t=e.response.data),this.toast.add({severity:"error",summary:"Error",detail:t,life:4e3})}this.showAddGroupModal=!1,this.availableMembers=[],this.newGroup={name:"",members:[]}}}},To=(0,d.A)(Io,[["render",Mo],["__scopeId","data-v-b718e09c"]]),Uo=To,Vo={name:"MyOrganization",components:{MainLayout:r.A,MemberTable:Po,OrgActionButtons:Uo,Pagination:At.A},data(){return{groups:[],members:[],pageSize:10,pageSizes:[10,25,100],currentPage:1,showPageDropdown:!1}},computed:{totalPages(){return Math.ceil(this.groups.length/this.pageSize)||1},paginatedGroups(){const e=(this.currentPage-1)*this.pageSize;return this.groups.slice(e,e+this.pageSize)}},methods:{async loadGroups(){const e=D["default"].get("authToken"),t={};e&&(t["Authorization"]=`Bearer ${e}`);try{const e=await P.A.get("http://127.0.0.1:8000/api/groups",{headers:t});this.groups=e.data}catch(s){this.groups=[]}},async loadMembers(){const e=D["default"].get("authToken"),t={};e&&(t["Authorization"]=`Bearer ${e}`);try{const e=await P.A.get("http://127.0.0.1:8000/api/members",{headers:t});this.members=e.data}catch(s){this.members=[]}},togglePageDropdown(){this.showPageDropdown=!this.showPageDropdown},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},viewGroup(e){alert(`Viewing group: ${e.name}`)}},mounted(){this.loadGroups(),this.loadMembers()}},Oo=(0,d.A)(Vo,[["render",bo],["__scopeId","data-v-93f744f6"]]),Ro=Oo;s(2435);const Xo={class:"page"},Wo={class:"send-assessment-table-outer"},Bo={class:"send-assessment-table-card"},Go={class:"send-assessment-field"},jo={class:"send-assessment-field"},Ko={class:"send-assessment-template-box"},qo={class:"send-assessment-link-actions-row"},Qo={class:"send-assessment-actions"},Yo=["disabled"];function Ho(e,t,s,o,n,r){const l=(0,i.g2)("FormLabel"),d=(0,i.g2)("FormInput"),u=(0,i.g2)("FormRow"),c=(0,i.g2)("Editor"),m=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(m,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Xo,[(0,i.Lk)("div",Wo,[(0,i.Lk)("div",Bo,[t[7]||(t[7]=(0,i.Lk)("div",{class:"send-assessment-table-header"},[(0,i.Lk)("div",{class:"send-assessment-title"},"Send Assessment")],-1)),t[8]||(t[8]=(0,i.Lk)("div",{class:"send-assessment-desc",style:{"margin-bottom":"18px"}}," Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",-1)),(0,i.Lk)("form",{class:"send-assessment-form",onSubmit:t[3]||(t[3]=(0,a.D$)((...e)=>r.handleSendAssessment&&r.handleSendAssessment(...e),["prevent"]))},[(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Go,[(0,i.bF)(l,null,{default:(0,i.k6)(()=>[...t[4]||(t[4]=[(0,i.eW)("To",-1)])]),_:1}),(0,i.bF)(d,{modelValue:n.to,"onUpdate:modelValue":t[0]||(t[0]=e=>n.to=e),type:"email",placeholder:"meet@gmail.com"},null,8,["modelValue"])]),(0,i.Lk)("div",jo,[(0,i.bF)(l,null,{default:(0,i.k6)(()=>[...t[5]||(t[5]=[(0,i.eW)("Subject",-1)])]),_:1}),(0,i.bF)(d,{modelValue:n.subject,"onUpdate:modelValue":t[1]||(t[1]=e=>n.subject=e),type:"text",placeholder:"Type here"},null,8,["modelValue"])])]),_:1}),t[6]||(t[6]=(0,i.Lk)("div",{class:"send-assessment-label"},"Editable Template",-1)),(0,i.Lk)("div",Ko,[n.editorReady?((0,i.uX)(),(0,i.Wv)(c,{key:n.editorKey,modelValue:n.templateContent,"onUpdate:modelValue":t[2]||(t[2]=e=>n.templateContent=e),editorStyle:"height: 320px;"},null,8,["modelValue"])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",qo,[(0,i.Lk)("div",Qo,[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:n.sending},(0,h.v_)(n.sending?"Sending...":"Send Assessment"),9,Yo)])])],32)])])])]),_:1})}var Jo=s(6031);const Zo={name:"SendAssessment",components:{MainLayout:r.A,Editor:Jo.A,FormInput:ne.ZQ,FormRow:ne.fh,FormLabel:ne.lR},data(){return{to:"",recipientName:"",subject:"Complete Your Registration",templateContent:"",sending:!1,registrationLink:"",editorReady:!1,editorKey:0}},mounted(){const e=this.$route.params||{},t=e.id||this.$route.query.lead_id||null;t&&(async()=>{try{const e="http://127.0.0.1:8000",a=s(3193)["default"],i=a.get("authToken"),o=await P.A.get(`${e}/api/leads/${t}`,{headers:i?{Authorization:`Bearer ${i}`}:{}}),n=o.data||null,r=n&&n.lead?n.lead:n;r&&(this.to=r.email||"",this.recipientName=`${r.first_name||""} ${r.last_name||""}`.trim())}catch(e){}})(),this.to=this.to||e.email||this.$route.query.email||"",this.recipientName=this.recipientName||e.contact||e.name||this.$route.query.contact||this.$route.query.name||""},watch:{to:{handler(e){e?this.fetchServerTemplate():(this.templateContent="",this.editorReady=!1)},immediate:!0}},methods:{updateRegistrationLink(){this.to?this.registrationLink=`${window.location.origin}/register?email=${encodeURIComponent(this.to)}`:this.registrationLink=""},async fetchServerTemplate(){if(this.to){this.editorReady=!1,this.updateRegistrationLink();try{const t="http://127.0.0.1:8000",s={registration_link:this.registrationLink,name:this.recipientName||this.$route.query.contact||this.$route.query.name||""},a=await P.A.get(`${t}/api/email-template/lead-registration`,{params:s});let i=a.data||"";try{const e=new DOMParser,t=e.parseFromString(i,"text/html"),s=t.querySelector(".email-container");s&&(i=s.innerHTML)}catch(e){console.error("HTML parsing failed, using raw template:",e)}this.templateContent=i}catch(e){console.error("Failed to fetch server template:",e?.message||e),this.templateContent="<p>Error: Could not load the email template.</p>"}finally{this.editorKey+=1,this.$nextTick(()=>{this.editorReady=!0})}}},async handleSendAssessment(){if(!this.sending){this.sending=!0;try{const e=this.recipientName||this.$route.params&&(this.$route.params.contact||this.$route.params.name)||this.$route.query.contact||this.$route.query.name||"",t={to:this.to,subject:this.subject,body:this.templateContent,registration_link:this.registrationLink,name:e},s=this.$route.params&&this.$route.params.id||this.$route.query&&this.$route.query.lead_id;s&&(t.lead_id=s),await P.A.post("http://127.0.0.1:8000/api/leads/send-assessment",t),this.$toast.add({severity:"success",summary:"Assessment Sent",detail:"Assessment email sent successfully!",life:3500})}catch(e){let t="Failed to send assessment email.";if(e?.response?.data){const s=e.response.data;"string"===typeof s?t+=` ${s}`:s.error?t+=` ${s.error}`:s.message&&(t+=` ${s.message}`)}else e?.message&&(t+=` ${e.message}`);console.error("Send Assessment Error:",e),this.$toast.add({severity:"error",summary:"Send Error",detail:t,life:3500})}finally{this.sending=!1}}}}},en=(0,d.A)(Zo,[["render",Ho],["__scopeId","data-v-7468cab4"]]),tn=en,sn={class:"page"},an={class:"schedule-demo-outer"},on={class:"schedule-demo-card"},nn={class:"schedule-demo-form"},rn={class:"schedule-demo-field"},ln={class:"schedule-demo-field"},dn={class:"schedule-demo-field"},un={class:"schedule-demo-field"},cn={class:"schedule-demo-field"},mn={class:"schedule-demo-field schedule-demo-schedule-field"},hn={class:"schedule-demo-schedule-inputs"},pn={class:"form-box"},gn={class:"form-input-noicon-wrap"},fn={class:"form-box"},bn={class:"form-input-noicon-wrap"};function yn(e,t,s,a,o,n){const r=(0,i.g2)("FormLabel"),l=(0,i.g2)("FormDropdown"),d=(0,i.g2)("FormRow"),u=(0,i.g2)("FormInput"),c=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(c,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",sn,[(0,i.Lk)("div",an,[(0,i.Lk)("div",on,[t[18]||(t[18]=(0,i.Lk)("h2",{class:"schedule-demo-title"},"Schedule Demo",-1)),t[19]||(t[19]=(0,i.Lk)("div",{class:"schedule-demo-desc"}," Lorem Ipsum is simply dummy text of the printing and typesetting industry. ",-1)),(0,i.Lk)("form",nn,[(0,i.bF)(d,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",rn,[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[...t[7]||(t[7]=[(0,i.eW)("Select Organization",-1)])]),_:1}),(0,i.bF)(l,{modelValue:o.organization,"onUpdate:modelValue":t[0]||(t[0]=e=>o.organization=e)},{default:(0,i.k6)(()=>[...t[8]||(t[8]=[(0,i.Lk)("option",{value:""},"Select",-1)])]),_:1},8,["modelValue"])]),(0,i.Lk)("div",ln,[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[...t[9]||(t[9]=[(0,i.eW)("Select Admin",-1)])]),_:1}),(0,i.bF)(l,{modelValue:o.admin,"onUpdate:modelValue":t[1]||(t[1]=e=>o.admin=e)},{default:(0,i.k6)(()=>[...t[10]||(t[10]=[(0,i.Lk)("option",{value:""},"Select",-1)])]),_:1},8,["modelValue"])]),(0,i.Lk)("div",dn,[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[...t[11]||(t[11]=[(0,i.eW)("Select User",-1)])]),_:1}),(0,i.bF)(l,{modelValue:o.user,"onUpdate:modelValue":t[2]||(t[2]=e=>o.user=e)},{default:(0,i.k6)(()=>[...t[12]||(t[12]=[(0,i.Lk)("option",{value:""},"Select",-1)])]),_:1},8,["modelValue"])])]),_:1}),(0,i.bF)(d,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",un,[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[...t[13]||(t[13]=[(0,i.eW)("Subject",-1)])]),_:1}),(0,i.bF)(u,{modelValue:o.subject,"onUpdate:modelValue":t[3]||(t[3]=e=>o.subject=e),placeholder:"Type here"},null,8,["modelValue"])]),(0,i.Lk)("div",cn,[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[...t[14]||(t[14]=[(0,i.eW)("Select Method",-1)])]),_:1}),(0,i.bF)(l,{modelValue:o.method,"onUpdate:modelValue":t[4]||(t[4]=e=>o.method=e)},{default:(0,i.k6)(()=>[...t[15]||(t[15]=[(0,i.Lk)("option",{value:""},"Select",-1)])]),_:1},8,["modelValue"])]),(0,i.Lk)("div",mn,[(0,i.bF)(r,null,{default:(0,i.k6)(()=>[...t[16]||(t[16]=[(0,i.eW)("Schedule",-1)])]),_:1}),(0,i.Lk)("div",hn,[(0,i.Lk)("div",pn,[(0,i.Lk)("div",gn,[(0,i.bF)(u,{modelValue:o.date,"onUpdate:modelValue":t[5]||(t[5]=e=>o.date=e),type:"date",placeholder:"MM/DD/YYYY",class:"form-input"},null,8,["modelValue"])])]),(0,i.Lk)("div",fn,[(0,i.Lk)("div",bn,[(0,i.bF)(u,{modelValue:o.time,"onUpdate:modelValue":t[6]||(t[6]=e=>o.time=e),type:"time",placeholder:"00:00",class:"form-input"},null,8,["modelValue"])])])])])]),_:1}),t[17]||(t[17]=(0,i.Lk)("div",{class:"schedule-demo-actions"},[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"}," Schedule Demo ")],-1))])])])])]),_:1})}const kn={name:"ScheduleDemo",components:{MainLayout:r.A,FormInput:ne.ZQ,FormDropdown:ne.ad,FormRow:ne.fh,FormLabel:ne.lR},data(){return{organization:"",admin:"",user:"",subject:"",method:"",date:"",time:""}}},vn=(0,d.A)(kn,[["render",yn],["__scopeId","data-v-2b48134f"]]),wn=vn,Ln=s.p+"img/Group 14.7c45eff4.svg",_n={class:"page"},An={class:"manage-subscription-outer"},Sn={class:"manage-subscription-card"},Cn={class:"manage-subscription-container"},Pn={class:"manage-subscription-content"},Nn={class:"manage-subscription-msg"},zn=["disabled"];function En(e,t,s,a,o,n){const r=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(r,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",_n,[(0,i.Lk)("div",An,[(0,i.Lk)("div",Sn,[t[2]||(t[2]=(0,i.Lk)("div",{class:"manage-subscription-header"},null,-1)),t[3]||(t[3]=(0,i.Lk)("div",{class:"manage-subscription-header-spacer"},null,-1)),(0,i.Lk)("div",Cn,[t[1]||(t[1]=(0,i.Lk)("div",{class:"manage-subscription-img-box"},[(0,i.Lk)("img",{src:Ln,alt:"No Plans",class:"manage-subscription-img"})],-1)),(0,i.Lk)("div",Pn,[(0,i.Lk)("div",Nn,[o.loading?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)(" Loading subscription status... ")],64)):o.isSubscribed?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)(" You are subscribed to a plan. ")],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.eW)(" You have not selected any plans yet. ")],64))]),(0,i.Lk)("button",{class:"btn btn-primary manage-subscription-btn",onClick:t[0]||(t[0]=(...e)=>n.handleButton&&n.handleButton(...e)),disabled:o.loading},[o.loading?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)("Checking...")],64)):o.isSubscribed?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)("Manage Subscription")],64)):((0,i.uX)(),(0,i.CE)(i.FK,{key:2},[(0,i.eW)("Explore Subscriptions")],64))],8,zn)])])])])])]),_:1})}async function Dn(){const e=D["default"].get("authToken"),t="http://127.0.0.1:8000",s=await P.A.get(`${t}/api/subscription/status`,{headers:{Authorization:`Bearer ${e}`}});return s.data}const Fn={name:"ManageSubscription",components:{MainLayout:r.A},data(){return{isSubscribed:!1,loading:!0}},async mounted(){try{const e=await Dn();this.isSubscribed=e&&"active"===e.status}catch(e){this.isSubscribed=!1}finally{this.loading=!1}},methods:{handleButton(){this.$router.push({name:"SubscriptionPlans"})}}},$n=(0,d.A)(Fn,[["render",En],["__scopeId","data-v-51b02b64"]]),Mn=$n,xn={class:"page"},In={class:"notifications-table-outer"},Tn={class:"notifications-table-card"},Un={class:"notifications-controls"},Vn={class:"notifications-date-wrapper"},On={class:"notifications-tabs"},Rn=["disabled"],Xn={key:0},Wn={key:1},Bn={class:"notifications-list"},Gn={class:"notification-body"},jn={class:"notification-date"},Kn={class:"notification-text"},qn={class:"notification-meta",style:{display:"flex","flex-direction":"column","align-items":"center"}},Qn=["onClick"],Yn={key:0,class:"no-data"},Hn={key:0},Jn={key:1};function Zn(e,t,s,o,n,r){const l=(0,i.g2)("Pagination");return(0,i.uX)(),(0,i.CE)("div",xn,[(0,i.Lk)("div",In,[(0,i.Lk)("div",Tn,[(0,i.Lk)("div",Un,[(0,i.Lk)("div",Vn,[(0,i.bo)((0,i.Lk)("input",{type:"date",placeholder:"Select Date",class:"notifications-date","onUpdate:modelValue":t[0]||(t[0]=e=>n.selectedDate=e),onChange:t[1]||(t[1]=(...e)=>r.onDateChange&&r.onDateChange(...e))},null,544),[[a.Jo,n.selectedDate]]),n.selectedDate?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"mark-all",style:{"margin-left":"8px",height:"36px"},onClick:t[2]||(t[2]=(...e)=>r.clearDate&&r.clearDate(...e))}," Clear ")):(0,i.Q3)("",!0)]),(0,i.Lk)("div",On,[(0,i.Lk)("button",{class:(0,h.C4)(["notifications-tab-btn",{active:"unread"===n.tab}]),onClick:t[3]||(t[3]=e=>n.tab="unread")}," Unread ",2),(0,i.Lk)("button",{class:(0,h.C4)(["notifications-tab-btn",{active:"all"===n.tab}]),onClick:t[4]||(t[4]=e=>n.tab="all")}," All ",2)]),"unread"===n.tab&&n.notifications.length>0?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"mark-all",disabled:n.markAllLoading,onClick:t[5]||(t[5]=(...e)=>r.markAllAsRead&&r.markAllAsRead(...e)),style:{"margin-top":"10px",background:"#fff",color:"#0164a5",border:"none","border-radius":"6px",padding:"4px 10px","font-size":"0.95rem",cursor:"pointer"}},[t[6]||(t[6]=(0,i.Lk)("i",{class:"fas fa-check",style:{"margin-right":"6px"}},null,-1)),n.markAllLoading?((0,i.uX)(),(0,i.CE)("span",Wn,"Marking...")):((0,i.uX)(),(0,i.CE)("span",Xn,"Mark All As Read"))],8,Rn)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Bn,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.paginatedNotifications,(e,s)=>((0,i.uX)(),(0,i.CE)("div",{key:s,class:"notification-item"},[t[9]||(t[9]=(0,i.Lk)("div",{class:"notification-meta",style:{display:"flex","flex-direction":"column","align-items":"center"}},[(0,i.Lk)("img",{src:f,class:"notification-icon"})],-1)),(0,i.Lk)("div",Gn,[(0,i.Lk)("span",jn,(0,h.v_)(e.date),1),(0,i.Lk)("span",Kn,[t[7]||(t[7]=(0,i.Lk)("span",{class:"notification-title"},"Dolphin.",-1)),(0,i.eW)(" "+(0,h.v_)(e.body),1)])]),(0,i.Lk)("div",qn,["unread"!==n.tab||e.read_at?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("button",{key:0,class:"mark-all",onClick:e=>r.markAsRead(s),style:{"margin-top":"10px",background:"#fff",color:"#0164a5",border:"none","border-radius":"6px",padding:"4px 10px","font-size":"0.95rem",cursor:"pointer"}},[...t[8]||(t[8]=[(0,i.Lk)("i",{class:"fas fa-check"},null,-1)])],8,Qn))])]))),128)),0===r.paginatedNotifications.length?((0,i.uX)(),(0,i.CE)("div",Yn,["unread"===n.tab?((0,i.uX)(),(0,i.CE)("span",Hn,"No unread notifications found.")):((0,i.uX)(),(0,i.CE)("span",Jn,"No notification found."))])):(0,i.Q3)("",!0)])]),(0,i.bF)(l,{pageSize:n.pageSize,pageSizes:[5,10,20],currentPage:n.page,totalPages:r.totalPages,isNotifications:!0,showPageDropdown:n.showPageDropdown,onGoToPage:r.goToPage,onSelectPageSize:r.selectPageSize,onTogglePageDropdown:r.togglePageDropdown},null,8,["pageSize","currentPage","totalPages","showPageDropdown","onGoToPage","onSelectPageSize","onTogglePageDropdown"])])])}var er=s(4220);(0,Me.KR)();const tr={name:"GetNotification",components:{Pagination:At.A},data(){return{tab:"unread",page:1,pageSize:10,showPageDropdown:!1,notifications:[],readNotifications:[],selectedDate:"",markAllLoading:!1}},computed:{totalPages(){return Math.ceil(this.filteredNotifications.length/this.pageSize)||1},paginatedNotifications(){const e=(this.page-1)*this.pageSize;return this.filteredNotifications.slice(e,e+this.pageSize)},filteredNotifications(){let e=[];if(e="unread"===this.tab?this.notifications.slice():"all"===this.tab?[...this.notifications,...this.readNotifications]:this.notifications.slice(),this.selectedDate){const t=this.selectedDate;e=e.filter(e=>{const s=e.created_at||e._rawData&&(e._rawData.created_at||e._rawData.createdAt)||"";if(!s)return!1;const a=new Date(s);if(isNaN(a))return!1;const i=a.getFullYear(),o=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${i}-${o}-${n}`===t})}return e}},methods:{async fetchNotifications(){try{let s="unread"===this.tab?"/api/notifications/unread":"/api/notifications",a=D["default"].get("authToken");a&&"object"===typeof a&&a.token&&(a=a.token),"string"!==typeof a&&(a="");const i=a?{headers:{Authorization:`Bearer ${a}`}}:{};if("all"===this.tab){const e=er.A.getRole();if("superadmin"===e){const e=D["default"].get("userId")||D["default"].get("user_id")||D["default"].get("userId"),t=e?parseInt(e,10):0;s=t?`/api/notifications?notifiable_type=${encodeURIComponent("App\\Models\\User")}&notifiable_id=${t}`:"/api/notifications"}else s="/api/notifications/user"}let o;try{o=await P.A.get(s,i)}catch(e){if(!e.response||403!==e.response.status||"all"!==this.tab)throw e;try{o=await P.A.get("/api/notifications/user",i)}catch(t){throw t}}let n=[];Array.isArray(o.data)?n=o.data:o.data&&Array.isArray(o.data.notifications)?n=o.data.notifications:o.data&&Array.isArray(o.data.unread)&&(n=o.data.unread);const r=D["default"].get("userId")||D["default"].get("user_id")||D["default"].get("userId"),l=r?parseInt(r,10):0,d=e=>{if(!l)return!0;if(e.notifiable_id&&parseInt(e.notifiable_id,10)===l)return!0;if(e.data)try{const t="string"===typeof e.data?JSON.parse(e.data):e.data;if(t.user_id&&parseInt(t.user_id,10)===l)return!0;if(t.userId&&parseInt(t.userId,10)===l)return!0;if(t.recipient_id&&parseInt(t.recipient_id,10)===l)return!0}catch(t){}return!1},u=n.filter(d);this.notifications=u.map(e=>{let t=e.data;if("string"===typeof t)try{t=JSON.parse(t)}catch(r){}const s=(e,t)=>{if(!e)return"";for(const s of t)if(Object.prototype.hasOwnProperty.call(e,s)){const t=e[s];if("string"===typeof t&&t.trim())return t.trim();if("number"===typeof t)return String(t);if(t&&"object"===typeof t&&t.message)return String(t.message)}return""},a=s(t,["body","message","text","details","description","content","msg"]),i=e.body||"",o=a||i;let n=o;return!n&&t&&"object"===typeof t&&(n=s(t,["user_message","notification","payload"])||(Object.keys(t).length?JSON.stringify(t):"")),{id:e.id,date:e.created_at?this.formatDate(e.created_at):"",body:n,read_at:e.read_at,_rawData:t}})}catch(s){this.notifications=[],console.error("Failed to fetch notifications:",s,s&&s.response&&s.response.data);const e=s&&s.response&&(s.response.data.message||s.response.data.error)||null;this.$nextTick(()=>{this.$notify&&this.$notify({type:"error",message:e||"Failed to fetch notifications."})})}},onDateChange(){this.page=1},clearDate(){this.selectedDate="",this.page=1},formatDate(e){const t=new Date(e);if(isNaN(t))return e;const s={month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return t.toLocaleString("en-US",s).replace(",","").replace(/(\d{2}:\d{2}) (AM|PM)/,"at $1 $2")},async markAllAsRead(){try{let e=D["default"].get("authToken");e&&"object"===typeof e&&e.token&&(e=e.token),"string"!==typeof e&&(e="");const t=e?{headers:{Authorization:`Bearer ${e}`}}:{};await P.A.post("/api/notifications/mark-all-read",{},t),await this.fetchNotifications()}catch(e){console.error("Error marking all as read:",e),this.$notify&&this.$notify({type:"error",message:"Failed to mark all notifications as read."})}},async markAsRead(e){const t=this.paginatedNotifications[e];let s=D["default"].get("authToken");s&&"object"===typeof s&&s.token&&(s=s.token),"string"!==typeof s&&(s="");const a=s?{headers:{Authorization:`Bearer ${s}`}}:{};if(t&&t.id)try{await P.A.post(`/api/announcements/${t.id}/read`,{},a),await this.fetchNotifications()}catch(i){console.error("Failed to mark notification as read:",i),this.$notify&&this.$notify({type:"error",message:"Failed to mark notification as read."})}},prevPage(){this.page>1&&this.page--},nextPage(){this.page<this.totalPages&&this.page++},goToPage(e){e>=1&&e<=this.totalPages&&(this.page=e)},selectPageSize(e){this.pageSize=e,this.page=1,this.showPageDropdown=!1},togglePageDropdown(){this.showPageDropdown=!this.showPageDropdown},updateNotificationCount(){D["default"].set("notificationCount",this.notifications.length),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new Event("notification-updated"))},formatDate(e){const t=new Date(e);if(isNaN(t))return e;const s={month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};return t.toLocaleString("en-US",s).replace(",","").replace(/(\d{2}:\d{2}) (AM|PM)/,"at $1 $2")},markAllRead(){this.readNotifications=[...this.readNotifications,...this.notifications],this.notifications=[],this.updateNotificationCount()},prevPage(){this.page>1&&this.page--},nextPage(){this.page<this.totalPages&&this.page++},goToPage(e){e>=1&&e<=this.totalPages&&(this.page=e)},selectPageSize(e){this.pageSize=e,this.page=1,this.showPageDropdown=!1},togglePageDropdown(){this.showPageDropdown=!this.showPageDropdown},updateNotificationCount(){D["default"].set("notificationCount",this.notifications.length),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new Event("notification-updated"))}},watch:{notifications:{handler(){this.updateNotificationCount()},deep:!0,immediate:!0},readNotifications:{handler(){this.updateNotificationCount()},deep:!0}},mounted(){(D["default"].get("showDashboardWelcome")||"GetNotification"===this.$route.name||"Notifications"===this.$route.name)&&(this.fetchNotifications(),D["default"].remove("showDashboardWelcome"))},watch:{tab(){this.fetchNotifications()}}},sr=(0,d.A)(tr,[["render",Zn],["__scopeId","data-v-22475cd9"]]),ar=sr,ir=s.p+"img/EditBlack.2389c1e6.svg",or=s.p+"img/Delete icon.530f9b63.svg",nr=s.p+"img/Impersonate.7801c485.svg",rr={class:"page"},lr={class:"table-outer"},dr={class:"table-card"},ur={class:"table-header-bar"},cr={class:"table-container"},mr={class:"table"},hr={key:0},pr={key:1},gr={class:"actions actions-scroll"},fr={class:"actions-row"},br=["onClick"],yr=["onClick"],kr=["onClick"],vr={key:1,class:"btn-view",disabled:""};function wr(e,t,s,a,o,n){const r=(0,i.g2)("Toast"),l=(0,i.g2)("TableHeader"),d=(0,i.g2)("Pagination"),u=(0,i.g2)("MainLayout"),c=(0,i.g2)("FormLabel"),m=(0,i.g2)("FormInput"),p=(0,i.g2)("FormRow"),g=(0,i.g2)("FormDropdown"),f=(0,i.g2)("CommonModal");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(r),(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",rr,[(0,i.Lk)("div",lr,[(0,i.Lk)("div",dr,[(0,i.Lk)("div",ur,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=t=>e.$router.push("/user-permission/add"))},[...t[7]||(t[7]=[(0,i.Lk)("img",{src:Qs,alt:"Add",class:"user-permission-add-btn-icon"},null,-1),(0,i.eW)(" Add New ",-1)])])]),(0,i.Lk)("div",cr,[(0,i.Lk)("table",mr,[(0,i.bF)(l,{columns:[{label:"Name",key:"name"},{label:"Email",key:"email"},{label:"Roles",key:"role"},{label:"Actions",key:"actions"}],onSort:n.sortBy},null,8,["onSort"]),(0,i.Lk)("tbody",null,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.paginatedUsers,e=>((0,i.uX)(),(0,i.CE)("tr",{key:e.id},[(0,i.Lk)("td",null,[e.first_name||e.last_name?((0,i.uX)(),(0,i.CE)("span",hr,(0,h.v_)(e.first_name||"")+(0,h.v_)(e.last_name?" "+e.last_name:""),1)):((0,i.uX)(),(0,i.CE)("span",pr,(0,h.v_)(e.name),1))]),(0,i.Lk)("td",null,(0,h.v_)(e.email),1),(0,i.Lk)("td",null,(0,h.v_)(n.formatRoleLabel(e.role)),1),(0,i.Lk)("td",gr,[(0,i.Lk)("div",fr,[(0,i.Lk)("button",{class:"icon-btn",title:"Edit",onClick:t=>n.openEditModal(e)},[...t[8]||(t[8]=[(0,i.Lk)("img",{src:ir,alt:"Edit"},null,-1)])],8,br),(0,i.Lk)("button",{class:"icon-btn",title:"Delete",onClick:t=>n.deleteUser(e)},[...t[9]||(t[9]=[(0,i.Lk)("img",{src:or,alt:"Delete"},null,-1)])],8,yr),n.canImpersonate(e)?((0,i.uX)(),(0,i.CE)("button",{key:0,class:"btn-view impersonate-btn",onClick:t=>n.impersonateUser(e)},[...t[10]||(t[10]=[(0,i.Lk)("img",{src:nr,alt:"Impersonate",class:"btn-view-icon impersonate-icon"},null,-1),(0,i.eW)(" Impersonate ",-1)])],8,kr)):((0,i.uX)(),(0,i.CE)("button",vr,[...t[11]||(t[11]=[(0,i.Lk)("img",{src:nr,alt:"Impersonate",class:"btn-view-icon"},null,-1),(0,i.eW)(" Impersonate ",-1)])]))])])]))),128))])])])]),(0,i.bF)(d,{pageSize:o.pageSize,pageSizes:o.pageSizes,showPageDropdown:o.showPageDropdown,currentPage:o.currentPage,totalPages:n.totalPages,onTogglePageDropdown:t[1]||(t[1]=e=>o.showPageDropdown=!o.showPageDropdown),onSelectPageSize:n.selectPageSize,onGoToPage:n.goToPage},null,8,["pageSize","pageSizes","showPageDropdown","currentPage","totalPages","onSelectPageSize","onGoToPage"])])])]),_:1}),(0,i.bF)(f,{visible:o.showEditModal,onClose:t[6]||(t[6]=e=>o.showEditModal=!1),onSubmit:n.saveEditUser},{title:(0,i.k6)(()=>[...t[12]||(t[12]=[(0,i.eW)("Edit User",-1)])]),actions:(0,i.k6)(()=>[...t[17]||(t[17]=[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"},[(0,i.Lk)("i",{class:"fas fa-save"}),(0,i.eW)(" Save ")],-1)])]),default:(0,i.k6)(()=>[(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...t[13]||(t[13]=[(0,i.eW)("First Name",-1)])]),_:1}),(0,i.bF)(m,{modelValue:o.editUser.first_name,"onUpdate:modelValue":t[2]||(t[2]=e=>o.editUser.first_name=e),type:"text",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...t[14]||(t[14]=[(0,i.eW)("Last Name",-1)])]),_:1}),(0,i.bF)(m,{modelValue:o.editUser.last_name,"onUpdate:modelValue":t[3]||(t[3]=e=>o.editUser.last_name=e),type:"text",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...t[15]||(t[15]=[(0,i.eW)("Email",-1)])]),_:1}),(0,i.bF)(m,{modelValue:o.editUser.email,"onUpdate:modelValue":t[4]||(t[4]=e=>o.editUser.email=e),type:"email",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)(()=>[(0,i.bF)(c,null,{default:(0,i.k6)(()=>[...t[16]||(t[16]=[(0,i.eW)("Role",-1)])]),_:1}),(0,i.bF)(g,{modelValue:o.editUser.role,"onUpdate:modelValue":t[5]||(t[5]=e=>o.editUser.role=e),options:o.roleOptions,placeholder:"Select role","padding-left":16},null,8,["modelValue","options"])]),_:1})]),_:1},8,["visible","onSubmit"])],64)}var Lr=s(1609),_r=s(2124),Ar=s(3714);function Sr(e){if(!e)return"";const t=String(e).toLowerCase(),s={superadmin:"Super Admin",organizationadmin:"Organization Admin",dolphinadmin:"Dolphin Admin",salesperson:"Sales Person",user:"User"};return s[t]||String(e).replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/[_-]+/g," ").split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}const Cr={name:"UserPermission",components:{MainLayout:r.A,Pagination:At.A,TableHeader:St.A,CommonModal:Lr.A,FormRow:xo.A,FormLabel:_r.A,FormInput:Is.A,FormDropdown:Ar.A,Toast:z.A},data(){return{users:[],loading:!1,currentPage:1,pageSize:10,pageSizes:[10,25,100],showPageDropdown:!1,sortKey:"",sortAsc:!0,showEditModal:!1,editUser:{id:null,first_name:"",last_name:"",email:"",role:""},roleOptions:[{value:"organizationadmin",text:"Organization Admin"},{value:"dolphinadmin",text:"Dolphin Admin"},{value:"salesperson",text:"Sales Person"},{value:"user",text:"User"}]}},setup(){const e=(0,E.d)();return{toast:e}},created(){this.fetchUsers()},computed:{totalPages(){return Math.ceil(this.users.filter(e=>"superadmin"!==e.role).length/this.pageSize)||1},paginatedUsers(){let e=this.users.filter(e=>"superadmin"!==e.role);this.sortKey&&e.sort((e,t)=>{const s=e[this.sortKey]||"",a=t[this.sortKey]||"";return s<a?this.sortAsc?-1:1:s>a?this.sortAsc?1:-1:0});const t=(this.currentPage-1)*this.pageSize;return e.slice(t,t+this.pageSize)},isSuperAdmin(){const e=s(3193)["default"];return"superadmin"===e.get("role")},isImpersonating(){const e=s(3193)["default"];return!!e.get("superAuthToken")}},methods:{formatRole(e){return Sr(e)},formatRoleLabel(e){return Sr(e)},getAuthHeaders(){const e=s(3193)["default"],t=e.get("authToken");return t?{Authorization:`Bearer ${t}`}:{}},canImpersonate(e){const t=s(3193)["default"],a=parseInt(t.get("userId")||"0");return this.isSuperAdmin&&"superadmin"!==e.role&&e.id!==a},async impersonateUser(e){const t=e.first_name||e.last_name?`${e.first_name||""}${e.last_name?" "+e.last_name:""}`.trim():e.name||e.email||"this user";if(confirm(`Are you sure you want to impersonate ${t}?`))try{const t="http://127.0.0.1:8000",i=await fetch(`${t}/api/users/${e.id}/impersonate`,{method:"POST",headers:this.getAuthHeaders()});if(!i.ok){const e=await i.json().catch(()=>({}));throw new Error(e.message||"Failed to impersonate user")}const o=await i.json(),n=s(3193)["default"];n.set("superAuthToken",n.get("authToken")),n.set("superRole",n.get("role")),n.set("superUserId",n.get("userId")),n.set("superFirstName",n.get("first_name")||""),n.set("superLastName",n.get("last_name")||""),n.set("superUserName",n.get("userName")||""),n.set("authToken",o.impersonated_token),n.set("role",o.impersonated_role),n.set("userId",o.user_id),n.set("first_name",o.impersonated_first_name||""),n.set("last_name",o.impersonated_last_name||""),o.impersonated_first_name||o.impersonated_last_name?n.set("userName",`${o.impersonated_first_name||""}${o.impersonated_last_name?" "+o.impersonated_last_name:""}`.trim()):n.set("userName",o.impersonated_name);try{window.dispatchEvent(new Event("auth-updated"))}catch(a){}this.$router.go(0)}catch(a){alert(a.message||"Error impersonating user")}},revertImpersonation(){if(!this.isImpersonating)return;const e=s(3193)["default"];e.set("authToken",e.get("superAuthToken")),e.set("role",e.get("superRole")),e.set("userId",e.get("superUserId")),e.set("first_name",e.get("superFirstName")||""),e.set("last_name",e.get("superLastName")||""),e.set("userName",e.get("superUserName")||""),e.remove("superAuthToken"),e.remove("superRole"),e.remove("superUserId"),e.remove("superFirstName"),e.remove("superLastName"),e.remove("superUserName"),this.$router.go(0);try{window.dispatchEvent(new Event("auth-updated"))}catch(t){}},async fetchUsers(){this.loading=!0;try{const e="http://127.0.0.1:8000",t=await fetch(`${e}/api/users`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch users");const s=await t.json();this.users=(s.users||s||[]).map(e=>({id:e.id,first_name:e.first_name||"",last_name:e.last_name||"",email:e.email||"",role:(e.role||"user").toString().toLowerCase(),name:e.first_name||e.last_name?`${e.first_name||""}${e.last_name?" "+e.last_name:""}`:e.name||e.full_name||""}))}catch(e){this.toast.add({severity:"error",summary:"Error",detail:e.message||"Error fetching users",life:4e3})}finally{this.loading=!1}},async deleteUser(e){if(!this.isDeleting&&confirm(`Are you sure you want to delete ${e.name}?`)){this.isDeleting=!0;try{const t="http://127.0.0.1:8000",s=await fetch(`${t}/api/users/${e.id}/soft-delete`,{method:"PATCH",headers:this.getAuthHeaders()});if(!s.ok)throw new Error("Failed to delete user");this.users=this.users.filter(t=>t.id!==e.id),this.toast.add({severity:"success",summary:"Success",detail:"User deleted successfully!",life:3e3})}catch(t){this.toast.add({severity:"error",summary:"Error",detail:t.message||"Error deleting user",life:4e3})}finally{this.isDeleting=!1}}},async changeRole(e,t){if(e.role!==t)try{const s="http://127.0.0.1:8000",a=await fetch(`${s}/api/users/${e.id}/role`,{method:"PUT",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({role:t})});if(!a.ok)throw new Error("Failed to change role");e.role=t,this.toast.add({severity:"success",summary:"Success",detail:"Role changed successfully!",life:3e3})}catch(s){this.toast.add({severity:"error",summary:"Error",detail:s.message||"Error changing role",life:4e3})}},goToPage(e){e<1||e>this.totalPages||(this.currentPage=e)},selectPageSize(e){this.pageSize=e,this.currentPage=1,this.showPageDropdown=!1},sortBy(e){this.sortKey===e?this.sortAsc=!this.sortAsc:(this.sortKey=e,this.sortAsc=!0)},openEditModal(e){this.editUser={...e},this.showEditModal=!0},async saveEditUser(e){if(e&&e.preventDefault&&e.preventDefault(),this.isSaving)return;this.isSaving=!0;const t=this.users.findIndex(e=>e.id===this.editUser.id);if(-1!==t)try{const e="http://127.0.0.1:8000",s=await fetch(`${e}/api/users/${this.editUser.id}/role`,{method:"PATCH",headers:{...this.getAuthHeaders(),"Content-Type":"application/json"},body:JSON.stringify({first_name:this.editUser.first_name,last_name:this.editUser.last_name,email:this.editUser.email,role:this.editUser.role})});if(!s.ok){const e=await s.json().catch(()=>({}));return this.toast.add({severity:"error",summary:"Error",detail:e.message||"Failed to update user",life:4e3}),void(this.isSaving=!1)}const a=await s.json();this.users[t]={...this.editUser,...a},this.showEditModal=!1,this.toast.add({severity:"success",summary:"Success",detail:"User updated successfully!",life:3e3})}catch(s){this.toast.add({severity:"error",summary:"Error",detail:s.message||"Failed to update user.",life:4e3})}finally{this.isSaving=!1}else this.isSaving=!1}}},Pr=(0,d.A)(Cr,[["render",wr],["__scopeId","data-v-3cbd4803"]]),Nr=Pr,zr={class:"login-bg"},Er={class:"login-card"},Dr={class:"input-group email-group"},Fr=["disabled"],$r={class:"switch-auth"};function Mr(e,t,s,o,n,r){const l=(0,i.g2)("Toast"),d=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)("div",zr,[(0,i.bF)(l),t[8]||(t[8]=(0,i.Lk)("img",{src:p,alt:"Lines",class:"bg-lines"},null,-1)),t[9]||(t[9]=(0,i.Lk)("img",{src:g,alt:"Illustration",class:"bg-illustration"},null,-1)),(0,i.Lk)("div",Er,[t[5]||(t[5]=(0,i.Lk)("h2",{class:"login-title"},"Forgot Password",-1)),t[6]||(t[6]=(0,i.Lk)("p",{class:"login-subtitle"},"Enter your email to reset your password",-1)),(0,i.Lk)("form",{onSubmit:t[1]||(t[1]=(0,a.D$)((...e)=>r.handleForgotPassword&&r.handleForgotPassword(...e),["prevent"]))},[(0,i.Lk)("div",Dr,[t[2]||(t[2]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"fas fa-envelope"})],-1)),(0,i.bo)((0,i.Lk)("input",{type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),placeholder:"Email ID",required:""},null,512),[[a.Jo,n.email]])]),(0,i.Lk)("button",{type:"submit",class:"login-btn",disabled:n.loading},(0,h.v_)(n.loading?"Sending...":"Send Reset Link"),9,Fr)],32),(0,i.Lk)("div",$r,[t[4]||(t[4]=(0,i.Lk)("span",null,"Remembered your password?",-1)),(0,i.bF)(d,{to:"/login",class:"switch-link"},{default:(0,i.k6)(()=>[...t[3]||(t[3]=[(0,i.eW)("Login here",-1)])]),_:1})]),t[7]||(t[7]=(0,i.Lk)("div",{class:"footer"},[(0,i.Lk)("img",{src:f,alt:"Dolphin Logo",class:"footer-logo"}),(0,i.Lk)("p",{class:"copyright"},"©2025 Dolphin | All Rights Reserved")],-1))])])}const xr={name:"ForgotPassword",components:{Toast:z.A},setup(){const e=(0,E.d)();return{toast:e}},data(){return{email:"",loading:!1,cooldown:0,cooldownInterval:null}},methods:{handleForgotPassword(){this.cooldown>0?this.toast.add({severity:"warn",summary:"Please wait",detail:`You can request another reset link in ${this.cooldown}s`,life:3e3}):this.email?(this.loading=!0,fetch("http://127.0.0.1:8000/api/password/email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email})}).then(async e=>{const t=await e.json();if(this.loading=!1,429===e.status||t.message&&t.message.toLowerCase().includes("throttle"))return this.cooldown=30,this.startCooldown(),void this.toast.add({severity:"warn",summary:"Please wait",detail:"You can request another reset link in 3 minutes",life:3500});this.toast.add({severity:"success",summary:"Reset Link Sent",detail:t.message||"If this email is registered, a reset link has been sent.",life:3500}),this.email="",this.cooldown=30,this.startCooldown()}).catch(()=>{this.loading=!1,this.toast.add({severity:"error",summary:"Error",detail:"Failed to send reset link. Try again.",life:3500})})):this.toast.add({severity:"error",summary:"Error",detail:"Please enter your email address.",life:3e3})},startCooldown(){this.cooldownInterval&&clearInterval(this.cooldownInterval),this.cooldownInterval=setInterval(()=>{this.cooldown>0?this.cooldown--:(clearInterval(this.cooldownInterval),this.cooldownInterval=null)},1e3)}}},Ir=(0,d.A)(xr,[["render",Mr],["__scopeId","data-v-aee7f02e"]]),Tr=Ir,Ur={class:"profile-outer"},Vr={class:"profile-card"},Or={class:"profile-header"},Rr={class:"profile-info-table"},Xr={key:0,style:{color:"red","margin-bottom":"10px"}},Wr={class:"profile-info-row"},Br={class:"profile-value"},Gr={class:"profile-info-row"},jr={class:"profile-value"},Kr={class:"profile-info-row"},qr={class:"profile-value"},Qr={class:"profile-info-row"},Yr={class:"profile-value"},Hr={key:0},Jr={class:"profile-info-row"},Zr={class:"profile-value"},el={class:"profile-info-row"},tl={class:"profile-value"},sl={class:"profile-actions"},al=["disabled"],il={key:0,class:"profile-message"},ol={class:"profile-card"},nl={class:"profile-form-row"},rl={class:"profile-input-wrapper"},ll=["type"],dl={class:"profile-form-row"},ul={class:"profile-input-wrapper"},cl=["type"],ml={class:"profile-form-row"},hl={class:"profile-input-wrapper"},pl=["type"],gl={key:0,class:"profile-message"};function fl(e,t,s,o,n,r){const l=(0,i.g2)("FormLabel"),d=(0,i.g2)("FormInput"),u=(0,i.g2)("FormRow"),c=(0,i.g2)("FormDropdown"),m=(0,i.g2)("CommonModal"),p=(0,i.g2)("MainLayout");return(0,i.uX)(),(0,i.Wv)(p,null,{default:(0,i.k6)(()=>[(0,i.Lk)("div",Ur,[(0,i.Lk)("div",Vr,[(0,i.Lk)("div",Or,[t[16]||(t[16]=(0,i.Lk)("div",{class:"profile-title"},[(0,i.Lk)("i",{class:"fas fa-user-circle profile-avatar"}),(0,i.Lk)("span",null,"Profile")],-1)),(0,i.Lk)("div",null,[(0,i.Lk)("button",{class:"btn btn-primary",onClick:t[0]||(t[0]=(...e)=>r.editAccount&&r.editAccount(...e))},[...t[15]||(t[15]=[(0,i.Lk)("i",{class:"fas fa-pen-to-square"},null,-1),(0,i.eW)(" Edit ",-1)])])])]),(0,i.Lk)("div",Rr,[n.profileError?((0,i.uX)(),(0,i.CE)("div",Xr,(0,h.v_)(n.profileError),1)):(0,i.Q3)("",!0),(0,i.Lk)("div",Wr,[t[17]||(t[17]=(0,i.Lk)("div",{class:"profile-label"},"First Name",-1)),(0,i.Lk)("div",Br,(0,h.v_)(n.user.first_name||""),1)]),(0,i.Lk)("div",Gr,[t[18]||(t[18]=(0,i.Lk)("div",{class:"profile-label"},"Last Name",-1)),(0,i.Lk)("div",jr,(0,h.v_)(n.user.last_name||""),1)]),(0,i.Lk)("div",Kr,[t[19]||(t[19]=(0,i.Lk)("div",{class:"profile-label"},"Email",-1)),(0,i.Lk)("div",qr,(0,h.v_)(n.user.email||""),1)]),(0,i.Lk)("div",Qr,[t[20]||(t[20]=(0,i.Lk)("div",{class:"profile-label"},"Role",-1)),(0,i.Lk)("div",Yr,[n.user.roles&&n.user.roles.length?((0,i.uX)(),(0,i.CE)("span",Hr,(0,h.v_)(n.user.roles.map(e=>r.formatRoleLabel(e.name||e)).join(", ")),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",Jr,[t[21]||(t[21]=(0,i.Lk)("div",{class:"profile-label"},"Country",-1)),(0,i.Lk)("div",Zr,(0,h.v_)(r.countryName),1)]),(0,i.Lk)("div",el,[t[22]||(t[22]=(0,i.Lk)("div",{class:"profile-label"},"Phone",-1)),(0,i.Lk)("div",tl,(0,h.v_)(n.user.userDetails?.phone||""),1)])]),(0,i.Lk)("div",sl,[(0,i.Lk)("button",{class:"btn btn-danger",onClick:t[1]||(t[1]=(...e)=>r.deleteAccount&&r.deleteAccount(...e))},[...t[23]||(t[23]=[(0,i.Lk)("i",{class:"fas fa-trash"},null,-1),(0,i.eW)(" Delete Account ",-1)])])])]),(0,i.bF)(m,{visible:n.showEditModal,onClose:t[7]||(t[7]=e=>n.showEditModal=!1),onSubmit:r.updateProfile,"modal-max-width":"96vw","modal-min-width":"280px","modal-padding":"18px"},{title:(0,i.k6)(()=>[...t[24]||(t[24]=[(0,i.eW)("Edit Profile",-1)])]),actions:(0,i.k6)(()=>[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:n.isUpdatingProfile},[t[30]||(t[30]=(0,i.Lk)("i",{class:"fas fa-save"},null,-1)),(0,i.eW)(" "+(0,h.v_)(n.isUpdatingProfile?" Saving...":" Save"),1)],8,al)]),default:(0,i.k6)(()=>[(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,null,{default:(0,i.k6)(()=>[...t[25]||(t[25]=[(0,i.eW)("First Name",-1)])]),_:1}),(0,i.bF)(d,{modelValue:n.editForm.first_name,"onUpdate:modelValue":t[2]||(t[2]=e=>n.editForm.first_name=e),type:"text",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,null,{default:(0,i.k6)(()=>[...t[26]||(t[26]=[(0,i.eW)("Last Name",-1)])]),_:1}),(0,i.bF)(d,{modelValue:n.editForm.last_name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.editForm.last_name=e),type:"text",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,null,{default:(0,i.k6)(()=>[...t[27]||(t[27]=[(0,i.eW)("Email",-1)])]),_:1}),(0,i.bF)(d,{modelValue:n.editForm.email,"onUpdate:modelValue":t[4]||(t[4]=e=>n.editForm.email=e),type:"email",required:""},null,8,["modelValue"])]),_:1}),(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,null,{default:(0,i.k6)(()=>[...t[28]||(t[28]=[(0,i.eW)("Phone",-1)])]),_:1}),(0,i.bF)(d,{modelValue:n.editForm.phone,"onUpdate:modelValue":t[5]||(t[5]=e=>n.editForm.phone=e),type:"text"},null,8,["modelValue"])]),_:1}),(0,i.bF)(u,null,{default:(0,i.k6)(()=>[(0,i.bF)(l,null,{default:(0,i.k6)(()=>[...t[29]||(t[29]=[(0,i.eW)("Country",-1)])]),_:1}),(0,i.bF)(c,{modelValue:n.editForm.country,"onUpdate:modelValue":t[6]||(t[6]=e=>n.editForm.country=e),options:n.countries,placeholder:"Select country","padding-left":16},null,8,["modelValue","options"])]),_:1}),n.editMessage?((0,i.uX)(),(0,i.CE)("div",il,(0,h.v_)(n.editMessage),1)):(0,i.Q3)("",!0)]),_:1},8,["visible","onSubmit"]),(0,i.Lk)("div",ol,[t[35]||(t[35]=(0,i.Lk)("div",{class:"profile-section-title"},"Change Password",-1)),(0,i.Lk)("form",{class:"profile-password-form",onSubmit:t[14]||(t[14]=(0,a.D$)((...e)=>r.changePassword&&r.changePassword(...e),["prevent"]))},[(0,i.Lk)("div",nl,[t[31]||(t[31]=(0,i.Lk)("label",{class:"profile-form-label"},"Current Password*",-1)),(0,i.Lk)("div",rl,[(0,i.bo)((0,i.Lk)("input",{type:n.showCurrentPassword?"text":"password","onUpdate:modelValue":t[8]||(t[8]=e=>n.currentPassword=e),required:"",placeholder:"Enter current password",autocomplete:"current-password"},null,8,ll),[[a.hp,n.currentPassword]]),(0,i.Lk)("span",{class:"profile-eye-icon",onClick:t[9]||(t[9]=e=>n.showCurrentPassword=!n.showCurrentPassword)},[(0,i.Lk)("i",{class:(0,h.C4)(n.showCurrentPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),(0,i.Lk)("div",dl,[t[32]||(t[32]=(0,i.Lk)("label",{class:"profile-form-label"},"New Password*",-1)),(0,i.Lk)("div",ul,[(0,i.bo)((0,i.Lk)("input",{type:n.showNewPassword?"text":"password","onUpdate:modelValue":t[10]||(t[10]=e=>n.newPassword=e),required:"",placeholder:"Enter new password",autocomplete:"new-password"},null,8,cl),[[a.hp,n.newPassword]]),(0,i.Lk)("span",{class:"profile-eye-icon",onClick:t[11]||(t[11]=e=>n.showNewPassword=!n.showNewPassword)},[(0,i.Lk)("i",{class:(0,h.C4)(n.showNewPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),(0,i.Lk)("div",ml,[t[33]||(t[33]=(0,i.Lk)("label",{class:"profile-form-label"},"Confirm New Password*",-1)),(0,i.Lk)("div",hl,[(0,i.bo)((0,i.Lk)("input",{type:n.showConfirmPassword?"text":"password","onUpdate:modelValue":t[12]||(t[12]=e=>n.confirmPassword=e),required:"",placeholder:"Confirm new password",autocomplete:"new-password"},null,8,pl),[[a.hp,n.confirmPassword]]),(0,i.Lk)("span",{class:"profile-eye-icon",onClick:t[13]||(t[13]=e=>n.showConfirmPassword=!n.showConfirmPassword)},[(0,i.Lk)("i",{class:(0,h.C4)(n.showConfirmPassword?"fas fa-eye-slash":"fas fa-eye")},null,2)])])]),t[34]||(t[34]=(0,i.Lk)("div",{class:"profile-save-btn-row"},[(0,i.Lk)("button",{type:"submit",class:"btn btn-primary"},[(0,i.Lk)("i",{class:"fas fa-key"}),(0,i.eW)(" Change Password ")])],-1))],32),n.message?((0,i.uX)(),(0,i.CE)("div",gl,(0,h.v_)(n.message),1)):(0,i.Q3)("",!0)])])]),_:1})}const bl={name:"Profile",components:{MainLayout:r.A,Toast:z.A,CommonModal:Lr.A,FormRow:xo.A,FormLabel:_r.A,FormInput:Is.A,FormDropdown:Ar.A},setup(){const e=(0,E.d)();return{toast:e}},data(){return{user:{first_name:"",last_name:"",email:"",userDetails:{phone:"",country:""},roles:[]},currentPassword:"",newPassword:"",confirmPassword:"",message:"",showCurrentPassword:!1,showNewPassword:!1,showConfirmPassword:!1,showEditModal:!1,editForm:{first_name:"",last_name:"",email:"",phone:"",country:""},countries:[],editMessage:"",isUpdatingProfile:!1,profileError:"",profileRaw:""}},computed:{countryName(){const e=this.user.userDetails?.country||this.user.country||"";if(e&&"object"===typeof e)return e.name||e.text||"";if("string"===typeof e)try{const t=JSON.parse(e);if(t&&"object"===typeof t)return t.name||t.text||""}catch(t){}if(this.countries&&this.countries.length){const t=this.countries.find(t=>String(t.value)===String(e)||String(t.text)===String(e));if(t)return t.text||""}return e||""}},mounted(){this.fetchProfile(),this.fetchCountries()},methods:{formatRole(e){return Sr(e)},formatRoleLabel(e){return Sr(e)},async fetchCountries(){try{const e="http://127.0.0.1:8000",t=D["default"].get("authToken"),s=await P.A.get(e+"/api/countries",{headers:{Authorization:`Bearer ${t}`}}),a=Array.isArray(s.data)?s.data:s.data.countries||[];this.countries=a.map(e=>{if(void 0!==e.value&&void 0!==e.text)return{value:String(e.value),text:e.text};const t=e.id||e.value||e.code||e.name;return{value:void 0!==t&&null!==t?String(t):"",text:e.name||e.text||String(t)}})}catch(e){console.error("Failed to fetch countries",e),this.countries=[]}},async fetchProfile(){try{const e=D["default"].get("authToken");if(!e)return this.profileError="No auth token found. Please login.",void this.toast.add({severity:"error",summary:"Auth Error",detail:"No auth token found. Please login.",life:3e3});const t=await P.A.get("http://127.0.0.1:8000/api/profile",{headers:{Authorization:`Bearer ${e}`}}),s=t.data;this.profileRaw=JSON.stringify(s,null,2);const a=s.user&&s.user.first_name||s.first_name||null,i=s.user&&s.user.last_name||s.last_name||null,o=s.user_details||s.userDetails||s.user&&s.user.user_details||{},n=a||o.first_name||"",r=i||o.last_name||"";this.user={first_name:n,last_name:r,email:s.user&&s.user.email||s.email||this.user.email||"",roles:s.roles||s.user&&s.user.roles||[],userDetails:Object.assign({},o||{},{email:s.user&&s.user.email||s.email||"",phone:o.phone||"",country:o.country||s.country||""})},this.profileError=""}catch(e){this.user={userDetails:{},roles:[],email:""},e.response&&e.response.data?(this.profileError="Error: "+JSON.stringify(e.response.data),this.toast.add({severity:"error",summary:"Profile Error",detail:JSON.stringify(e.response.data),life:3500})):(this.profileError="Failed to fetch profile.",this.toast.add({severity:"error",summary:"Profile Error",detail:"Failed to fetch profile.",life:3500})),this.profileRaw=""}},async changePassword(){if(this.message="",this.newPassword!==this.confirmPassword)return this.message="New passwords do not match.",void this.toast.add({severity:"error",summary:"Password Error",detail:"New passwords do not match.",life:3e3});try{const e=D["default"].get("authToken");if(!e)return this.message="Not authenticated.",void this.toast.add({severity:"error",summary:"Auth Error",detail:"Not authenticated.",life:3e3});await P.A.post("http://127.0.0.1:8000/api/change-password",{current_password:this.currentPassword,new_password:this.newPassword,new_password_confirmation:this.confirmPassword},{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),this.message="Password changed successfully!",this.toast.add({severity:"success",summary:"Password Changed",detail:"Password changed successfully!",life:3e3}),this.currentPassword="",this.newPassword="",this.confirmPassword=""}catch(e){let t="Failed to change password.";e.response&&e.response.data&&e.response.data.error?t=e.response.data.error:e.response&&e.response.data&&(t=Object.values(e.response.data).join(" ")),this.message=t,this.toast.add({severity:"error",summary:"Password Error",detail:t,life:3500})}},async editAccount(){this.editForm.first_name=this.user.first_name||"",this.editForm.last_name=this.user.last_name||"",this.editForm.email=this.user.email,this.editForm.phone=this.user.userDetails?.phone||"";const e=this.user.userDetails.country||this.user.country||"",t=void 0!==e&&null!==e?String(e):"";if(!this.countries||!this.countries.length)try{await this.fetchCountries()}catch(a){}let s=null;if(this.countries&&this.countries.length&&(s=this.countries.find(e=>String(e.value)===String(t)||String(e.text)===String(t))),s)this.editForm.country=String(s.value);else{const e=this.countryName||t||"Select country";if(t){const s=(this.countries||[]).some(e=>String(e.value)===String(t));s||(this.countries=(this.countries||[]).concat([{value:t,text:e}]))}this.editForm.country=t}this.editMessage="",this.showEditModal=!0},async updateProfile(){if(this.editMessage="",!this.isUpdatingProfile){this.isUpdatingProfile=!0;try{const e=D["default"].get("authToken");if(!e)return this.editMessage="Not authenticated.",void this.toast.add({severity:"error",summary:"Auth Error",detail:"Not authenticated.",life:3e3});let t=this.editForm.country;t&&"object"===typeof t&&(t=t.value||t.id||t.code||t.name||""),t=void 0!==t&&null!==t?String(t):"";const s={user:{email:this.editForm.email},user_details:{first_name:this.editForm.first_name,last_name:this.editForm.last_name,phone:this.editForm.phone,country:t},admin_email:this.editForm.email};console.log("Updating profile with payload:",s);const a=await P.A.patch("http://127.0.0.1:8000/api/profile",s,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),i=a.data||{},o=i.user||i,n=i.user_details||i.userDetails||i.user_details||i.user_details||i.user&&i.user.user_details||{};this.user.email=o.email||this.editForm.email||this.user.email,this.user.first_name=o.first_name||n&&n.first_name||this.editForm.first_name||this.user.first_name,this.user.last_name=o.last_name||n&&n.last_name||this.editForm.last_name||this.user.last_name,this.user.userDetails=Object.assign({},this.user.userDetails||{},n||{},{phone:n&&n.phone||this.editForm.phone,country:n&&n.country||t}),D["default"].set("first_name",this.user.first_name),D["default"].set("last_name",this.user.last_name),D["default"].set("email",this.user.email),D["default"].set("phone",this.user.userDetails.phone),D["default"].set("country",this.user.userDetails.country),D["default"].set("user",{first_name:this.user.first_name,last_name:this.user.last_name,email:this.user.email,role:this.user.role,country:this.user.userDetails.country,phone:this.user.userDetails.phone}),this.showEditModal=!1,setTimeout(()=>{this.toast.add({severity:"success",summary:"Profile Updated",detail:"Profile updated successfully!",life:3e3})},350),this.isUpdatingProfile=!1}catch(e){let s="Failed to update profile.";if(e.response&&e.response.data){const a=e.response.data;if(a.errors&&"object"===typeof a.errors){const e=[];Object.values(a.errors).forEach(t=>{Array.isArray(t)?e.push(...t):e.push(String(t))}),s=e.join(" ")}else if(a.message)s=a.message;else try{s=JSON.stringify(a)}catch(t){s=String(a)}console.error("Profile update error response:",a)}this.editMessage=s,this.toast.add({severity:"error",summary:"Profile Error",detail:s,life:3500}),this.isUpdatingProfile=!1}}},async deleteAccount(){if(this.editMessage="",confirm("Are you sure you want to delete your account? This action cannot be undone."))try{const e=D["default"].get("authToken");if(!e)return void this.toast.add({severity:"error",summary:"Auth Error",detail:"Not authenticated.",life:3e3});await P.A.delete("http://127.0.0.1:8000/api/profile",{headers:{Authorization:`Bearer ${e}`}}),this.toast.add({severity:"success",summary:"Account Deleted",detail:"Account deleted successfully.",life:3e3}),setTimeout(()=>{D["default"].clear(),window.location.href="/login"},1200)}catch(e){let t="Failed to delete account.";e.response&&e.response.data&&e.response.data.message&&(t=e.response.data.message),this.toast.add({severity:"error",summary:"Delete Error",detail:t,life:3500})}}}},yl=(0,d.A)(bl,[["render",fl],["__scopeId","data-v-00ee6dde"]]),kl=yl,vl=[{path:"/thanks",name:"ThanksPage",component:De,meta:{public:!0}},{path:"/thanks",name:"ThanksPage",component:De,meta:{public:!0}},{path:"/assessment/answer/:token",name:"AssessmentAnswerPage",component:()=>s.e(838).then(s.bind(s,7838)),meta:{public:!0}},{path:"/reset-password",name:"ResetPassword",component:()=>s.e(9).then(s.bind(s,1009)),meta:{public:!0}},{path:"/user-permission/add",name:"AddPermission",component:()=>s.e(599).then(s.bind(s,599))},{path:"/",name:"Login",component:I},{path:"/register",name:"Register",component:ue},{path:"/thankyou",name:"ThankYou",component:Le},{path:"/dashboard",name:"Dashboard",component:ht},{path:"/organizations",name:"Organizations",component:Dt},{path:"/notifications",name:"Notifications",component:qs},{path:"/leads",name:"Leads",component:Aa},{path:"/training-resources",name:"TrainingResources",component:Na},{path:"/assessments",name:"Assessments",component:ho},{path:"/my-organization",name:"MyOrganization",component:Ro},{path:"/manage-subscription",name:"ManageSubscription",component:Mn},{path:"/get-notification",name:"GetNotification",component:ar,meta:{layout:"main"}},{path:"/assessments/send-assessment/:id?",name:"SendAssessmentAssessments",component:tn,props:!0},{path:"/user-permission",name:"UserPermission",component:Nr},{path:"/forgot-password",name:"ForgotPassword",component:Tr,meta:{public:!0}},{path:"/subscriptions/plans",name:"SubscriptionPlans",component:()=>s.e(736).then(s.bind(s,6736)),meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:kl,meta:{requiresAuth:!0}},{path:"/leads/:id",name:"LeadDetail",component:()=>s.e(608).then(s.bind(s,3608)),props:!0},{path:"/leads/:id/edit",name:"EditLead",component:()=>s.e(737).then(s.bind(s,4737)),props:!0},{path:"/organizations/:id",name:"OrganizationDetail",component:()=>s.e(893).then(s.bind(s,6690)),props:!0},{path:"/organizations/:orgName",name:"OrganizationDetailByName",component:()=>s.e(893).then(s.bind(s,6690)),props:!0},{path:"/organizations/billing-details",name:"BillingDetails",component:()=>s.e(223).then(s.bind(s,4223))},{path:"/organizations/:id/edit",name:"OrganizationEdit",component:()=>s.e(761).then(s.bind(s,8761)),props:!0},{path:"/organizations/:orgName/edit",name:"OrganizationEditByName",component:()=>s.e(761).then(s.bind(s,8761)),props:!0},{path:"/leads/lead-capture",name:"LeadCapture",component:()=>Promise.resolve().then(s.bind(s,2435))},{path:"/leads/send-assessment/:id?",name:"SendAssessment",component:tn,props:!0},{path:"/leads/schedule-demo",name:"ScheduleDemo",component:wn},{path:"/leads/schedule-class-training",name:"ScheduleClassTraining",component:()=>s.e(202).then(s.bind(s,8202))},{path:"/my-organization/members",name:"MemberListing",component:()=>s.e(483).then(s.bind(s,7483))},{path:"/assessments/:assessmentId/summary",name:"AssessmentSummary",component:()=>s.e(759).then(s.bind(s,8184)),props:!0}],wl=(0,m.aE)({history:(0,m.LA)("/"),routes:vl});wl.addRoute({path:"/:catchAll(.*)",redirect:"/dashboard"}),wl.beforeEach((e,t,s)=>{D["default"].get("authToken");const a=D["default"].get("role");return("/"===e.path||"/login"===e.path)&&a&&N.Jj[a]?s("/dashboard"):e.meta&&e.meta.public||"/thankyou"===e.path||"/register"===e.path?s():a&&N.Jj[a]?"/manage-subscription"===e.path||"/subscriptions/plans"===e.path?a===N.gg.USER||a===N.gg.ORGANIZATIONADMIN?s():s("/dashboard"):(0,N.Zf)(a,"routes",e.path)?s():s("/dashboard"):"/"===e.path||"/login"===e.path?s():s("/")});const Ll=wl;var _l=s(3255),Al=s(888),Sl=s(2705);const Cl=(0,a.Ef)(c);Cl.use(_l.Ay),Cl.use(Al.A),Cl.component("Toast",z.A),Cl.component("DatePicker",Sl.A);const Pl=D["default"].get("authToken");Pl?(0,F.fetchCurrentUser)().then(e=>{if(e&&e.role){const t=D["default"].get("role");e.role!==t&&D["default"].set("role",e.role)}}).finally(()=>{Cl.use(Ll),Cl.mount("#app")}):(Cl.use(Ll),Cl.mount("#app"))},8634:(e,t,s)=>{"use strict";e.exports=s.p+"img/VectorDown.702848dc.svg"},9205:(e,t,s)=>{"use strict";s.d(t,{fetchCurrentUser:()=>n});var a=s(4335),i=s(3193);const o="http://127.0.0.1:8000";async function n(){try{const e=i["default"].get("authToken"),t={};e&&(t["Authorization"]=`Bearer ${e}`);const s=await a.A.get(`${o}/api/user`,{headers:t});return s.data}catch(e){return null}}},9443:(e,t,s)=>{"use strict";e.exports=s.p+"img/MyOrganizationOn.7e01d8ef.svg"},9586:(e,t,s)=>{"use strict";e.exports=s.p+"img/Notes.d9b82ed3.svg"},9752:(e,t,s)=>{"use strict";e.exports=s.p+"img/LeadOff.a5287a9a.svg"},9924:(e,t,s)=>{"use strict";s.d(t,{A:()=>L});var a=s(641),i=s(33),o=s(3130);const n=["aria-hidden","tabindex"],r={key:0,class:"sidebar-logo-label"},l={key:0,class:"sidebar-menu"},d=["src"],u=["src"],c=["src"],m=["src"],h=["src"],p=["src"],g=["src"],f=["src"];function b(e,t,b,y,k,v){const w=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("aside",{class:(0,i.C4)(["sidebar",{expanded:b.expanded,"sidebar-disabled":b.sidebarDisabled}]),"aria-hidden":b.sidebarDisabled?"true":null,tabindex:b.sidebarDisabled?-1:null,role:"organizationadmin"},[(0,a.Lk)("div",{class:(0,i.C4)(["sidebar-logo",{expanded:b.expanded}])},[t[0]||(t[0]=(0,a.Lk)("img",{src:o,alt:"Logo"},null,-1)),b.expanded?((0,a.uX)(),(0,a.CE)("span",r,"DOLPHIN")):(0,a.Q3)("",!0)],2),b.hideMenu?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("ul",l,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.menuOptions,(e,t)=>((0,a.uX)(),(0,a.CE)("li",{key:t,style:(0,i.Tr)(b.expanded?{width:"94%",display:"flex",alignItems:"center",padding:"6px",margin:0,listStyle:"none"}:v.getCircleStyle(t))},[(0,a.bF)(w,{to:e.route,class:(0,i.C4)(["sidebar-link",b.expanded?"sidebar-link-expanded":"",v.isActive(e.route)?"active":""]),style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center",width:"100%"}},{default:(0,a.k6)(()=>[(0,a.Lk)("span",{class:(0,i.C4)(["sidebar-icon",b.expanded?"sidebar-icon-expanded":"",v.isActive(e.route)?"active":""]),style:(0,i.Tr)((b.expanded,{}))},["/dashboard"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:0,src:v.isActive("/dashboard")?s(3718):s(6236),alt:"Dashboard",class:"sidebar-svg"},null,8,d)):"/organizations"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:1,src:v.isActive("/organizations")?s(6747):s(359),alt:"Organizations",class:"sidebar-svg"},null,8,u)):"/notifications"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:2,src:v.isActive("/notifications")?s(6686):s(2820),alt:"Notifications",class:"sidebar-svg"},null,8,c)):"/user-permission"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:3,src:v.isActive("/user-permission")?s(35):s(7087),alt:"User + Permission",class:"sidebar-svg"},null,8,m)):"/leads"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:4,src:v.isActive("/leads")?s(3378):s(9752),alt:"Leads",class:"sidebar-svg"},null,8,h)):"/my-organization"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:5,src:v.isActive("/my-organization")?s(9443):s(2687),alt:"My Organization",class:"sidebar-svg"},null,8,p)):"/training-resources"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:6,src:v.isActive("/training-resources")?s(6915):s(223),alt:"Training & Resources",class:"sidebar-svg"},null,8,g)):"/assessments"===e.route?((0,a.uX)(),(0,a.CE)("img",{key:7,src:v.isActive("/assessments")?s(1259):s(3143),alt:"Assessments",class:"sidebar-svg"},null,8,f)):(0,a.Q3)("",!0)],6),b.expanded?((0,a.uX)(),(0,a.CE)("span",{key:0,class:(0,i.C4)(["sidebar-menu-label","sidebar-menu-label-expanded",v.isActive(e.route)?"active-label":""])},(0,i.v_)(e.label),3)):(0,a.Q3)("",!0)]),_:2},1032,["to","class"])],4))),128))]))],10,n)}var y=s(6939);const k={name:"Sidebar",props:{hideMenu:{type:Boolean,default:!1},expanded:{type:Boolean,default:!1},sidebarDisabled:{type:Boolean,default:!1}},computed:{role(){const e=s(3193)["default"];return e.get("role")||""},menuOptions(){if(this.hideMenu)return[];const e=[{route:"/dashboard",label:"Dashboard"},{route:"/organizations",label:"Organizations"},{route:"/notifications",label:"Notification"},{route:"/user-permission",label:"User + Permission"},{route:"/leads",label:"Leads"},{route:"/my-organization",label:"My Organization"},{route:"/training-resources",label:"Training & Resources"},{route:"/assessments",label:"Assessments"}];return e.filter(e=>(0,y.Zf)(this.role,"routes",e.route))}},methods:{getCircleStyle(e){const t=0===e?24:54*e+24;return{position:"absolute",left:"calc(50% - 22.5px)",top:`${t}px`,width:"45px",height:"45px",display:"flex",justifyContent:"center",alignItems:"center",padding:0,margin:0,listStyle:"none"}},isActive(e){return"/organizations"===e?this.$route.path.startsWith("/organizations"):"/leads"===e?this.$route.path.startsWith("/leads"):"/my-organization"===e?this.$route.path.startsWith("/my-organization"):"/dashboard"===e?this.$route.path.startsWith("/dashboard"):"/notifications"===e?this.$route.path.startsWith("/notifications"):"/assessments"===e?this.$route.path.startsWith("/assessments"):"/training-resources"===e?this.$route.path.startsWith("/training-resources"):this.$route.path===e}}};var v=s(6262);const w=(0,v.A)(k,[["render",b],["__scopeId","data-v-29da599a"]]),L=w}},t={};function s(a){var i=t[a];if(void 0!==i)return i.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=e,(()=>{var e=[];s.O=(t,a,i,o)=>{if(!a){var n=1/0;for(u=0;u<e.length;u++){for(var[a,i,o]=e[u],r=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(s.O).every(e=>s.O[e](a[l]))?a.splice(l--,1):(r=!1,o<n&&(n=o));if(r){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,i,o]}})(),(()=>{s.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return s.d(t,{a:t}),t}})(),(()=>{s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce((t,a)=>(s.f[a](e,t),t),[]))})(),(()=>{s.u=e=>"js/"+e+"."+{9:"252be888",110:"590fbbec",202:"ef6b5c18",223:"257b3b08",483:"0ec26588",599:"ddce3021",608:"d5156970",736:"da077845",737:"91793be4",759:"0d2886c8",761:"46f887d6",799:"43d3afd9",838:"aed3210c",893:"7fb4d1e7"}[e]+".js"})(),(()=>{s.miniCssF=e=>"css/"+e+"."+{9:"7991e7e4",202:"912221bd",223:"5a9262f7",483:"2a2fbdbd",599:"1ba98073",608:"969d458f",736:"b60ab7b3",737:"ee0a6aae",759:"6a8d4d92",761:"03ce5520",838:"e70037a1",893:"daac8ea6"}[e]+".css"})(),(()=>{s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="dolphin:";s.l=(a,i,o,n)=>{if(e[a])e[a].push(i);else{var r,l;if(void 0!==o)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var c=d[u];if(c.getAttribute("src")==a||c.getAttribute("data-webpack")==t+o){r=c;break}}r||(l=!0,r=document.createElement("script"),r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.setAttribute("data-webpack",t+o),r.src=a),e[a]=[i];var m=(t,s)=>{r.onerror=r.onload=null,clearTimeout(h);var i=e[a];if(delete e[a],r.parentNode&&r.parentNode.removeChild(r),i&&i.forEach(e=>e(s)),t)return t(s)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}}})(),(()=>{s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{s.p="/"})(),(()=>{if("undefined"!==typeof document){var e=(e,t,a,i,o)=>{var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",s.nc&&(n.nonce=s.nc);var r=s=>{if(n.onerror=n.onload=null,"load"===s.type)i();else{var a=s&&s.type,r=s&&s.target&&s.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+r+")");l.name="ChunkLoadError",l.code="CSS_CHUNK_LOAD_FAILED",l.type=a,l.request=r,n.parentNode&&n.parentNode.removeChild(n),o(l)}};return n.onerror=n.onload=r,n.href=t,a?a.parentNode.insertBefore(n,a.nextSibling):document.head.appendChild(n),n},t=(e,t)=>{for(var s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var i=s[a],o=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var n=document.getElementsByTagName("style");for(a=0;a<n.length;a++){i=n[a],o=i.getAttribute("data-href");if(o===e||o===t)return i}},a=a=>new Promise((i,o)=>{var n=s.miniCssF(a),r=s.p+n;if(t(n,r))return i();e(a,r,null,i,o)}),i={524:0};s.f.miniCss=(e,t)=>{var s={9:1,202:1,223:1,483:1,599:1,608:1,736:1,737:1,759:1,761:1,838:1,893:1};i[e]?t.push(i[e]):0!==i[e]&&s[e]&&t.push(i[e]=a(e).then(()=>{i[e]=0},t=>{throw delete i[e],t}))}}})(),(()=>{var e={524:0};s.f.j=(t,a)=>{var i=s.o(e,t)?e[t]:void 0;if(0!==i)if(i)a.push(i[2]);else{var o=new Promise((s,a)=>i=e[t]=[s,a]);a.push(i[2]=o);var n=s.p+s.u(t),r=new Error,l=a=>{if(s.o(e,t)&&(i=e[t],0!==i&&(e[t]=void 0),i)){var o=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;r.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",r.name="ChunkLoadError",r.type=o,r.request=n,i[1](r)}};s.l(n,l,"chunk-"+t,t)}},s.O.j=t=>0===e[t];var t=(t,a)=>{var i,o,[n,r,l]=a,d=0;if(n.some(t=>0!==e[t])){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var u=l(s)}for(t&&t(a);d<n.length;d++)o=n[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},a=self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=s.O(void 0,[504],()=>s(8621));a=s.O(a)})();
//# sourceMappingURL=app.622efe49.js.map