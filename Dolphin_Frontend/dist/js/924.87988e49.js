"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[924],{2742:(t,e,n)=>{n.r(e),n.d(e,{default:()=>S});var l=n(641),r=n(33);const a={class:"page"},i={class:"table-outer"},s={class:"table-card"},u={class:"billing-plan-box"},o={class:"plan-name"},c={key:0},d={key:1},p={key:2},m={class:"plan-price"},h={key:0},y={key:1},k={key:2},b={class:"plan-meta"},g={class:"plan-next"},v={class:"table-container"},L={class:"table"},f=["href"],C={width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",style:{"vertical-align":"middle","margin-right":"4px"}};function P(t,e,n,P,E,w){const x=(0,l.g2)("TableHeader"),_=(0,l.g2)("MainLayout");return(0,l.uX)(),(0,l.Wv)(_,null,{default:(0,l.k6)(()=>[(0,l.Lk)("div",a,[(0,l.Lk)("div",i,[(0,l.Lk)("div",s,[e[4]||(e[4]=(0,l.Lk)("div",{class:"billing-title"}," Billing Details (Current Subscription) ",-1)),(0,l.Lk)("div",u,[(0,l.Lk)("div",null,[(0,l.Lk)("div",o,[!E.currentPlan||2500!==Number(E.currentPlan.price)&&2500!==Number(E.currentPlan.amount)?!E.currentPlan||250!==Number(E.currentPlan.price)&&250!==Number(E.currentPlan.amount)?((0,l.uX)(),(0,l.CE)("span",p,(0,r.v_)(E.currentPlan?.name||""),1)):((0,l.uX)(),(0,l.CE)("span",d,"Basic")):((0,l.uX)(),(0,l.CE)("span",c,"Standard"))]),(0,l.Lk)("div",m,[!E.currentPlan||2500!==Number(E.currentPlan.price)&&2500!==Number(E.currentPlan.amount)?!E.currentPlan||250!==Number(E.currentPlan.price)&&250!==Number(E.currentPlan.amount)?((0,l.uX)(),(0,l.CE)("span",k,(0,r.v_)(E.currentPlan?.price?`$${E.currentPlan.price}`:E.currentPlan?.amount?`$${E.currentPlan.amount}`:""),1)):((0,l.uX)(),(0,l.CE)("span",y,"$250/Month")):((0,l.uX)(),(0,l.CE)("span",h,"$2500/Annual"))])]),(0,l.Lk)("div",b,[(0,l.Lk)("div",null,[e[0]||(e[0]=(0,l.eW)(" Subscription Start : ",-1)),(0,l.Lk)("b",null,(0,r.v_)(E.currentPlan?.start?w.formatDate(E.currentPlan.start):""),1)]),(0,l.Lk)("div",null,[e[1]||(e[1]=(0,l.eW)(" Subscription End : ",-1)),(0,l.Lk)("b",null,(0,r.v_)(E.currentPlan?.end?w.formatDate(E.currentPlan.end):""),1)]),(0,l.Lk)("div",g," (Next bill on "+(0,r.v_)(E.currentPlan?.nextBill?w.formatDate(E.currentPlan.nextBill):"")+") ",1)])]),e[5]||(e[5]=(0,l.Lk)("div",{class:"billing-title"},"Billing History",-1)),(0,l.Lk)("div",v,[(0,l.Lk)("table",L,[(0,l.bF)(x,{columns:[{label:"Payment Method",key:"paymentMethodType",minWidth:"200px"},{label:"Payment Date",key:"paymentDate",minWidth:"200px"},{label:"Subscription End",key:"subscriptionEnd",minWidth:"200px"},{label:"Amount",key:"amount",minWidth:"200px"},{label:"Download",key:"invoice",minWidth:"200px"},{label:"Description",key:"description",minWidth:"200px"}]}),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(E.billingHistory,(t,n)=>((0,l.uX)(),(0,l.CE)("tr",{key:n},[(0,l.Lk)("td",null,(0,r.v_)(t.payment_method),1),(0,l.Lk)("td",null,(0,r.v_)(t.paymentDate?w.formatDate(t.paymentDate):""),1),(0,l.Lk)("td",null,(0,r.v_)(t.subscriptionEnd?w.formatDate(t.subscriptionEnd):""),1),(0,l.Lk)("td",null,(0,r.v_)(t.amount?`$${t.amount}`:""),1),(0,l.Lk)("td",null,[t.pdfUrl?((0,l.uX)(),(0,l.CE)("a",{key:0,href:t.pdfUrl,class:"receipt-link",target:"_blank",rel:"noopener",style:{"margin-left":"8px"}},[((0,l.uX)(),(0,l.CE)("svg",C,[...e[2]||(e[2]=[(0,l.Lk)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"#0074c2","stroke-width":"2"},null,-1),(0,l.Lk)("path",{d:"M7 7h10M7 11h10M7 15h6",stroke:"#0074c2","stroke-width":"2"},null,-1)])])),e[3]||(e[3]=(0,l.eW)(" View Receipt ",-1))],8,f)):(0,l.Q3)("",!0)]),(0,l.Lk)("td",null,(0,r.v_)(t.description),1)]))),128))])])])])])])]),_:1})}var E=n(4631),w=n(5629),x=n(4335),_=n(3193);const D="http://127.0.0.1:8000",W={name:"BillingDetails",components:{MainLayout:E.A,TableHeader:w.A},data(){return{currentPlan:null,billingHistory:[]}},methods:{async fetchBillingDetails(){try{const t=_["default"].get("authToken"),e={};t&&(e["Authorization"]=`Bearer ${t}`);const n=this.$route.query.orgId||null,l=n?`${D}/api/billing/current?org_id=${n}`:`${D}/api/billing/current`,r=await x.A.get(l,{headers:e});this.currentPlan=r.data||null;const a=n?`${D}/api/billing/history?org_id=${n}`:`${D}/api/billing/history`,i=await x.A.get(a,{headers:e});this.billingHistory=Array.isArray(i.data)?i.data:[]}catch(t){console.error("Error fetching billing details:",t),this.currentPlan=null,this.billingHistory=[]}},formatDate(t){if(!t)return"";const e=new Date(t);return isNaN(e)?"":e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}},mounted(){this.fetchBillingDetails()}};var $=n(6262);const X=(0,$.A)(W,[["render",P],["__scopeId","data-v-65e023c8"]]),S=X},5629:(t,e,n)=>{n.d(e,{A:()=>p});var l=n(641),r=n(33),a=n(3751);const i=n.p+"img/up-down.53d62c9d.svg",s=["role","tabindex","onClick","onKeyup"];function u(t,e,n,u,o,c){return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("colgroup",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.columns,(t,e)=>((0,l.uX)(),(0,l.CE)("col",{key:"col-"+(t.key||e),class:(0,r.C4)(t.width||t.minWidth),style:(0,r.Tr)(c.getColumnStyle(t))},null,6))),128))]),(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.columns,(e,u)=>((0,l.uX)(),(0,l.CE)("th",{key:e.key||u,class:(0,r.C4)([0===u?"rounded-th-left":"",u===n.columns.length-1?"rounded-th-right":"",e.width||e.minWidth,e.class||""]),style:(0,r.Tr)(c.getColumnStyle(e)),role:e.sortable?"button":null,tabindex:e.sortable?0:null,scope:"col",onClick:n=>!0===e.sortable?t.$emit("sort",e.key):null,onKeyup:(0,a.jR)(n=>!0===e.sortable?t.$emit("sort",e.key):null,["enter"])},[(0,l.Lk)("span",{class:(0,r.C4)(["org-th-content",e.sortable?"org-th-sortable":"",n.activeSortKey===e.key?"sorted":""])},[(0,l.eW)((0,r.v_)(e.label)+" ",1),!0===e.sortable?((0,l.uX)(),(0,l.CE)("img",{key:0,src:i,class:(0,r.C4)(["org-th-sort",n.activeSortKey===e.key?n.sortAsc?"asc":"desc":""]),alt:"Sort"},null,2)):(0,l.Q3)("",!0)],2)],46,s))),128))])])],64)}const o={name:"TableHeader",emits:["sort"],props:{columns:{type:Array,required:!0},activeSortKey:{type:String,default:null},sortAsc:{type:Boolean,default:!0}},methods:{getColumnStyle(t){let e={};if(t.width&&(e.width="number"===typeof t.width?t.width+"px":t.width),t.minWidth&&(e.minWidth="number"===typeof t.minWidth?t.minWidth+"px":t.minWidth),t.style){const n=t.style.split(";").filter(t=>t.trim());n.forEach(t=>{const[n,l]=t.split(":").map(t=>t.trim());if(n&&l){const t=n.replace(/-([a-z])/g,t=>t[1].toUpperCase());e[t]=l}})}return Object.keys(e).length>0?e:null}}};var c=n(6262);const d=(0,c.A)(o,[["render",u],["__scopeId","data-v-9953bdcc"]]),p=d}}]);
//# sourceMappingURL=924.87988e49.js.map