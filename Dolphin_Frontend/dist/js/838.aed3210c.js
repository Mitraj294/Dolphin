"use strict";(self["webpackChunkdolphin"]=self["webpackChunkdolphin"]||[]).push([[838],{7838:(s,e,t)=>{t.r(e),t.d(e,{default:()=>v});var a=t(641),n=t(33),i=t(3751),o=t(7392),r=t(4682);const u={class:"assessment-answer-page"},d={class:"assessment-card"},l={class:"assessment-title"},m=["for"],c=["onUpdate:modelValue","id"],p=["disabled"],_={key:0},b={key:1};function h(s,e,t,h,g,q){const k=(0,a.g2)("Toast");return(0,a.uX)(),(0,a.CE)("div",u,[e[1]||(e[1]=(0,a.Lk)("img",{src:o,alt:"Lines",class:"bg-lines"},null,-1)),e[2]||(e[2]=(0,a.Lk)("img",{src:r,alt:"Illustration",class:"bg-illustration"},null,-1)),(0,a.Lk)("div",d,[(0,a.bF)(k),(0,a.Lk)("h2",l,(0,n.v_)(g.assessment?.name),1),(0,a.Lk)("form",{onSubmit:e[0]||(e[0]=(0,i.D$)((...s)=>q.submitAnswers&&q.submitAnswers(...s),["prevent"]))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(g.assessment?.questions||[],s=>((0,a.uX)(),(0,a.CE)("div",{key:s.assessment_question_id,class:"question-block"},[(0,a.Lk)("label",{for:"q-"+s.assessment_question_id,class:"question-label"},(0,n.v_)(s.text),9,m),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":e=>g.answers[s.assessment_question_id]=e,id:"q-"+s.assessment_question_id,type:"text",class:"question-input",required:""},null,8,c),[[i.Jo,g.answers[s.assessment_question_id]]])]))),128)),(0,a.Lk)("button",{type:"submit",disabled:g.loading,class:"submit-btn"},[g.loading?((0,a.uX)(),(0,a.CE)("span",_,"Submitting...")):((0,a.uX)(),(0,a.CE)("span",b,"Submit"))],8,p)],32)])])}var g=t(4335),q=t(9063),k=t(3080);const w={name:"AssessmentAnswerPage",components:{Toast:q.A},setup(){const s=(0,k.d)();return{toast:s}},data(){return{assessment:null,answers:{},loading:!1}},async created(){const s=this.$route.params.token;try{const e="http://127.0.0.1:8000",t=await g.A.get(`${e}/api/assessment/answer/${s}`);this.assessment=t.data.assessment,this.group_id=t.data.group?t.data.group.id:null,this.member_id=t.data.member?t.data.member.id:null;for(const s of this.assessment.questions)this.answers[s.assessment_question_id]=""}catch(e){this.$router.replace({name:"ThanksPage",query:{already:"1"}})}},methods:{async submitAnswers(){this.loading=!0;const s=this.$route.params.token,e="http://127.0.0.1:8000";try{const t=this.assessment.questions.map(s=>({assessment_question_id:s.assessment_question_id,organization_assessment_question_id:s.question_id,answer:this.answers[s.assessment_question_id]})),a={answers:t,group_id:this.group_id,member_id:this.member_id};await g.A.post(`${e}/api/assessment/answer/${s}`,a);this.$router.replace({name:"ThanksPage"})}catch(t){this.toast.add({severity:"error",summary:"Submission failed.",life:3500})}finally{this.loading=!1}}}};var y=t(6262);const f=(0,y.A)(w,[["render",h],["__scopeId","data-v-718bb9bb"]]),v=f}}]);
//# sourceMappingURL=838.aed3210c.js.map